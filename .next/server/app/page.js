(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4413:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(5480),s(2029),s(5866);var a=s(3191),l=s(8716),n=s(7922),r=s.n(n),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5480)),"C:\\Users\\Administrator\\Desktop\\214\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\Administrator\\Desktop\\214\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Administrator\\Desktop\\214\\src\\app\\page.tsx"],u="/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2709:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5785:()=>{},8565:(e,t,s)=>{Promise.resolve().then(s.bind(s,3164))},3353:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=s(1174);s(326),s(7577);let l=a._(s(7028));function n(e,t){var s;let a={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,l.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},933:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=s(4129);function l(e){let{reason:t,children:s}=e;throw new a.BailoutToCSRError(t)}},7028:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=s(326),l=s(7577),n=s(933),r=s(6618);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},s=(0,l.lazy)(()=>t.loader().then(i)),c=t.loading;function d(e){let i=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.PreloadCss,{moduleIds:t.modules}),(0,a.jsx)(s,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(l.Suspense,{fallback:i,children:o})}return d.displayName="LoadableComponent",d}},6618:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let a=s(326),l=s(4580);function n(e){let{moduleIds:t}=e,s=(0,l.getExpectedRequestStore)("next/dynamic css"),n=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,a.jsx)(a.Fragment,{children:n.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},5442:(e,t,s)=>{"use strict";var a=s(7577),l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,r=a.useEffect,i=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!l(e,s)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=n({inst:{value:s,getSnapshot:t}}),l=a[0].inst,d=a[1];return i(function(){l.value=s,l.getSnapshot=t,c(l)&&d({inst:l})},[e,s,t]),r(function(){return c(l)&&d({inst:l}),e(function(){c(l)&&d({inst:l})})},[e]),o(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},9251:(e,t,s)=>{"use strict";var a=s(7577),l=s(4095),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=l.useSyncExternalStore,i=a.useRef,o=a.useEffect,c=a.useMemo,d=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,a,l){var u=i(null);if(null===u.current){var x={hasValue:!1,value:null};u.current=x}else x=u.current;var p=r(e,(u=c(function(){function e(e){if(!o){if(o=!0,r=e,e=a(e),void 0!==l&&x.hasValue){var t=x.value;if(l(t,e))return i=t}return i=e}if(t=i,n(r,e))return t;var s=a(e);return void 0!==l&&l(t,s)?(r=e,t):(r=e,i=s)}var r,i,o=!1,c=void 0===s?null:s;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,s,a,l]))[0],u[1]);return o(function(){x.hasValue=!0,x.value=p},[p]),d(p),p}},4095:(e,t,s)=>{"use strict";e.exports=s(5442)},1508:(e,t,s)=>{"use strict";e.exports=s(9251)},3164:(e,t,s)=>{"use strict";let a;s.r(t),s.d(t,{default:()=>T});var l,n=s(326),r=s(7577),i=s(3353),o=s.n(i);let c=e=>{let t;let s=new Set,a=(e,a)=>{let l="function"==typeof e?e(t):e;if(!Object.is(l,t)){let e=t;t=(null!=a?a:"object"!=typeof l||null===l)?l:Object.assign({},t,l),s.forEach(s=>s(t,e))}},l=()=>t,n={setState:a,getState:l,getInitialState:()=>r,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},r=t=e(a,l,n);return n},d=e=>e?c(e):c;var u=s(1508);let{useDebugValue:x}=r,{useSyncExternalStoreWithSelector:p}=u,m=!1,h=e=>e,f=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?d(e):e,s=(e,s)=>(function(e,t=h,s){s&&!m&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),m=!0);let a=p(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return x(a),a})(t,e,s);return Object.assign(s,t),s};!function(e){e[e.DOWN=0]="DOWN",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.UP=3]="UP"}(l||(l={}));let b=(a=e=>({playerX:96,playerY:448,direction:l.DOWN,isMoving:!1,animFrame:0,nearbyObject:null,activeModal:null,modalObjectId:null,isMusicPlaying:!1,movePlayer:(t,s)=>e({playerX:t,playerY:s}),setDirection:t=>e({direction:t}),setIsMoving:t=>e({isMoving:t}),nextAnimFrame:()=>e(e=>({animFrame:(e.animFrame+1)%4})),setNearbyObject:t=>e({nearbyObject:t}),openModal:(t,s)=>e({activeModal:t,modalObjectId:s??null}),closeModal:()=>e({activeModal:null,modalObjectId:null}),toggleMusic:()=>e(e=>({isMusicPlaying:!e.isMusicPlaying}))}))?f(a):f;function g(e){return`/Happy-Valentine-s-Day${e}`}let j={book1:["这是我们一起读过的故事……","每一本书都藏着一段回忆。","从第一次一起逛书店开始，","到后来窝在沙发上各看各的书，","那些安静又温暖的时光，","是我最珍贵的宝藏。\uD83D\uDCDA"],book2:["这本相册记录了我们的旅行……","每张照片背后都有一个故事，","有你在的地方，就是最美的风景。\uD83C\uDF38"],book3:["一本菜谱，记着我们试过的食谱……","虽然有些翻车了 \uD83D\uDE05","但一起做饭的日子真的很快乐！\uD83C\uDF73"],book4:["你的日记本……偷偷翻了一页：",'"今天又是被她甜到的一天。"',"……///\uD83D\uDC95"]},v=`亲爱的可可：

在认识你之前，我很少或从不写信。

谢谢你一直陪在我身边，无论是开心还是难过的日子。

每一个和你在一起的瞬间，都是我最想珍藏的礼物。

未来的每一天，我都想和你一起度过。

永远爱你的人 ❤️

2026.2.14`,y=g("/videos/our-video.mp4"),D=["你发现了一个精心包装的礼物盒！\uD83C\uDF81","轻轻打开……","叮！你的Steam收到了一张通往鹈鹕镇的车票（《星露谷物语》已送达）！","想到之后可能会异地，就希望能有一个无论现实距离多远，我们都能随时‘见面’的地方。 ","这是一个属于我们的新世界，想和你一起在这里种下第一颗防风草，想送你代表共度一生承诺的‘美人鱼吊坠’，想和你一起度过像素世界里的春夏秋冬。","让我们一起搭建起属于我们的小家吧~"],N={photo1:{src:g("/photos/photo1.png"),caption:"一直用作手机壁纸的合照 \uD83D\uDCF8"},photo2:{src:g("/photos/photo2.png"),caption:"看《ZOOTOPIA 2》的那天！ \uD83D\uDDBC️"},photo3:{src:g("/photos/photo3.png"),caption:"这是我们去‘布城’的那天"},photo4:[{src:g("/photos/wall1.png"),caption:"狼狈且开心的‘云顶之旅~’"},{src:g("/photos/wall2.png"),caption:"周年纪念日的花花"},{src:g("/photos/wall3.png"),caption:"可爱的小三花和可爱的她"},{src:g("/photos/wall4.png"),caption:"非常美丽的一件裙子！"},{src:g("/photos/wall5.png"),caption:"希腊女神裙配库洛米哈哈哈哈"},{src:g("/photos/wall6.png"),caption:"去到你的城市"}],map:{src:g("/photos/map.jpg"),caption:"我们的冒险地图 \uD83D\uDDFA️"}},w=g("/music/bgm.mp3"),C=[{lat:24.48,lon:118.09,label:"厦门",note:"想念那个在海边的夏天"},{lat:3.14,lon:101.69,label:"吉隆坡",note:"我们相遇的地方"}];function k(){let e=b(e=>e.closeModal),t=b(e=>e.modalObjectId),[s,a]=(0,r.useState)(0),[l,i]=(0,r.useState)(0),[o,c]=(0,r.useState)(!0),d=t&&j[t]||j.book1||["书架上摆满了书……"],u=d[s]??"",x=s>=d.length-1,p=(0,r.useCallback)(()=>{o?(i(u.length),c(!1)):x?e():(a(e=>e+1),i(0),c(!0))},[o,u.length,x,e]);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center pb-8 pointer-events-none",children:n.jsx("div",{className:"pointer-events-auto max-w-[640px] w-[90vw] cursor-pointer",onClick:p,children:n.jsx("div",{className:"relative bg-[#3a2a18] border-[3px] border-[#c8a96e] rounded-xl p-1 shadow-2xl",style:{boxShadow:"0 0 20px rgba(200, 169, 110, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)"},children:(0,n.jsxs)("div",{className:"bg-gradient-to-b from-[#f5e6c8] to-[#efe0c0] rounded-lg p-5 min-h-[120px] flex flex-col justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-3 border-b border-[#d4b896] pb-2",children:[n.jsx("span",{className:"text-lg",children:"\uD83D\uDCDA"}),n.jsx("span",{className:"font-pixel text-[#4a3520] text-xs font-bold",children:"书架"}),n.jsx("div",{className:"ml-auto flex gap-1",children:Array.from({length:d.length}).map((e,t)=>n.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors ${t<=s?"bg-[#8b6914]":"bg-[#d4b896]"}`},t))})]}),(0,n.jsxs)("p",{className:"font-pixel text-[#4a3520] text-sm leading-relaxed min-h-[3em] flex-1",children:[u.slice(0,l),o&&n.jsx("span",{className:"inline-block w-2 h-4 bg-[#8b6914] ml-0.5 animate-pulse"})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-[#d4b896]",children:[(0,n.jsxs)("span",{className:"font-pixel text-[10px] text-[#8b6914]",children:[s+1," / ",d.length]}),!o&&n.jsx("span",{className:"font-pixel text-[10px] text-[#8b6914] animate-bounce",children:x?"按 E 关闭":"按 E 继续 ▸"})]})]})})})})}function M(){let e=b(e=>e.closeModal),[t,s]=(0,r.useState)(!1);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e,children:(0,n.jsxs)("div",{className:`relative max-w-[550px] w-[90vw] transition-all duration-700 ease-out origin-top
          ${t?"opacity-100 scale-100 rotate-0":"opacity-0 scale-y-0 -rotate-3"}`,onClick:e=>e.stopPropagation(),children:[n.jsx("div",{className:`transition-all duration-500 ${t?"opacity-0 scale-y-0 h-0":"opacity-100"}`,children:(0,n.jsxs)("div",{className:"bg-[#D4A574] border-4 border-[#8B6914] rounded-lg p-8 text-center shadow-xl",children:[n.jsx("span",{className:"text-4xl",children:"\uD83D\uDC8C"}),n.jsx("p",{className:"font-pixel text-sdv-dark text-xs mt-2",children:"点击打开信封..."})]})}),(0,n.jsxs)("div",{className:`transition-all duration-700 delay-200 ${t?"opacity-100":"opacity-0 scale-y-0"}`,children:[(0,n.jsxs)("div",{className:"relative rounded-lg shadow-2xl overflow-hidden",style:{backgroundImage:`url('${g("/sprites/letter.png")}')`,backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute left-12 top-0 bottom-0 w-[2px] bg-red-300/40"}),(0,n.jsxs)("div",{className:"border-4 border-[#D4A574] rounded-lg m-1",children:[n.jsx("div",{className:"flex justify-center pt-4 pb-2",children:n.jsx("div",{className:"flex gap-1",children:["\uD83D\uDC95","✨","\uD83D\uDC95"].map((e,t)=>n.jsx("span",{className:"text-lg animate-sparkle",style:{animationDelay:`${.3*t}s`},children:e},t))})}),n.jsx("div",{className:"px-8 pb-6 pl-16",children:n.jsx("div",{className:"font-letter text-[#4A3520] text-lg leading-[32px] whitespace-pre-line",children:v})}),n.jsx("div",{className:"flex justify-center pb-4",children:n.jsx("div",{className:"flex gap-2",children:["\uD83C\uDF38","\uD83D\uDC9D","\uD83C\uDF38"].map((e,t)=>n.jsx("span",{className:"text-sm",children:e},t))})})]}),n.jsx("div",{className:"absolute top-1/3 left-0 right-0 h-[1px] bg-[#D4A574]/20"}),n.jsx("div",{className:"absolute top-2/3 left-0 right-0 h-[1px] bg-[#D4A574]/20"})]}),n.jsx("button",{onClick:e,className:"mt-4 w-full font-pixel text-xs bg-sdv-dark text-sdv-cream py-2 rounded   hover:bg-sdv-brown transition-colors border-2 border-sdv-brown   active:translate-y-[1px]",children:"✕ 合上信纸 (Esc)"})]})]})})}function S(){let e=b(e=>e.closeModal),[t,s]=(0,r.useState)(!1),a=new Date,l=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][a.getMonth()],i=a.getDate(),o=["日","一","二","三","四","五","六"][a.getDay()];return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e,children:(0,n.jsxs)("div",{className:"relative max-w-[360px] w-[85vw]",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden border-2 border-gray-200",style:{boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[(0,n.jsxs)("div",{className:"flex justify-center gap-16 -mt-2 relative z-10",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-400 rounded-full border-2 border-gray-500 shadow-inner"}),n.jsx("div",{className:"w-6 h-6 bg-gray-400 rounded-full border-2 border-gray-500 shadow-inner"})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-rose-500 text-white text-center py-3 -mt-3",children:[n.jsx("p",{className:"font-pixel text-lg tracking-wider",children:l}),(0,n.jsxs)("p",{className:"font-pixel text-[10px] opacity-80",children:["星期",o]})]}),n.jsx("div",{className:`text-center py-6 transition-all duration-500 ${t?"opacity-100 scale-100":"opacity-0 scale-y-0"}`,children:n.jsx("p",{className:"text-7xl font-bold text-gray-800",style:{fontFamily:"Georgia, serif"},children:i})}),n.jsx("div",{className:`text-center px-6 pb-4 transition-all duration-700 delay-200 ${t?"opacity-100":"opacity-0"}`,children:(0,n.jsxs)("div",{className:"bg-gradient-to-r from-pink-50 to-red-50 rounded-lg p-4 border border-pink-200",children:[(0,n.jsxs)("p",{className:"font-pixel text-xs text-red-400 mb-2",children:["❤️ ","2026年2月14日"]}),n.jsx("p",{className:"font-pixel text-[11px] text-gray-600 leading-relaxed whitespace-pre-line",children:"今天是属于我们的日子 \uD83D\uDC95\n\n每一天都值得被铭记，\n而今天，格外特别。"})]})}),n.jsx("div",{className:"flex justify-center gap-1 pb-3",children:["\uD83D\uDC95","✨","\uD83D\uDC95"].map((e,t)=>n.jsx("span",{className:"text-sm",style:{animation:`pulse ${1.5+.3*t}s ease-in-out infinite`,animationDelay:`${.2*t}s`},children:e},t))})]}),n.jsx("p",{className:"text-center font-pixel text-[10px] text-white/60 mt-3",children:"按 E / Esc 关闭"})]})})}function P(){let e=b(e=>e.closeModal),t=(0,r.useRef)(null);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:e,children:(0,n.jsxs)("div",{className:"relative max-w-[720px] w-[92vw]",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"bg-gradient-to-b from-[#3a3a3a] to-[#2a2a2a] rounded-2xl p-4 shadow-2xl border border-gray-700",style:{boxShadow:"0 8px 40px rgba(0,0,0,0.5)"},children:[n.jsx("div",{className:"text-center mb-2",children:n.jsx("span",{className:"font-pixel text-[10px] text-gray-400",children:"\uD83D\uDCFA 我们的回忆"})}),(0,n.jsxs)("div",{className:"bg-black rounded-lg overflow-hidden border-2 border-gray-600 aspect-video relative",children:[n.jsx("video",{ref:t,src:y,controls:!0,playsInline:!0,className:"w-full h-full object-contain",children:n.jsx("source",{src:y,type:"video/mp4"})}),n.jsx("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-br from-white/5 to-transparent"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center mt-3 gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_6px_rgba(34,197,94,0.5)]"}),n.jsx("div",{className:"w-8 h-0.5 bg-gray-600 rounded"})]})]}),n.jsx("div",{className:"mx-auto w-24 h-2 bg-[#2a2a2a] rounded-b-lg"}),n.jsx("div",{className:"mx-auto w-36 h-1.5 bg-[#333] rounded-b"}),n.jsx("button",{onClick:e,className:"mt-4 w-full font-pixel text-xs bg-gray-800 text-gray-200 py-2.5 rounded-lg   hover:bg-gray-700 transition-colors border border-gray-600   active:translate-y-[1px]",children:"✕ 关闭 (Esc)"})]})})}function E(){let e=b(e=>e.closeModal),[t,s]=(0,r.useState)("wrapped"),[a,l]=(0,r.useState)(0),[i,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(!1),u=D[a]??"",x=a>=D.length-1,p=(0,r.useCallback)(()=>{"opened"===t&&(c?(o(u.length),d(!1)):x?e():(l(e=>e+1),o(0),d(!0)))},[t,c,u.length,x,e]);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:()=>"opened"===t?p():void 0,children:(0,n.jsxs)("div",{className:"relative max-w-[480px] w-[88vw]",onClick:e=>e.stopPropagation(),children:["wrapped"===t&&(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-bounce",children:[n.jsx("div",{className:"text-8xl",children:"\uD83C\uDF81"}),n.jsx("p",{className:"font-pixel text-white text-xs animate-pulse",children:"发现了一个礼物……"})]}),"opening"===t&&(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"text-8xl animate-spin",style:{animationDuration:"0.5s"},children:"\uD83C\uDF81"}),n.jsx("div",{className:"flex gap-2",children:["✨","\uD83C\uDF80","✨","\uD83C\uDF80","✨"].map((e,t)=>n.jsx("span",{className:"text-2xl animate-ping",style:{animationDelay:`${.1*t}s`,animationDuration:"0.6s"},children:e},t))})]}),"opened"===t&&(0,n.jsxs)("div",{className:"cursor-pointer",onClick:p,children:[n.jsx("div",{className:"text-center mb-4",children:(0,n.jsxs)("div",{className:"flex justify-center gap-2 text-3xl mb-2",children:[n.jsx("span",{children:"\uD83C\uDF80"}),n.jsx("span",{children:"✨"}),n.jsx("span",{children:"\uD83C\uDF80"})]})}),(0,n.jsxs)("div",{className:"bg-gradient-to-b from-[#fff5f5] to-[#ffe8ec] rounded-xl p-1 shadow-2xl border-2 border-pink-300",style:{boxShadow:"0 0 30px rgba(255,182,193,0.3)"},children:[n.jsx("div",{className:"bg-white/80 rounded-lg p-5 min-h-[100px]",children:(0,n.jsxs)("p",{className:"font-pixel text-[#8b4557] text-sm leading-relaxed min-h-[2.5em]",children:[u.slice(0,i),c&&n.jsx("span",{className:"inline-block w-2 h-3.5 bg-pink-400 ml-0.5 animate-pulse"})]})}),(0,n.jsxs)("div",{className:"flex justify-between items-center px-4 py-2",children:[(0,n.jsxs)("span",{className:"font-pixel text-[9px] text-pink-400",children:[a+1," / ",D.length]}),!c&&n.jsx("span",{className:"font-pixel text-[9px] text-pink-400 animate-bounce",children:x?"按 E 关闭":"按 E 继续 ▸"})]})]})]})]})})}function F(){let e=b(e=>e.closeModal),t=b(e=>e.modalObjectId)??"photo1",[s,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(0),[x,p]=(0,r.useState)(null),m=N[t],h=Array.isArray(m)?m:[m??{src:g("/photos/photo1.jpg"),caption:"一张照片"}],f=h.length>1,j=h[d]??h[0];return(0,r.useCallback)(()=>{f&&(i(!1),c(!1),p(null),u(e=>(e+1)%h.length))},[f,h.length]),(0,r.useCallback)(()=>{f&&(i(!1),c(!1),p(null),u(e=>(e-1+h.length)%h.length))},[f,h.length]),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,children:(0,n.jsxs)("div",{className:`relative transition-all duration-500 ease-out
          ${s?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-6"}`,style:{width:x?`min(${x.w}px, 92vw)`:void 0,maxWidth:"92vw",maxHeight:"94vh"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"relative",children:[n.jsx("div",{className:"bg-gradient-to-br from-[#8B6914] via-[#A0782C] to-[#6B4F12] p-3 rounded-sm",style:{boxShadow:"0 8px 32px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.15)"},children:n.jsx("div",{className:"bg-gradient-to-br from-[#D4A54A] to-[#B8912E] p-1 rounded-sm",children:n.jsx("div",{className:"bg-[#2a2018] p-1 rounded-sm",children:(0,n.jsxs)("div",{className:"relative bg-[#1a1410] overflow-hidden rounded-sm",children:[l?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 px-10 bg-gradient-to-br from-[#3a2a20] to-[#2a1a10]",children:[n.jsx("span",{className:"text-5xl mb-3",children:"\uD83D\uDDBC️"}),n.jsx("p",{className:"font-pixel text-[#8B6914] text-xs",children:"把照片放在 /public/photos/ 文件夹"}),(0,n.jsxs)("p",{className:"font-pixel text-[#6B4F12] text-[10px] mt-1",children:["文件名: ",j.src.split("/").pop()]})]}):n.jsx("img",{src:j.src,alt:j.caption,className:`block w-full h-auto transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,style:{maxHeight:"calc(94vh - 100px)"},onLoad:e=>{let t=e.currentTarget;if(t.naturalWidth&&t.naturalHeight){let e,s;let a=.92*window.innerWidth-20,l=.94*window.innerHeight-100,n=t.naturalWidth/t.naturalHeight;a/l>n?e=(s=Math.min(l,t.naturalHeight))*n:s=(e=Math.min(a,t.naturalWidth))/n,p({w:e+20,h:s+20})}c(!0)},onError:()=>i(!0)}),!o&&!l&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"font-pixel text-[#8B6914] text-xs animate-pulse",children:"加载中..."})}),n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.08) 0%, transparent 50%, rgba(255,255,255,0.03) 100%)"}})]})})})}),n.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-[#888] rounded-full border-2 border-[#666] shadow-md"})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx("p",{className:"font-pixel text-white text-sm drop-shadow-lg",children:j.caption})}),f&&n.jsx("div",{className:"mt-2 flex items-center justify-center gap-1.5",children:h.map((e,t)=>n.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${t===d?"bg-[#FFD700] scale-125":"bg-white/30"}`},t))}),n.jsx("div",{className:"mt-3 text-center",children:n.jsx("span",{className:"font-pixel text-white/50 text-[10px]",children:f?`${d+1} / ${h.length}　按 E / → 下一张　按 A / ← 上一张　Esc 关闭`:"按 E / Esc 关闭"})})]})})}function A(){let e=b(e=>e.closeModal),[t,s]=(0,r.useState)(!1);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,children:n.jsx("div",{className:`relative max-w-[400px] w-[85vw] transition-all duration-500 ease-out
          ${t?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-6"}`,onClick:e=>e.stopPropagation(),children:(0,n.jsxs)("div",{className:"bg-gradient-to-b from-[#5C3317] to-[#3E2210] border-4 border-[#8B6914] rounded-lg p-6",style:{boxShadow:"0 0 20px rgba(139,105,20,0.4), inset 0 1px 0 rgba(255,255,255,0.1)"},children:[n.jsx("div",{className:"text-center mb-4",children:n.jsx("span",{className:"text-4xl",children:"\uD83D\uDC84"})}),n.jsx("p",{className:"font-pixel text-white text-sm text-center leading-relaxed",children:"可可化妆的地方 \uD83D\uDC84"}),n.jsx("div",{className:"mt-5 text-center",children:n.jsx("span",{className:"font-pixel text-white/40 text-[10px]",children:"按 E / Esc 关闭"})})]})})})}let O=["000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000001111111110000000000000001111111111111111111100000000","000000000000000000011111111111000000000000111111111111111111111110000000","000000000000001100111111111111100000000011111111111111111111111111100000","000000000000011111111111111111100000001111111111111111111111111111100000","000000000001111111111111111111100000011111111111111111111111111111000000","000000000011111111111111111111000000011111111111111111111111111110000000","000000000111111111111111111110000000001111111111111111111111111100000000","000000001111111111111111111100000000000011111111111111111111111100000000","000000001111111111111111111000000000000001111111011111111111111000000000","000000001111111111111111110000000000000001111100001111111111111000000000","000000000111111111111111100000000000000001111000001111111111110000000000","000000000011111111111111000000000000000011110000011111111111100000000000","000000000001111111111110000000000000000111100000111111111111000000000000","000000000000111111111110000000000000001111000001111111111110000000000000","000000000000011111111100000000000000001110000011111111111100000000000000","000000000000001111111100000000000000001100000011111111111000000000000000","000000000000000111110000000000000000001100000111111111110000000000000000","000000000000000011110000000000000000000100001111111111100000000000000000","000000000000000011100000000000000000000000011111111110000000000000000000","000000000000000111000000000000000000000000011111111100000000000000000000","000000000000001110000000000000000000000000001111111000000000000000000000","000000000000011100000000000000000000000000000111110000000000000000001100","000000000000111000000000000000000000000000000011100000000000000000011110","000000000001110000000000000000000000000000000001000000000000000000111110","000000000001100000000000000000000000000000000000000000000000000001111100","000000000001000000000000000000000000000000000000000000000000000011111000","000000000000000000000000000000000000000000000000000000000000000111110000","000000000000000000000000000000000000000000000000000000000000001111100000","000000000000000000000000000000000000000000000000000000000000011111000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000"],_="#ffcc00";function $(){let e=b(e=>e.closeModal),t=(0,r.useRef)(null),[s,a]=(0,r.useState)(!1),l=(0,r.useRef)(4.6),i=(0,r.useRef)({active:!1,lastX:0}),o=(0,r.useRef)(!0),[c,d]=(0,r.useState)(null),u=(0,r.useRef)(0),x=(0,r.useRef)(0),p=(0,r.useCallback)(()=>{let e=t.current;if(!e)return;let s=e.getContext("2d");if(!s)return;u.current++,o.current&&(l.current+=.008);let a=l.current;s.clearRect(0,0,520,520);for(let e=-60;e<=60;e++){let t=Math.sqrt(3600-e*e);for(let l=-Math.floor(t);l<=Math.floor(t);l++){let t,n,r;let i=l/60,o=e/60,c=1-i*i-o*o;if(c<0)continue;let d=Math.sqrt(c),u=function(e,t){let s=Math.floor((90-e)/180*36),a=Math.floor((t+180)/360*72);return a<0&&(a+=72),a>=72&&(a-=72),!(s<0)&&!(s>=36)&&O[s]?.[a]==="1"}(180/Math.PI*Math.asin(-o),180/Math.PI*Math.atan2(i*Math.cos(-a)+d*Math.sin(-a),-i*Math.sin(-a)+d*Math.cos(-a))),x=Math.max(0,.6*d+.4);u?(t=Math.floor(61+30*x),n=Math.floor(122+32*x),r=Math.floor(42+18*x)):(t=Math.floor(30+12*x),n=Math.floor(58+20*x),r=Math.floor(106+32*x)),s.fillStyle=`rgb(${t},${n},${r})`,s.fillRect((65+l)*4,(65+e)*4,4,4)}}s.strokeStyle="#1a2e4a",s.lineWidth=2,s.beginPath(),s.arc(262,262,240,0,2*Math.PI),s.stroke();let n=[];C.forEach((e,t)=>{let l=function(e,t,s){let a=e*Math.PI/180,l=t*Math.PI/180+s;return{x:Math.cos(a)*Math.sin(l),y:-Math.sin(a),z:Math.cos(a)*Math.cos(l)}}(e.lat,e.lon,a);if(l.z<.05)return;let r=(65+60*l.x)*4,i=(65+60*l.y)*4;n.push({sx:r,sy:i,idx:t});let o=.5*Math.sin(.1*u.current+t)+.5;s.save(),s.globalAlpha=.3+.4*o,s.fillStyle=_,s.beginPath(),s.arc(r,i,16,0,2*Math.PI),s.fill(),s.restore(),s.fillStyle="#ff4455",s.fillRect(r-4,i-4,8,8),s.strokeStyle="#ffffff",s.lineWidth=1,s.strokeRect(r-4,i-4,8,8);let d=c===t?1:l.z>.5?.9:.5;s.save(),s.globalAlpha=d,s.font='bold 14px "Press Start 2P", monospace',s.textAlign="center";let x=e.label,p=i-24,m=s.measureText(x).width+12;s.fillStyle="rgba(0,0,0,0.75)",s.fillRect(r-m/2,p-10,m,20),s.strokeStyle=_,s.lineWidth=2,s.strokeRect(r-m/2,p-10,m,20),s.fillStyle="#ffffff",s.fillText(x,r,p+5),s.restore()}),x.current=requestAnimationFrame(p)},[c]),m=(0,r.useCallback)(e=>{i.current={active:!0,lastX:e.clientX},o.current=!1,e.target.setPointerCapture(e.pointerId)},[]),h=(0,r.useCallback)(e=>{if(!i.current.active)return;let t=e.clientX-i.current.lastX;l.current+=.01*t,i.current.lastX=e.clientX},[]),f=(0,r.useCallback)(()=>{i.current.active=!1,setTimeout(()=>{o.current=!0},3e3)},[]);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,children:(0,n.jsxs)("div",{className:`relative transition-all duration-500 ease-out flex flex-col items-center
          ${s?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-6"}`,onClick:e=>e.stopPropagation(),children:[n.jsx("div",{className:"mb-4 text-center",children:n.jsx("h2",{className:"font-pixel text-[#FFD700] text-lg drop-shadow-lg",children:"\uD83C\uDF0D 我们的足迹"})}),(0,n.jsxs)("div",{className:"relative bg-[#0a0a1a] border-4 border-[#3a3a5a] rounded-lg p-3",style:{boxShadow:"0 0 40px rgba(42, 78, 138, 0.4), inset 0 0 20px rgba(0,0,0,0.5)",imageRendering:"pixelated"},children:[n.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 w-24 h-4 bg-gradient-to-b from-[#8B6914] to-[#6B4F12] border-2 border-[#5a4010] rounded-b-md"}),n.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-8 h-4 bg-gradient-to-b from-[#A0782C] to-[#8B6914] border-x-2 border-[#5a4010]"}),n.jsx("canvas",{ref:t,width:520,height:520,className:"cursor-grab active:cursor-grabbing",style:{width:520,height:520,imageRendering:"pixelated"},onPointerDown:m,onPointerMove:h,onPointerUp:f}),[...Array(12)].map((e,t)=>n.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-pulse",style:{left:`${10+80*Math.random()}%`,top:`${10+80*Math.random()}%`,animationDelay:`${.3*t}s`,opacity:.3+.5*Math.random()}},t))]}),n.jsx("div",{className:"mt-8 flex flex-wrap justify-center gap-4",children:C.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-2 bg-black/50 px-3 py-1.5 rounded border border-[#3a3a5a]",children:[n.jsx("div",{className:"w-3 h-3 bg-[#ff4455] border border-white"}),n.jsx("span",{className:"font-pixel text-white text-xs",children:e.label}),e.note&&(0,n.jsxs)("span",{className:"font-pixel text-[#FFD700] text-[10px]",children:["— ",e.note]})]},t))}),n.jsx("div",{className:"mt-3 text-center",children:n.jsx("span",{className:"font-pixel text-white/50 text-[10px]",children:"拖拽旋转地球　|　按 E / Esc 关闭"})})]})})}function R(){let e=b(e=>e.activeModal);if(!e)return null;switch(e){case"book":return n.jsx(k,{});case"letter":return n.jsx(M,{});case"calendar":return n.jsx(S,{});case"video":return n.jsx(P,{});case"gift":return n.jsx(E,{});case"photo":return n.jsx(F,{});case"map":return n.jsx($,{});case"table":return n.jsx(A,{});default:return null}}function I(){let e=(0,r.useRef)(null),t=b(e=>e.isMusicPlaying),s=b(e=>e.toggleMusic),a=b(e=>e.nearbyObject);return(0,n.jsxs)(n.Fragment,{children:[n.jsx("audio",{ref:e,src:w,loop:!0,preload:"auto"}),(0,n.jsxs)("div",{className:"text-center mb-4",children:[n.jsx("h1",{className:"font-pixel text-sdv-gold text-lg drop-shadow-lg",children:"\uD83D\uDC95 我们的小屋 \uD83D\uDC95"}),n.jsx("p",{className:"font-pixel text-sdv-cream text-xs mt-1 opacity-70",children:"— 情人节快乐 —"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mt-3 max-w-[960px] w-full px-2",children:[(0,n.jsxs)("div",{className:"font-pixel text-[10px] text-sdv-cream/70 space-y-0.5",children:[n.jsx("p",{children:"\uD83C\uDFAE WASD / 方向键 — 移动"}),n.jsx("p",{children:"\uD83D\uDD11 E — 互动"})]}),n.jsx("div",{className:"font-pixel text-xs text-sdv-gold min-w-[200px] text-center",children:a&&n.jsx("span",{className:"animate-bounce-soft inline-block",children:"✨ 按 E 查看 ✨"})}),n.jsx("button",{onClick:s,className:"font-pixel text-xs bg-sdv-dark text-sdv-cream px-3 py-1.5 rounded   border-2 border-sdv-brown hover:bg-sdv-brown transition-colors   active:translate-y-[1px]",children:t?"\uD83C\uDFB5 音乐 ON":"\uD83D\uDD07 音乐 OFF"})]})]})}let z=o()(async()=>{},{loadableGenerated:{modules:["app\\page.tsx -> @/components/GameCanvas"]},ssr:!1,loading:()=>n.jsx("div",{className:"flex items-center justify-center w-[960px] h-[704px] bg-sdv-dark border-4 border-sdv-brown rounded-lg",children:(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("p",{className:"font-pixel text-sdv-gold text-sm animate-sparkle",children:"加载中..."}),n.jsx("p",{className:"font-pixel text-sdv-cream text-xs mt-2 opacity-70",children:"正在布置小屋 \uD83C\uDFE0"})]})})});function T(){let[e,t]=(0,r.useState)(!0),[s,a]=(0,r.useState)([]);return(0,n.jsxs)("main",{className:"relative min-h-screen flex flex-col items-center justify-center bg-[#1a1a2e] p-4",children:[s.map((e,t)=>n.jsx("div",{className:"star",style:{left:`${e.x}%`,top:`${e.y}%`,"--delay":`${e.delay}s`,"--duration":`${e.duration}s`}},t)),e&&n.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#1a1a2e] cursor-pointer",onClick:()=>t(!1),children:(0,n.jsxs)("div",{className:"text-center animate-fade-in",children:[n.jsx("div",{className:"mb-6",children:n.jsx("span",{className:"text-6xl",children:"\uD83C\uDFE0"})}),n.jsx("h1",{className:"font-pixel text-sdv-gold text-xl mb-4 drop-shadow-lg",children:"\uD83D\uDC95 我们的小屋 \uD83D\uDC95"}),n.jsx("p",{className:"font-pixel text-sdv-cream text-xs mb-2 opacity-80",children:"— 情人节快乐 —"}),n.jsx("div",{className:"mt-8",children:n.jsx("p",{className:"font-pixel text-sdv-gold text-xs animate-bounce-soft",children:"✨ 点击任意位置开始 ✨"})}),(0,n.jsxs)("div",{className:"mt-12 font-pixel text-[10px] text-sdv-cream/40 space-y-1",children:[n.jsx("p",{children:"\uD83C\uDFAE WASD / 方向键 移动角色"}),n.jsx("p",{children:"\uD83D\uDD11 靠近物体按 E 互动"}),n.jsx("p",{children:"\uD83D\uDCF8 探索房间，发现惊喜"})]})]})}),n.jsx(I,{}),n.jsx(z,{}),n.jsx(R,{})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>l});var a=s(9510);s(5023);let l={title:"\uD83D\uDC95 我们的小屋 — 纪念日快乐",description:"一个星露谷物语风格的纪念日互动小游戏",icons:{icon:"❤️"}};function n({children:e}){return(0,a.jsxs)("html",{lang:"zh-CN",children:[(0,a.jsxs)("head",{children:[a.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),a.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"})]}),a.jsx("body",{className:"bg-[#1a1a2e] min-h-screen overflow-hidden",children:e})]})}},5480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\Administrator\Desktop\214\src\app\page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[819],()=>s(4413));module.exports=a})();