"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_components_GameCanvas_tsx"],{

/***/ "(app-pages-browser)/./src/components/GameCanvas.tsx":
/*!***************************************!*\
  !*** ./src/components/GameCanvas.tsx ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ GameCanvas; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _game_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/game/constants */ \"(app-pages-browser)/./src/game/constants.ts\");\n/* harmony import */ var _game_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/game/store */ \"(app-pages-browser)/./src/game/store.ts\");\n/* harmony import */ var _game_collision__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/game/collision */ \"(app-pages-browser)/./src/game/collision.ts\");\n/* harmony import */ var _game_renderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/game/renderer */ \"(app-pages-browser)/./src/game/renderer.ts\");\n/* harmony import */ var _game_sprites__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/game/sprites */ \"(app-pages-browser)/./src/game/sprites.ts\");\n/* harmony import */ var _game_npc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/game/npc */ \"(app-pages-browser)/./src/game/npc.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n/**\r\n * üéÆ GameCanvas ‚Äî Ê†∏ÂøÉÊ∏∏ÊàèÁîªÂ∏É\r\n *\r\n * 1. Âä†ËΩΩËÉåÊôØÂõæ ‚Üí È¢ÑÊ∏≤ÊüìËÉåÊôØ\r\n * 2. Canvas Ê∏∏ÊàèÂæ™ÁéØ (requestAnimationFrame)\r\n * 3. WASD / ÊñπÂêëÈîÆÁßªÂä® + ÈÄêÊ†ºÁ¢∞ÊíûÊ£ÄÊµã\r\n * 4. E ÈîÆ‰∫íÂä®\r\n * 5. Ê∞õÂõ¥ÂÖâÁÖß\r\n * 6. NPC: ÈùôÊÄÅÁî∑Â≠© + Ëá™‰∏ªÊº´Ê∏∏Áå´Âí™ (Y-Sort Ê∏≤Êüì)\r\n */ \n\n\n\n\n\n\nfunction GameCanvas() {\n    _s();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const keysRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const animTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const resRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        background: null,\n        foreground: null,\n        foregroundRows: [],\n        frameOverlay: null,\n        playerSprite: null,\n        loaded: false\n    });\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // NPC refs (mutable, not React state ‚Äî updated every frame)\n    const manRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const catsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    /** Áà±ÂøÉÊ∞îÊ≥°Ââ©‰ΩôÂ∏ßÊï∞ (>0 Êó∂ÊòæÁ§∫) */ const heartTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const store = _game_store__WEBPACK_IMPORTED_MODULE_3__.useGameStore;\n    // ==================== Âä†ËΩΩËµÑÊ∫ê ====================\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        Promise.all([\n            (0,_game_sprites__WEBPACK_IMPORTED_MODULE_6__.loadAllResources)(_game_constants__WEBPACK_IMPORTED_MODULE_2__.MAP_COLS, _game_constants__WEBPACK_IMPORTED_MODULE_2__.MAP_ROWS, _game_constants__WEBPACK_IMPORTED_MODULE_2__.TILE_SIZE),\n            (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.createStaticMan)(),\n            (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.createCat)(\"bwcat\", \"/char/cat/bwcat.png\", 8, 7),\n            (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.createCat)(\"ocat\", \"/char/cat/ocat.png\", 18, 14)\n        ]).then((param)=>{\n            let [res, man, bwcat, ocat] = param;\n            resRef.current = res;\n            manRef.current = man;\n            catsRef.current = [\n                bwcat,\n                ocat\n            ];\n            setLoading(false);\n            console.log(\"‚úÖ ÊâÄÊúâËµÑÊ∫êÂä†ËΩΩÂÆåÊØï, ËÉåÊôØÂ∑≤È¢ÑÊ∏≤Êüì, NPC Â∑≤ÂàùÂßãÂåñ\");\n        });\n    }, []);\n    // ==================== ÈîÆÁõòÁõëÂê¨ ====================\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleKeyDown = (e)=>{\n            const key = e.key.toLowerCase();\n            keysRef.current.add(key);\n            if (key === \"e\" && !store.getState().activeModal) {\n                // ÂÖàÊ£ÄÊµãÊòØÂê¶Âú®Áî∑Â≠© NPC ÈôÑËøë ‚Üí Áà±ÂøÉ‰∫íÂä®\n                if (manRef.current && (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.isPlayerNearMan)(store.getState().playerX, store.getState().playerY, manRef.current)) {\n                    heartTimerRef.current = _game_npc__WEBPACK_IMPORTED_MODULE_7__.HEART_BUBBLE_DURATION;\n                } else {\n                    const nearby = (0,_game_collision__WEBPACK_IMPORTED_MODULE_4__.findNearbyInteractable)(store.getState().playerX, store.getState().playerY);\n                    if (nearby) {\n                        store.getState().openModal(nearby.type, nearby.id);\n                    }\n                }\n            }\n        };\n        const handleKeyUp = (e)=>{\n            keysRef.current.delete(e.key.toLowerCase());\n        };\n        window.addEventListener(\"keydown\", handleKeyDown);\n        window.addEventListener(\"keyup\", handleKeyUp);\n        return ()=>{\n            window.removeEventListener(\"keydown\", handleKeyDown);\n            window.removeEventListener(\"keyup\", handleKeyUp);\n        };\n    }, [\n        store\n    ]);\n    // ==================== Ê∏∏Êàè‰∏ªÂæ™ÁéØ ====================\n    const gameLoop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) return;\n        const state = store.getState();\n        const now = performance.now();\n        // ---- Êõ¥Êñ∞ÈÄªËæë ----\n        if (!state.activeModal) {\n            let dx = 0;\n            let dy = 0;\n            const keys = keysRef.current;\n            if (keys.has(\"w\") || keys.has(\"arrowup\")) {\n                dy = -_game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SPEED;\n                store.getState().setDirection(_game_constants__WEBPACK_IMPORTED_MODULE_2__.Direction.UP);\n            }\n            if (keys.has(\"s\") || keys.has(\"arrowdown\")) {\n                dy = _game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SPEED;\n                store.getState().setDirection(_game_constants__WEBPACK_IMPORTED_MODULE_2__.Direction.DOWN);\n            }\n            if (keys.has(\"a\") || keys.has(\"arrowleft\")) {\n                dx = -_game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SPEED;\n                store.getState().setDirection(_game_constants__WEBPACK_IMPORTED_MODULE_2__.Direction.LEFT);\n            }\n            if (keys.has(\"d\") || keys.has(\"arrowright\")) {\n                dx = _game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SPEED;\n                store.getState().setDirection(_game_constants__WEBPACK_IMPORTED_MODULE_2__.Direction.RIGHT);\n            }\n            if (dx !== 0 && dy !== 0) {\n                dx *= 0.707;\n                dy *= 0.707;\n            }\n            const moving = dx !== 0 || dy !== 0;\n            store.getState().setIsMoving(moving);\n            if (moving) {\n                const newX = state.playerX + dx;\n                const newY = state.playerY + dy;\n                let finalX = state.playerX;\n                let finalY = state.playerY;\n                if (!(0,_game_collision__WEBPACK_IMPORTED_MODULE_4__.checkCollision)(newX, state.playerY)) finalX = newX;\n                if (!(0,_game_collision__WEBPACK_IMPORTED_MODULE_4__.checkCollision)(finalX, newY)) finalY = newY;\n                store.getState().movePlayer(finalX, finalY);\n                animTimerRef.current++;\n                if (animTimerRef.current % 8 === 0) {\n                    store.getState().nextAnimFrame();\n                }\n            }\n            const nearby = (0,_game_collision__WEBPACK_IMPORTED_MODULE_4__.findNearbyInteractable)(store.getState().playerX, store.getState().playerY);\n            var _nearby_id;\n            store.getState().setNearbyObject((_nearby_id = nearby === null || nearby === void 0 ? void 0 : nearby.id) !== null && _nearby_id !== void 0 ? _nearby_id : null);\n        }\n        // ---- Êõ¥Êñ∞Áà±ÂøÉÊ∞îÊ≥° ----\n        if (heartTimerRef.current > 0) heartTimerRef.current--;\n        // ---- Êõ¥Êñ∞Áå´ AI ----\n        for (const cat of catsRef.current){\n            (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.updateCat)(cat);\n        }\n        // ---- Ê∏≤Êüì ----\n        const s = store.getState();\n        const res = resRef.current;\n        ctx.clearRect(0, 0, _game_constants__WEBPACK_IMPORTED_MODULE_2__.CANVAS_WIDTH, _game_constants__WEBPACK_IMPORTED_MODULE_2__.CANVAS_HEIGHT);\n        ctx.imageSmoothingEnabled = false;\n        // 1. È¢ÑÊ∏≤ÊüìËÉåÊôØ (‰∏ÄÊ¨° drawImage)\n        (0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderBackground)(ctx, res.background);\n        // 2. ÂèØ‰∫íÂä®Áâ©‰ΩìÈ´ò‰∫Æ\n        (0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderInteractableHighlights)(ctx, s.nearbyObject, now);\n        // 3. ÊûÑÂª∫ Y-Sort ÂÆû‰ΩìÂàóË°®\n        const entities = [];\n        // Áé©ÂÆ∂ÂÆû‰Ωì\n        entities.push({\n            footY: s.playerY + _game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SIZE,\n            render: (c)=>(0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderPlayer)(c, s.playerX, s.playerY, s.direction, s.animFrame, s.isMoving, res.playerSprite)\n        });\n        // Áî∑Â≠© NPC\n        if (manRef.current) {\n            const man = manRef.current;\n            entities.push({\n                footY: (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.getManFootY)(man),\n                render: (c)=>(0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.renderManNPC)(c, man)\n            });\n        }\n        // Áå´Âí™\n        for (const cat of catsRef.current){\n            entities.push({\n                footY: (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.getCatFootY)(cat),\n                render: (c)=>(0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.renderCat)(c, cat)\n            });\n        }\n        // Y-Sort Âú∫ÊôØ: ÂâçÊôØË°å‰∏éÊâÄÊúâÂÆû‰ΩìÊåâ Y ÂùêÊ†á‰∫§ÈîôÁªòÂà∂\n        (0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderSceneYSorted)(ctx, res.foregroundRows, entities);\n        // 3.5 ÊàøÈó¥Ê°ÜÊû∂Ë¶ÜÁõñÂ±Ç (ÂßãÁªàÈÅÆÊå°Áé©ÂÆ∂)\n        (0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderFrameOverlay)(ctx, res.frameOverlay);\n        // 4. ‰∫íÂä®ÊèêÁ§∫\n        if (s.nearbyObject && !s.activeModal) {\n            const obj = _game_constants__WEBPACK_IMPORTED_MODULE_2__.INTERACTABLES.find((o)=>o.id === s.nearbyObject);\n            if (obj) {\n                (0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderPromptBubble)(ctx, s.playerX + _game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SIZE / 2, s.playerY - 10, obj.label, now);\n            }\n        }\n        // 4.5 Èù†ËøëÁî∑Â≠© NPC Êó∂‰πüÊòæÁ§∫ÊèêÁ§∫\n        if (manRef.current && heartTimerRef.current <= 0 && !s.activeModal && (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.isPlayerNearMan)(s.playerX, s.playerY, manRef.current)) {\n            (0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderPromptBubble)(ctx, s.playerX + _game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SIZE / 2, s.playerY - 10, \"‰∫íÂä®\", now);\n        }\n        // 4.6 Áà±ÂøÉÊ∞îÊ≥° (‰∏§‰∫∫ÂêåÊó∂ÂÜíÂá∫)\n        if (heartTimerRef.current > 0 && manRef.current) {\n            const progress = 1 - heartTimerRef.current / _game_npc__WEBPACK_IMPORTED_MODULE_7__.HEART_BUBBLE_DURATION;\n            // Áé©ÂÆ∂Â§¥È°∂\n            const playerHeadX = s.playerX + _game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SIZE / 2;\n            const playerHeadY = s.playerY - 6;\n            (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.renderHeartBubble)(ctx, playerHeadX, playerHeadY, now, progress);\n            // Áî∑Â≠©Â§¥È°∂\n            const manHeadX = manRef.current.x + _game_constants__WEBPACK_IMPORTED_MODULE_2__.PLAYER_SIZE / 2;\n            const manHeadY = manRef.current.y - 6;\n            (0,_game_npc__WEBPACK_IMPORTED_MODULE_7__.renderHeartBubble)(ctx, manHeadX, manHeadY, now, progress);\n        }\n        // 5. Ê∞õÂõ¥ÂÖâ\n        (0,_game_renderer__WEBPACK_IMPORTED_MODULE_5__.renderAmbientLight)(ctx, now);\n        requestAnimationFrame(gameLoop);\n    }, [\n        store\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const frameId = requestAnimationFrame(gameLoop);\n        return ()=>cancelAnimationFrame(frameId);\n    }, [\n        gameLoop\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                ref: canvasRef,\n                width: _game_constants__WEBPACK_IMPORTED_MODULE_2__.CANVAS_WIDTH,\n                height: _game_constants__WEBPACK_IMPORTED_MODULE_2__.CANVAS_HEIGHT,\n                className: \"block border-4 border-sdv-dark rounded-lg shadow-2xl\",\n                style: {\n                    imageRendering: \"pixelated\",\n                    maxWidth: \"100%\",\n                    height: \"auto\"\n                }\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\214\\\\src\\\\components\\\\GameCanvas.tsx\",\n                lineNumber: 261,\n                columnNumber: 7\n            }, this),\n            loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-sdv-dark/80 rounded-lg\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"font-pixel text-sdv-gold text-sm animate-sparkle\",\n                        children: \"\\uD83D\\uDDBCÔ∏è Âä†ËΩΩÁ≤æÁÅµÂõæ...\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\214\\\\src\\\\components\\\\GameCanvas.tsx\",\n                        lineNumber: 275,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\214\\\\src\\\\components\\\\GameCanvas.tsx\",\n                    lineNumber: 274,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\214\\\\src\\\\components\\\\GameCanvas.tsx\",\n                lineNumber: 273,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\214\\\\src\\\\components\\\\GameCanvas.tsx\",\n        lineNumber: 260,\n        columnNumber: 5\n    }, this);\n}\n_s(GameCanvas, \"tq4PQcxxxTNFl6z49u7Cfhykumw=\");\n_c = GameCanvas;\nvar _c;\n$RefreshReg$(_c, \"GameCanvas\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0dhbWVDYW52YXMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7Q0FTQyxHQUN1RTtBQVc5QztBQUNrQjtBQUM4QjtBQVNqRDtBQUUwQztBQWMvQztBQUVMLFNBQVNtQzs7SUFDdEIsTUFBTUMsWUFBWW5DLDZDQUFNQSxDQUFvQjtJQUM1QyxNQUFNb0MsVUFBVXBDLDZDQUFNQSxDQUFjLElBQUlxQztJQUN4QyxNQUFNQyxlQUFldEMsNkNBQU1BLENBQUM7SUFDNUIsTUFBTXVDLFNBQVN2Qyw2Q0FBTUEsQ0FBa0I7UUFDckN3QyxZQUFZO1FBQU1DLFlBQVk7UUFBTUMsZ0JBQWdCLEVBQUU7UUFBRUMsY0FBYztRQUFNQyxjQUFjO1FBQU1DLFFBQVE7SUFDMUc7SUFDQSxNQUFNLENBQUNDLFNBQVNDLFdBQVcsR0FBRzVDLCtDQUFRQSxDQUFDO0lBRXZDLDREQUE0RDtJQUM1RCxNQUFNNkMsU0FBU2hELDZDQUFNQSxDQUFtQjtJQUN4QyxNQUFNaUQsVUFBVWpELDZDQUFNQSxDQUFXLEVBQUU7SUFDbkMsc0JBQXNCLEdBQ3RCLE1BQU1rRCxnQkFBZ0JsRCw2Q0FBTUEsQ0FBQztJQUU3QixNQUFNbUQsUUFBUXRDLHFEQUFZQTtJQUUxQixpREFBaUQ7SUFDakRaLGdEQUFTQSxDQUFDO1FBQ1JtRCxRQUFRQyxHQUFHLENBQUM7WUFDVjlCLCtEQUFnQkEsQ0FBQ2pCLHFEQUFRQSxFQUFFQyxxREFBUUEsRUFBRUMsc0RBQVNBO1lBQzlDZ0IsMERBQWVBO1lBQ2ZDLG9EQUFTQSxDQUFDLFNBQVMsdUJBQXVCLEdBQUc7WUFDN0NBLG9EQUFTQSxDQUFDLFFBQVEsc0JBQXNCLElBQUk7U0FDN0MsRUFBRTZCLElBQUksQ0FBQztnQkFBQyxDQUFDQyxLQUFLQyxLQUFLQyxPQUFPQyxLQUFLO1lBQzlCbkIsT0FBT29CLE9BQU8sR0FBR0o7WUFDakJQLE9BQU9XLE9BQU8sR0FBR0g7WUFD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QVc3RSxPQUFPVyxPQUFPLENBQUNtRSxDQUFDLEdBQUdySCx3REFBV0EsR0FBRztZQUNsRCxNQUFNc0gsV0FBVy9FLE9BQU9XLE9BQU8sQ0FBQ3FFLENBQUMsR0FBRztZQUNwQ2hHLDREQUFpQkEsQ0FBQ2tELEtBQUsyQyxVQUFVRSxVQUFVMUMsS0FBS3FDO1FBQ2xEO1FBRUEsU0FBUztRQUNUckcsa0VBQWtCQSxDQUFDNkQsS0FBS0c7UUFFeEI0QyxzQkFBc0JqRDtJQUN4QixHQUFHO1FBQUM3QjtLQUFNO0lBRVZsRCxnREFBU0EsQ0FBQztRQUNSLE1BQU1pSSxVQUFVRCxzQkFBc0JqRDtRQUN0QyxPQUFPLElBQU1tRCxxQkFBcUJEO0lBQ3BDLEdBQUc7UUFBQ2xEO0tBQVM7SUFFYixxQkFDRSw4REFBQ29EO1FBQUlDLFdBQVU7OzBCQUNiLDhEQUFDcEQ7Z0JBQ0NxRCxLQUFLbkc7Z0JBQ0xvRyxPQUFPbkkseURBQVlBO2dCQUNuQm9JLFFBQVFuSSwwREFBYUE7Z0JBQ3JCZ0ksV0FBVTtnQkFDVkksT0FBTztvQkFDTEMsZ0JBQWdCO29CQUNoQkMsVUFBVTtvQkFDVkgsUUFBUTtnQkFDVjs7Ozs7O1lBRUQxRix5QkFDQyw4REFBQ3NGO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDRDtvQkFBSUMsV0FBVTs4QkFDYiw0RUFBQ087d0JBQUVQLFdBQVU7a0NBQW1EOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUTVFO0dBdk93Qm5HO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb21wb25lbnRzL0dhbWVDYW52YXMudHN4P2IzNzMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG4vKipcclxuICog8J+OriBHYW1lQ2FudmFzIOKAlCDmoLjlv4PmuLjmiI/nlLvluINcclxuICpcclxuICogMS4g5Yqg6L296IOM5pmv5Zu+IOKGkiDpooTmuLLmn5Pog4zmma9cclxuICogMi4gQ2FudmFzIOa4uOaIj+W+queOryAocmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxyXG4gKiAzLiBXQVNEIC8g5pa55ZCR6ZSu56e75YqoICsg6YCQ5qC856Kw5pKe5qOA5rWLXHJcbiAqIDQuIEUg6ZSu5LqS5YqoXHJcbiAqIDUuIOawm+WbtOWFieeFp1xyXG4gKiA2LiBOUEM6IOmdmeaAgeeUt+WtqSArIOiHquS4u+a8q+a4uOeMq+WSqiAoWS1Tb3J0IOa4suafkylcclxuICovXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge1xyXG4gIENBTlZBU19XSURUSCxcclxuICBDQU5WQVNfSEVJR0hULFxyXG4gIE1BUF9DT0xTLFxyXG4gIE1BUF9ST1dTLFxyXG4gIFRJTEVfU0laRSxcclxuICBQTEFZRVJfU0laRSxcclxuICBQTEFZRVJfU1BFRUQsXHJcbiAgRGlyZWN0aW9uLFxyXG4gIElOVEVSQUNUQUJMRVMsXHJcbn0gZnJvbSAnQC9nYW1lL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHVzZUdhbWVTdG9yZSB9IGZyb20gJ0AvZ2FtZS9zdG9yZSc7XHJcbmltcG9ydCB7IGNoZWNrQ29sbGlzaW9uLCBmaW5kTmVhcmJ5SW50ZXJhY3RhYmxlIH0gZnJvbSAnQC9nYW1lL2NvbGxpc2lvbic7XHJcbmltcG9ydCB7XHJcbiAgcmVuZGVyQmFja2dyb3VuZCxcclxuICByZW5kZXJJbnRlcmFjdGFibGVIaWdobGlnaHRzLFxyXG4gIHJlbmRlclNjZW5lWVNvcnRlZCxcclxuICByZW5kZXJGcmFtZU92ZXJsYXksXHJcbiAgcmVuZGVyUHJvbXB0QnViYmxlLFxyXG4gIHJlbmRlckFtYmllbnRMaWdodCxcclxuICByZW5kZXJQbGF5ZXIsXHJcbn0gZnJvbSAnQC9nYW1lL3JlbmRlcmVyJztcclxuaW1wb3J0IHR5cGUgeyBZU29ydEVudGl0eSB9IGZyb20gJ0AvZ2FtZS9yZW5kZXJlcic7XHJcbmltcG9ydCB7IGxvYWRBbGxSZXNvdXJjZXMsIExvYWRlZFJlc291cmNlcyB9IGZyb20gJ0AvZ2FtZS9zcHJpdGVzJztcclxuaW1wb3J0IHtcclxuICBjcmVhdGVTdGF0aWNNYW4sXHJcbiAgY3JlYXRlQ2F0LFxyXG4gIHVwZGF0ZUNhdCxcclxuICByZW5kZXJNYW5OUEMsXHJcbiAgcmVuZGVyQ2F0LFxyXG4gIGdldE1hbkZvb3RZLFxyXG4gIGdldENhdEZvb3RZLFxyXG4gIGlzUGxheWVyTmVhck1hbixcclxuICByZW5kZXJIZWFydEJ1YmJsZSxcclxuICBIRUFSVF9CVUJCTEVfRFVSQVRJT04sXHJcbiAgU3RhdGljTlBDLFxyXG4gIENhdE5QQyxcclxufSBmcm9tICdAL2dhbWUvbnBjJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdhbWVDYW52YXMoKSB7XHJcbiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmPEhUTUxDYW52YXNFbGVtZW50PihudWxsKTtcclxuICBjb25zdCBrZXlzUmVmID0gdXNlUmVmPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xyXG4gIGNvbnN0IGFuaW1UaW1lclJlZiA9IHVzZVJlZigwKTtcclxuICBjb25zdCByZXNSZWYgPSB1c2VSZWY8TG9hZGVkUmVzb3VyY2VzPih7XHJcbiAgICBiYWNrZ3JvdW5kOiBudWxsLCBmb3JlZ3JvdW5kOiBudWxsLCBmb3JlZ3JvdW5kUm93czogW10sIGZyYW1lT3ZlcmxheTogbnVsbCwgcGxheWVyU3ByaXRlOiBudWxsLCBsb2FkZWQ6IGZhbHNlLFxyXG4gIH0pO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG5cclxuICAvLyBOUEMgcmVmcyAobXV0YWJsZSwgbm90IFJlYWN0IHN0YXRlIOKAlCB1cGRhdGVkIGV2ZXJ5IGZyYW1lKVxyXG4gIGNvbnN0IG1hblJlZiA9IHVzZVJlZjxTdGF0aWNOUEMgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBjYXRzUmVmID0gdXNlUmVmPENhdE5QQ1tdPihbXSk7XHJcbiAgLyoqIOeIseW/g+awlOazoeWJqeS9meW4p+aVsCAoPjAg5pe25pi+56S6KSAqL1xyXG4gIGNvbnN0IGhlYXJ0VGltZXJSZWYgPSB1c2VSZWYoMCk7XHJcblxyXG4gIGNvbnN0IHN0b3JlID0gdXNlR2FtZVN0b3JlO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDliqDovb3otYTmupAgPT09PT09PT09PT09PT09PT09PT1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICBsb2FkQWxsUmVzb3VyY2VzKE1BUF9DT0xTLCBNQVBfUk9XUywgVElMRV9TSVpFKSxcclxuICAgICAgY3JlYXRlU3RhdGljTWFuKCksXHJcbiAgICAgIGNyZWF0ZUNhdCgnYndjYXQnLCAnL2NoYXIvY2F0L2J3Y2F0LnBuZycsIDgsIDcpLFxyXG4gICAgICBjcmVhdGVDYXQoJ29jYXQnLCAnL2NoYXIvY2F0L29jYXQucG5nJywgMTgsIDE0KSxcclxuICAgIF0pLnRoZW4oKFtyZXMsIG1hbiwgYndjYXQsIG9jYXRdKSA9PiB7XHJcbiAgICAgIHJlc1JlZi5jdXJyZW50ID0gcmVzO1xyXG4gICAgICBtYW5SZWYuY3VycmVudCA9IG1hbjtcclxuICAgICAgY2F0c1JlZi5jdXJyZW50ID0gW2J3Y2F0LCBvY2F0XTtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg5omA5pyJ6LWE5rqQ5Yqg6L295a6M5q+VLCDog4zmma/lt7LpooTmuLLmn5MsIE5QQyDlt7LliJ3lp4vljJYnKTtcclxuICAgIH0pO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g6ZSu55uY55uR5ZCsID09PT09PT09PT09PT09PT09PT09XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBrZXlzUmVmLmN1cnJlbnQuYWRkKGtleSk7XHJcblxyXG4gICAgICBpZiAoa2V5ID09PSAnZScgJiYgIXN0b3JlLmdldFN0YXRlKCkuYWN0aXZlTW9kYWwpIHtcclxuICAgICAgICAvLyDlhYjmo4DmtYvmmK/lkKblnKjnlLflrakgTlBDIOmZhOi/kSDihpIg54ix5b+D5LqS5YqoXHJcbiAgICAgICAgaWYgKG1hblJlZi5jdXJyZW50ICYmIGlzUGxheWVyTmVhck1hbihzdG9yZS5nZXRTdGF0ZSgpLnBsYXllclgsIHN0b3JlLmdldFN0YXRlKCkucGxheWVyWSwgbWFuUmVmLmN1cnJlbnQpKSB7XHJcbiAgICAgICAgICBoZWFydFRpbWVyUmVmLmN1cnJlbnQgPSBIRUFSVF9CVUJCTEVfRFVSQVRJT047XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IG5lYXJieSA9IGZpbmROZWFyYnlJbnRlcmFjdGFibGUoXHJcbiAgICAgICAgICAgIHN0b3JlLmdldFN0YXRlKCkucGxheWVyWCxcclxuICAgICAgICAgICAgc3RvcmUuZ2V0U3RhdGUoKS5wbGF5ZXJZXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKG5lYXJieSkge1xyXG4gICAgICAgICAgICBzdG9yZS5nZXRTdGF0ZSgpLm9wZW5Nb2RhbChuZWFyYnkudHlwZSwgbmVhcmJ5LmlkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaGFuZGxlS2V5VXAgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICBrZXlzUmVmLmN1cnJlbnQuZGVsZXRlKGUua2V5LnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXApO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXApO1xyXG4gICAgfTtcclxuICB9LCBbc3RvcmVdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g5ri45oiP5Li75b6q546vID09PT09PT09PT09PT09PT09PT09XHJcbiAgY29uc3QgZ2FtZUxvb3AgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcclxuICAgIGlmICghY2FudmFzKSByZXR1cm47XHJcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGlmICghY3R4KSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgLy8gLS0tLSDmm7TmlrDpgLvovpEgLS0tLVxyXG4gICAgaWYgKCFzdGF0ZS5hY3RpdmVNb2RhbCkge1xyXG4gICAgICBsZXQgZHggPSAwO1xyXG4gICAgICBsZXQgZHkgPSAwO1xyXG4gICAgICBjb25zdCBrZXlzID0ga2V5c1JlZi5jdXJyZW50O1xyXG5cclxuICAgICAgaWYgKGtleXMuaGFzKCd3JykgfHwga2V5cy5oYXMoJ2Fycm93dXAnKSkgeyBkeSA9IC1QTEFZRVJfU1BFRUQ7IHN0b3JlLmdldFN0YXRlKCkuc2V0RGlyZWN0aW9uKERpcmVjdGlvbi5VUCk7IH1cclxuICAgICAgaWYgKGtleXMuaGFzKCdzJykgfHwga2V5cy5oYXMoJ2Fycm93ZG93bicpKSB7IGR5ID0gUExBWUVSX1NQRUVEOyBzdG9yZS5nZXRTdGF0ZSgpLnNldERpcmVjdGlvbihEaXJlY3Rpb24uRE9XTik7IH1cclxuICAgICAgaWYgKGtleXMuaGFzKCdhJykgfHwga2V5cy5oYXMoJ2Fycm93bGVmdCcpKSB7IGR4ID0gLVBMQVlFUl9TUEVFRDsgc3RvcmUuZ2V0U3RhdGUoKS5zZXREaXJlY3Rpb24oRGlyZWN0aW9uLkxFRlQpOyB9XHJcbiAgICAgIGlmIChrZXlzLmhhcygnZCcpIHx8IGtleXMuaGFzKCdhcnJvd3JpZ2h0JykpIHsgZHggPSBQTEFZRVJfU1BFRUQ7IHN0b3JlLmdldFN0YXRlKCkuc2V0RGlyZWN0aW9uKERpcmVjdGlvbi5SSUdIVCk7IH1cclxuXHJcbiAgICAgIGlmIChkeCAhPT0gMCAmJiBkeSAhPT0gMCkgeyBkeCAqPSAwLjcwNzsgZHkgKj0gMC43MDc7IH1cclxuXHJcbiAgICAgIGNvbnN0IG1vdmluZyA9IGR4ICE9PSAwIHx8IGR5ICE9PSAwO1xyXG4gICAgICBzdG9yZS5nZXRTdGF0ZSgpLnNldElzTW92aW5nKG1vdmluZyk7XHJcblxyXG4gICAgICBpZiAobW92aW5nKSB7XHJcbiAgICAgICAgY29uc3QgbmV3WCA9IHN0YXRlLnBsYXllclggKyBkeDtcclxuICAgICAgICBjb25zdCBuZXdZID0gc3RhdGUucGxheWVyWSArIGR5O1xyXG4gICAgICAgIGxldCBmaW5hbFggPSBzdGF0ZS5wbGF5ZXJYO1xyXG4gICAgICAgIGxldCBmaW5hbFkgPSBzdGF0ZS5wbGF5ZXJZO1xyXG5cclxuICAgICAgICBpZiAoIWNoZWNrQ29sbGlzaW9uKG5ld1gsIHN0YXRlLnBsYXllclkpKSBmaW5hbFggPSBuZXdYO1xyXG4gICAgICAgIGlmICghY2hlY2tDb2xsaXNpb24oZmluYWxYLCBuZXdZKSkgZmluYWxZID0gbmV3WTtcclxuXHJcbiAgICAgICAgc3RvcmUuZ2V0U3RhdGUoKS5tb3ZlUGxheWVyKGZpbmFsWCwgZmluYWxZKTtcclxuXHJcbiAgICAgICAgYW5pbVRpbWVyUmVmLmN1cnJlbnQrKztcclxuICAgICAgICBpZiAoYW5pbVRpbWVyUmVmLmN1cnJlbnQgJSA4ID09PSAwKSB7XHJcbiAgICAgICAgICBzdG9yZS5nZXRTdGF0ZSgpLm5leHRBbmltRnJhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5lYXJieSA9IGZpbmROZWFyYnlJbnRlcmFjdGFibGUoXHJcbiAgICAgICAgc3RvcmUuZ2V0U3RhdGUoKS5wbGF5ZXJYLFxyXG4gICAgICAgIHN0b3JlLmdldFN0YXRlKCkucGxheWVyWVxyXG4gICAgICApO1xyXG4gICAgICBzdG9yZS5nZXRTdGF0ZSgpLnNldE5lYXJieU9iamVjdChuZWFyYnk/LmlkID8/IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0g5pu05paw54ix5b+D5rCU5rOhIC0tLS1cclxuICAgIGlmIChoZWFydFRpbWVyUmVmLmN1cnJlbnQgPiAwKSBoZWFydFRpbWVyUmVmLmN1cnJlbnQtLTtcclxuXHJcbiAgICAvLyAtLS0tIOabtOaWsOeMqyBBSSAtLS0tXHJcbiAgICBmb3IgKGNvbnN0IGNhdCBvZiBjYXRzUmVmLmN1cnJlbnQpIHtcclxuICAgICAgdXBkYXRlQ2F0KGNhdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLSDmuLLmn5MgLS0tLVxyXG4gICAgY29uc3QgcyA9IHN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICBjb25zdCByZXMgPSByZXNSZWYuY3VycmVudDtcclxuXHJcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIENBTlZBU19XSURUSCwgQ0FOVkFTX0hFSUdIVCk7XHJcbiAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgLy8gMS4g6aKE5riy5p+T6IOM5pmvICjkuIDmrKEgZHJhd0ltYWdlKVxyXG4gICAgcmVuZGVyQmFja2dyb3VuZChjdHgsIHJlcy5iYWNrZ3JvdW5kKTtcclxuXHJcbiAgICAvLyAyLiDlj6/kupLliqjniankvZPpq5jkuq5cclxuICAgIHJlbmRlckludGVyYWN0YWJsZUhpZ2hsaWdodHMoY3R4LCBzLm5lYXJieU9iamVjdCwgbm93KTtcclxuXHJcbiAgICAvLyAzLiDmnoTlu7ogWS1Tb3J0IOWunuS9k+WIl+ihqFxyXG4gICAgY29uc3QgZW50aXRpZXM6IFlTb3J0RW50aXR5W10gPSBbXTtcclxuXHJcbiAgICAvLyDnjqnlrrblrp7kvZNcclxuICAgIGVudGl0aWVzLnB1c2goe1xyXG4gICAgICBmb290WTogcy5wbGF5ZXJZICsgUExBWUVSX1NJWkUsXHJcbiAgICAgIHJlbmRlcjogKGMpID0+IHJlbmRlclBsYXllcihjLCBzLnBsYXllclgsIHMucGxheWVyWSwgcy5kaXJlY3Rpb24sIHMuYW5pbUZyYW1lLCBzLmlzTW92aW5nLCByZXMucGxheWVyU3ByaXRlKSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOeUt+WtqSBOUENcclxuICAgIGlmIChtYW5SZWYuY3VycmVudCkge1xyXG4gICAgICBjb25zdCBtYW4gPSBtYW5SZWYuY3VycmVudDtcclxuICAgICAgZW50aXRpZXMucHVzaCh7XHJcbiAgICAgICAgZm9vdFk6IGdldE1hbkZvb3RZKG1hbiksXHJcbiAgICAgICAgcmVuZGVyOiAoYykgPT4gcmVuZGVyTWFuTlBDKGMsIG1hbiksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOeMq+WSqlxyXG4gICAgZm9yIChjb25zdCBjYXQgb2YgY2F0c1JlZi5jdXJyZW50KSB7XHJcbiAgICAgIGVudGl0aWVzLnB1c2goe1xyXG4gICAgICAgIGZvb3RZOiBnZXRDYXRGb290WShjYXQpLFxyXG4gICAgICAgIHJlbmRlcjogKGMpID0+IHJlbmRlckNhdChjLCBjYXQpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBZLVNvcnQg5Zy65pmvOiDliY3mma/ooYzkuI7miYDmnInlrp7kvZPmjIkgWSDlnZDmoIfkuqTplJnnu5jliLZcclxuICAgIHJlbmRlclNjZW5lWVNvcnRlZChjdHgsIHJlcy5mb3JlZ3JvdW5kUm93cywgZW50aXRpZXMpO1xyXG5cclxuICAgIC8vIDMuNSDmiL/pl7TmoYbmnrbopobnm5blsYIgKOWni+e7iOmBruaMoeeOqeWutilcclxuICAgIHJlbmRlckZyYW1lT3ZlcmxheShjdHgsIHJlcy5mcmFtZU92ZXJsYXkpO1xyXG5cclxuICAgIC8vIDQuIOS6kuWKqOaPkOekulxyXG4gICAgaWYgKHMubmVhcmJ5T2JqZWN0ICYmICFzLmFjdGl2ZU1vZGFsKSB7XHJcbiAgICAgIGNvbnN0IG9iaiA9IElOVEVSQUNUQUJMRVMuZmluZCgobykgPT4gby5pZCA9PT0gcy5uZWFyYnlPYmplY3QpO1xyXG4gICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgcmVuZGVyUHJvbXB0QnViYmxlKGN0eCwgcy5wbGF5ZXJYICsgUExBWUVSX1NJWkUgLyAyLCBzLnBsYXllclkgLSAxMCwgb2JqLmxhYmVsLCBub3cpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNC41IOmdoOi/keeUt+WtqSBOUEMg5pe25Lmf5pi+56S65o+Q56S6XHJcbiAgICBpZiAobWFuUmVmLmN1cnJlbnQgJiYgaGVhcnRUaW1lclJlZi5jdXJyZW50IDw9IDAgJiYgIXMuYWN0aXZlTW9kYWwgJiYgaXNQbGF5ZXJOZWFyTWFuKHMucGxheWVyWCwgcy5wbGF5ZXJZLCBtYW5SZWYuY3VycmVudCkpIHtcclxuICAgICAgcmVuZGVyUHJvbXB0QnViYmxlKGN0eCwgcy5wbGF5ZXJYICsgUExBWUVSX1NJWkUgLyAyLCBzLnBsYXllclkgLSAxMCwgJ+S6kuWKqCcsIG5vdyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNC42IOeIseW/g+awlOazoSAo5Lik5Lq65ZCM5pe25YaS5Ye6KVxyXG4gICAgaWYgKGhlYXJ0VGltZXJSZWYuY3VycmVudCA+IDAgJiYgbWFuUmVmLmN1cnJlbnQpIHtcclxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSAxIC0gaGVhcnRUaW1lclJlZi5jdXJyZW50IC8gSEVBUlRfQlVCQkxFX0RVUkFUSU9OO1xyXG4gICAgICAvLyDnjqnlrrblpLTpobZcclxuICAgICAgY29uc3QgcGxheWVySGVhZFggPSBzLnBsYXllclggKyBQTEFZRVJfU0laRSAvIDI7XHJcbiAgICAgIGNvbnN0IHBsYXllckhlYWRZID0gcy5wbGF5ZXJZIC0gNjtcclxuICAgICAgcmVuZGVySGVhcnRCdWJibGUoY3R4LCBwbGF5ZXJIZWFkWCwgcGxheWVySGVhZFksIG5vdywgcHJvZ3Jlc3MpO1xyXG4gICAgICAvLyDnlLflranlpLTpobZcclxuICAgICAgY29uc3QgbWFuSGVhZFggPSBtYW5SZWYuY3VycmVudC54ICsgUExBWUVSX1NJWkUgLyAyO1xyXG4gICAgICBjb25zdCBtYW5IZWFkWSA9IG1hblJlZi5jdXJyZW50LnkgLSA2O1xyXG4gICAgICByZW5kZXJIZWFydEJ1YmJsZShjdHgsIG1hbkhlYWRYLCBtYW5IZWFkWSwgbm93LCBwcm9ncmVzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNS4g5rCb5Zu05YWJXHJcbiAgICByZW5kZXJBbWJpZW50TGlnaHQoY3R4LCBub3cpO1xyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbiAgfSwgW3N0b3JlXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBmcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTtcclxuICAgIHJldHVybiAoKSA9PiBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZUlkKTtcclxuICB9LCBbZ2FtZUxvb3BdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cclxuICAgICAgPGNhbnZhc1xyXG4gICAgICAgIHJlZj17Y2FudmFzUmVmfVxyXG4gICAgICAgIHdpZHRoPXtDQU5WQVNfV0lEVEh9XHJcbiAgICAgICAgaGVpZ2h0PXtDQU5WQVNfSEVJR0hUfVxyXG4gICAgICAgIGNsYXNzTmFtZT1cImJsb2NrIGJvcmRlci00IGJvcmRlci1zZHYtZGFyayByb3VuZGVkLWxnIHNoYWRvdy0yeGxcIlxyXG4gICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICBpbWFnZVJlbmRlcmluZzogJ3BpeGVsYXRlZCcsXHJcbiAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgaGVpZ2h0OiAnYXV0bycsXHJcbiAgICAgICAgfX1cclxuICAgICAgLz5cclxuICAgICAge2xvYWRpbmcgJiYgKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1zZHYtZGFyay84MCByb3VuZGVkLWxnXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtcGl4ZWwgdGV4dC1zZHYtZ29sZCB0ZXh0LXNtIGFuaW1hdGUtc3BhcmtsZVwiPlxyXG4gICAgICAgICAgICAgIPCflrzvuI8g5Yqg6L2957K+54G15Zu+Li4uXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZVN0YXRlIiwiQ0FOVkFTX1dJRFRIIiwiQ0FOVkFTX0hFSUdIVCIsIk1BUF9DT0xTIiwiTUFQX1JPV1MiLCJUSUxFX1NJWkUiLCJQTEFZRVJfU0laRSIsIlBMQVlFUl9TUEVFRCIsIkRpcmVjdGlvbiIsIklOVEVSQUNUQUJMRVMiLCJ1c2VHYW1lU3RvcmUiLCJjaGVja0NvbGxpc2lvbiIsImZpbmROZWFyYnlJbnRlcmFjdGFibGUiLCJyZW5kZXJCYWNrZ3JvdW5kIiwicmVuZGVySW50ZXJhY3RhYmxlSGlnaGxpZ2h0cyIsInJlbmRlclNjZW5lWVNvcnRlZCIsInJlbmRlckZyYW1lT3ZlcmxheSIsInJlbmRlclByb21wdEJ1YmJsZSIsInJlbmRlckFtYmllbnRMaWdodCIsInJlbmRlclBsYXllciIsImxvYWRBbGxSZXNvdXJjZXMiLCJjcmVhdGVTdGF0aWNNYW4iLCJjcmVhdGVDYXQiLCJ1cGRhdGVDYXQiLCJyZW5kZXJNYW5OUEMiLCJyZW5kZXJDYXQiLCJnZXRNYW5Gb290WSIsImdldENhdEZvb3RZIiwiaXNQbGF5ZXJOZWFyTWFuIiwicmVuZGVySGVhcnRCdWJibGUiLCJIRUFSVF9CVUJCTEVfRFVSQVRJT04iLCJHYW1lQ2FudmFzIiwiY2FudmFzUmVmIiwia2V5c1JlZiIsIlNldCIsImFuaW1UaW1lclJlZiIsInJlc1JlZiIsImJhY2tncm91bmQiLCJmb3JlZ3JvdW5kIiwiZm9yZWdyb3VuZFJvd3MiLCJmcmFtZU92ZXJsYXkiLCJwbGF5ZXJTcHJpdGUiLCJsb2FkZWQiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsIm1hblJlZiIsImNhdHNSZWYiLCJoZWFydFRpbWVyUmVmIiwic3RvcmUiLCJQcm9taXNlIiwiYWxsIiwidGhlbiIsInJlcyIsIm1hbiIsImJ3Y2F0Iiwib2NhdCIsImN1cnJlbnQiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlS2V5RG93biIsImUiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsImFkZCIsImdldFN0YXRlIiwiYWN0aXZlTW9kYWwiLCJwbGF5ZXJYIiwicGxheWVyWSIsIm5lYXJieSIsIm9wZW5Nb2RhbCIsInR5cGUiLCJpZCIsImhhbmRsZUtleVVwIiwiZGVsZXRlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnYW1lTG9vcCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJzdGF0ZSIsIm5vdyIsInBlcmZvcm1hbmNlIiwiZHgiLCJkeSIsImtleXMiLCJoYXMiLCJzZXREaXJlY3Rpb24iLCJVUCIsIkRPV04iLCJMRUZUIiwiUklHSFQiLCJtb3ZpbmciLCJzZXRJc01vdmluZyIsIm5ld1giLCJuZXdZIiwiZmluYWxYIiwiZmluYWxZIiwibW92ZVBsYXllciIsIm5leHRBbmltRnJhbWUiLCJzZXROZWFyYnlPYmplY3QiLCJjYXQiLCJzIiwiY2xlYXJSZWN0IiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibmVhcmJ5T2JqZWN0IiwiZW50aXRpZXMiLCJwdXNoIiwiZm9vdFkiLCJyZW5kZXIiLCJjIiwiZGlyZWN0aW9uIiwiYW5pbUZyYW1lIiwiaXNNb3ZpbmciLCJvYmoiLCJmaW5kIiwibyIsImxhYmVsIiwicHJvZ3Jlc3MiLCJwbGF5ZXJIZWFkWCIsInBsYXllckhlYWRZIiwibWFuSGVhZFgiLCJ4IiwibWFuSGVhZFkiLCJ5IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZnJhbWVJZCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiZGl2IiwiY2xhc3NOYW1lIiwicmVmIiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsImltYWdlUmVuZGVyaW5nIiwibWF4V2lkdGgiLCJwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/GameCanvas.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/game/collision.ts":
/*!*******************************!*\
  !*** ./src/game/collision.ts ***!
  \*******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkCollision: function() { return /* binding */ checkCollision; },\n/* harmony export */   findNearbyInteractable: function() { return /* binding */ findNearbyInteractable; }\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./src/game/constants.ts\");\n/**\r\n * Á¢∞ÊíûÊ£ÄÊµã & ‰∫íÂä®Ê£ÄÊµã\r\n *\r\n * ‰ΩøÁî®ÈÄêÊ†º WALKABLE_MAP ËÄåÈùûÁü©ÂΩ¢Âå∫Âüü ‚Äî Âè™ÊúâÂú∞Êùø/Âú∞ÊØØ/Á†ñÂú∞ÊùøÂèØË°åËµ∞„ÄÇ\r\n */ \n// ==================== ËæÖÂä©: ÊüêÂÉèÁ¥†‰ΩçÁΩÆÁöÑ tile ÊòØÂê¶ÂèØË°åËµ∞ ====================\nfunction isTileWalkable(px, py) {\n    const col = Math.floor(px / _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE);\n    const row = Math.floor(py / _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE);\n    if (col < 0 || col >= _constants__WEBPACK_IMPORTED_MODULE_0__.MAP_COLS || row < 0 || row >= _constants__WEBPACK_IMPORTED_MODULE_0__.MAP_ROWS) return false;\n    return _constants__WEBPACK_IMPORTED_MODULE_0__.WALKABLE_MAP[row][col] === 1;\n}\n// ==================== Á¢∞ÊíûÊ£ÄÊµã ====================\nfunction checkCollision(px, py) {\n    // ‰ΩøÁî®Áé©ÂÆ∂‰∏ãÂçäË∫´‰Ωú‰∏∫Á¢∞Êíû‰Ωì (ËÑöÈÉ®Âå∫Âüü)\n    const padding = 4;\n    const left = px + padding;\n    const right = px + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE - padding;\n    const top = py + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2; // Âè™Ê£ÄÊµã‰∏ãÂçäË∫´\n    const bottom = py + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE + 4;\n    // Ê£ÄÊü•ËÑöÈÉ®Âõõ‰∏™Ëßí + ‰∏≠ÂøÉÁÇπÊòØÂê¶ÈÉΩÂú®ÂèØË°åËµ∞ tile ‰∏ä\n    const checkPoints = [\n        {\n            x: left,\n            y: top\n        },\n        {\n            x: right,\n            y: top\n        },\n        {\n            x: left,\n            y: bottom\n        },\n        {\n            x: right,\n            y: bottom\n        },\n        {\n            x: (left + right) / 2,\n            y: bottom\n        }\n    ];\n    for (const pt of checkPoints){\n        if (!isTileWalkable(pt.x, pt.y)) {\n            return true; // Êúâ‰∏Ä‰∏™ÁÇπÂú®‰∏çÂèØËµ∞ tile ‰∏ä ‚Üí Á¢∞Êíû\n        }\n    }\n    return false;\n}\n// ==================== ‰∫íÂä®Ê£ÄÊµã ====================\n// Ëß¶ÂèëÂå∫ÂüüÁõ¥Êé•Êù•Ëá™ TMX ÂêÑ‰∫íÂä®ÂõæÂ±ÇÔºåÁé©ÂÆ∂‰∏≠ÂøÉËêΩÂÖ•Âå∫ÂüüÂç≥Ëß¶Âèë\nfunction findNearbyInteractable(px, py) {\n    const playerCX = px + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2;\n    const playerCY = py + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2;\n    let closest = null;\n    let closestDist = Infinity;\n    for (const obj of _constants__WEBPACK_IMPORTED_MODULE_0__.INTERACTABLES){\n        const objLeft = obj.x * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n        const objRight = (obj.x + obj.width) * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n        const objTop = obj.y * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n        const objBottom = (obj.y + obj.height) * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n        // Áé©ÂÆ∂‰∏≠ÂøÉÂà∞Ëß¶ÂèëÂå∫ÂüüËæπÁºòÁöÑÊúÄËøëË∑ùÁ¶ª\n        const nearX = Math.max(objLeft, Math.min(playerCX, objRight));\n        const nearY = Math.max(objTop, Math.min(playerCY, objBottom));\n        const dx = playerCX - nearX;\n        const dy = playerCY - nearY;\n        const dist = Math.sqrt(dx * dx + dy * dy);\n        // Áé©ÂÆ∂Âú®Ëß¶ÂèëÂå∫ÂüüÂÜÖ (dist === 0) ÊàñË∑ùÁ¶ªÂú®ÈòàÂÄºÂÜÖ\n        if (dist < _constants__WEBPACK_IMPORTED_MODULE_0__.INTERACTION_DISTANCE && dist < closestDist) {\n            closestDist = dist;\n            closest = obj;\n        }\n    }\n    return closest;\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9nYW1lL2NvbGxpc2lvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztDQUlDLEdBVW9CO0FBRXJCLGtFQUFrRTtBQUNsRSxTQUFTTyxlQUFlQyxFQUFVLEVBQUVDLEVBQVU7SUFDNUMsTUFBTUMsTUFBTUMsS0FBS0MsS0FBSyxDQUFDSixLQUFLUixpREFBU0E7SUFDckMsTUFBTWEsTUFBTUYsS0FBS0MsS0FBSyxDQUFDSCxLQUFLVCxpREFBU0E7SUFDckMsSUFBSVUsTUFBTSxLQUFLQSxPQUFPTCxnREFBUUEsSUFBSVEsTUFBTSxLQUFLQSxPQUFPUCxnREFBUUEsRUFBRSxPQUFPO0lBQ3JFLE9BQU9GLG9EQUFZLENBQUNTLElBQUksQ0FBQ0gsSUFBSSxLQUFLO0FBQ3BDO0FBRUEsaURBQWlEO0FBQzFDLFNBQVNJLGVBQWVOLEVBQVUsRUFBRUMsRUFBVTtJQUNuRCxzQkFBc0I7SUFDdEIsTUFBTU0sVUFBVTtJQUNoQixNQUFNQyxPQUFPUixLQUFLTztJQUNsQixNQUFNRSxRQUFRVCxLQUFLUCxtREFBV0EsR0FBR2M7SUFDakMsTUFBTUcsTUFBTVQsS0FBS1IsbURBQVdBLEdBQUcsR0FBVSxTQUFTO0lBQ2xELE1BQU1rQixTQUFTVixLQUFLUixtREFBV0EsR0FBRztJQUVsQyw4QkFBOEI7SUFDOUIsTUFBTW1CLGNBQWM7UUFDbEI7WUFBRUMsR0FBR0w7WUFBcUJNLEdBQUdKO1FBQUk7UUFDakM7WUFBRUcsR0FBR0o7WUFBcUJLLEdBQUdKO1FBQUk7UUFDakM7WUFBRUcsR0FBR0w7WUFBcUJNLEdBQUdIO1FBQU87UUFDcEM7WUFBRUUsR0FBR0o7WUFBcUJLLEdBQUdIO1FBQU87UUFDcEM7WUFBRUUsR0FBRyxDQUFDTCxPQUFPQyxLQUFJLElBQUs7WUFBSUssR0FBR0g7UUFBTztLQUNyQztJQUVELEtBQUssTUFBTUksTUFBTUgsWUFBYTtRQUM1QixJQUFJLENBQUNiLGVBQWVnQixHQUFHRixDQUFDLEVBQUVFLEdBQUdELENBQUMsR0FBRztZQUMvQixPQUFPLE1BQU0sdUJBQXVCO1FBQ3RDO0lBQ0Y7SUFFQSxPQUFPO0FBQ1Q7QUFFQSxpREFBaUQ7QUFDakQsaUNBQWlDO0FBQzFCLFNBQVNFLHVCQUNkaEIsRUFBVSxFQUNWQyxFQUFVO0lBRVYsTUFBTWdCLFdBQVdqQixLQUFLUCxtREFBV0EsR0FBRztJQUNwQyxNQUFNeUIsV0FBV2pCLEtBQUtSLG1EQUFXQSxHQUFHO0lBRXBDLElBQUkwQixVQUFxQztJQUN6QyxJQUFJQyxjQUFjQztJQUVsQixLQUFLLE1BQU1DLE9BQU8zQixxREFBYUEsQ0FBRTtRQUMvQixNQUFNNEIsVUFBWUQsSUFBSVQsQ0FBQyxHQUFHckIsaURBQVNBO1FBQ25DLE1BQU1nQyxXQUFZLENBQUNGLElBQUlULENBQUMsR0FBR1MsSUFBSUcsS0FBSyxJQUFJakMsaURBQVNBO1FBQ2pELE1BQU1rQyxTQUFZSixJQUFJUixDQUFDLEdBQUd0QixpREFBU0E7UUFDbkMsTUFBTW1DLFlBQVksQ0FBQ0wsSUFBSVIsQ0FBQyxHQUFHUSxJQUFJTSxNQUFNLElBQUlwQyxpREFBU0E7UUFFbEQsbUJBQW1CO1FBQ25CLE1BQU1xQyxRQUFRMUIsS0FBSzJCLEdBQUcsQ0FBQ1AsU0FBU3BCLEtBQUs0QixHQUFHLENBQUNkLFVBQVVPO1FBQ25ELE1BQU1RLFFBQVE3QixLQUFLMkIsR0FBRyxDQUFDSixRQUFRdkIsS0FBSzRCLEdBQUcsQ0FBQ2IsVUFBVVM7UUFDbEQsTUFBTU0sS0FBS2hCLFdBQVdZO1FBQ3RCLE1BQU1LLEtBQUtoQixXQUFXYztRQUN0QixNQUFNRyxPQUFPaEMsS0FBS2lDLElBQUksQ0FBQ0gsS0FBS0EsS0FBS0MsS0FBS0E7UUFFdEMsZ0NBQWdDO1FBQ2hDLElBQUlDLE9BQU96Qyw0REFBb0JBLElBQUl5QyxPQUFPZixhQUFhO1lBQ3JEQSxjQUFjZTtZQUNkaEIsVUFBVUc7UUFDWjtJQUNGO0lBRUEsT0FBT0g7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvZ2FtZS9jb2xsaXNpb24udHM/NmE4YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog56Kw5pKe5qOA5rWLICYg5LqS5Yqo5qOA5rWLXHJcbiAqXHJcbiAqIOS9v+eUqOmAkOagvCBXQUxLQUJMRV9NQVAg6ICM6Z2e55+p5b2i5Yy65Z+fIOKAlCDlj6rmnInlnLDmnb8v5Zyw5q+vL+egluWcsOadv+WPr+ihjOi1sOOAglxyXG4gKi9cclxuaW1wb3J0IHtcclxuICBUSUxFX1NJWkUsXHJcbiAgUExBWUVSX1NJWkUsXHJcbiAgSU5URVJBQ1RJT05fRElTVEFOQ0UsXHJcbiAgSU5URVJBQ1RBQkxFUyxcclxuICBXQUxLQUJMRV9NQVAsXHJcbiAgTUFQX0NPTFMsXHJcbiAgTUFQX1JPV1MsXHJcbiAgSW50ZXJhY3RhYmxlT2JqZWN0LFxyXG59IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOi+heWKqTog5p+Q5YOP57Sg5L2N572u55qEIHRpbGUg5piv5ZCm5Y+v6KGM6LWwID09PT09PT09PT09PT09PT09PT09XHJcbmZ1bmN0aW9uIGlzVGlsZVdhbGthYmxlKHB4OiBudW1iZXIsIHB5OiBudW1iZXIpOiBib29sZWFuIHtcclxuICBjb25zdCBjb2wgPSBNYXRoLmZsb29yKHB4IC8gVElMRV9TSVpFKTtcclxuICBjb25zdCByb3cgPSBNYXRoLmZsb29yKHB5IC8gVElMRV9TSVpFKTtcclxuICBpZiAoY29sIDwgMCB8fCBjb2wgPj0gTUFQX0NPTFMgfHwgcm93IDwgMCB8fCByb3cgPj0gTUFQX1JPV1MpIHJldHVybiBmYWxzZTtcclxuICByZXR1cm4gV0FMS0FCTEVfTUFQW3Jvd11bY29sXSA9PT0gMTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g56Kw5pKe5qOA5rWLID09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvbGxpc2lvbihweDogbnVtYmVyLCBweTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgLy8g5L2/55So546p5a625LiL5Y2K6Lqr5L2c5Li656Kw5pKe5L2TICjohJrpg6jljLrln58pXHJcbiAgY29uc3QgcGFkZGluZyA9IDQ7XHJcbiAgY29uc3QgbGVmdCA9IHB4ICsgcGFkZGluZztcclxuICBjb25zdCByaWdodCA9IHB4ICsgUExBWUVSX1NJWkUgLSBwYWRkaW5nO1xyXG4gIGNvbnN0IHRvcCA9IHB5ICsgUExBWUVSX1NJWkUgLyAyOyAgICAgICAgLy8g5Y+q5qOA5rWL5LiL5Y2K6LqrXHJcbiAgY29uc3QgYm90dG9tID0gcHkgKyBQTEFZRVJfU0laRSArIDQ7XHJcblxyXG4gIC8vIOajgOafpeiEmumDqOWbm+S4quinkiArIOS4reW/g+eCueaYr+WQpumDveWcqOWPr+ihjOi1sCB0aWxlIOS4ilxyXG4gIGNvbnN0IGNoZWNrUG9pbnRzID0gW1xyXG4gICAgeyB4OiBsZWZ0LCAgICAgICAgICAgICAgICB5OiB0b3AgfSwgICAgICAvLyDlt6bkuIpcclxuICAgIHsgeDogcmlnaHQsICAgICAgICAgICAgICAgeTogdG9wIH0sICAgICAgLy8g5Y+z5LiKXHJcbiAgICB7IHg6IGxlZnQsICAgICAgICAgICAgICAgIHk6IGJvdHRvbSB9LCAgIC8vIOW3puS4i1xyXG4gICAgeyB4OiByaWdodCwgICAgICAgICAgICAgICB5OiBib3R0b20gfSwgICAvLyDlj7PkuItcclxuICAgIHsgeDogKGxlZnQgKyByaWdodCkgLyAyLCAgeTogYm90dG9tIH0sICAgLy8g5bqV6YOo5Lit5b+DXHJcbiAgXTtcclxuXHJcbiAgZm9yIChjb25zdCBwdCBvZiBjaGVja1BvaW50cykge1xyXG4gICAgaWYgKCFpc1RpbGVXYWxrYWJsZShwdC54LCBwdC55KSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTsgLy8g5pyJ5LiA5Liq54K55Zyo5LiN5Y+v6LWwIHRpbGUg5LiKIOKGkiDnorDmkp5cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5LqS5Yqo5qOA5rWLID09PT09PT09PT09PT09PT09PT09XHJcbi8vIOinpuWPkeWMuuWfn+ebtOaOpeadpeiHqiBUTVgg5ZCE5LqS5Yqo5Zu+5bGC77yM546p5a625Lit5b+D6JC95YWl5Yy65Z+f5Y2z6Kem5Y+RXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kTmVhcmJ5SW50ZXJhY3RhYmxlKFxyXG4gIHB4OiBudW1iZXIsXHJcbiAgcHk6IG51bWJlclxyXG4pOiBJbnRlcmFjdGFibGVPYmplY3QgfCBudWxsIHtcclxuICBjb25zdCBwbGF5ZXJDWCA9IHB4ICsgUExBWUVSX1NJWkUgLyAyO1xyXG4gIGNvbnN0IHBsYXllckNZID0gcHkgKyBQTEFZRVJfU0laRSAvIDI7XHJcblxyXG4gIGxldCBjbG9zZXN0OiBJbnRlcmFjdGFibGVPYmplY3QgfCBudWxsID0gbnVsbDtcclxuICBsZXQgY2xvc2VzdERpc3QgPSBJbmZpbml0eTtcclxuXHJcbiAgZm9yIChjb25zdCBvYmogb2YgSU5URVJBQ1RBQkxFUykge1xyXG4gICAgY29uc3Qgb2JqTGVmdCAgID0gb2JqLnggKiBUSUxFX1NJWkU7XHJcbiAgICBjb25zdCBvYmpSaWdodCAgPSAob2JqLnggKyBvYmoud2lkdGgpICogVElMRV9TSVpFO1xyXG4gICAgY29uc3Qgb2JqVG9wICAgID0gb2JqLnkgKiBUSUxFX1NJWkU7XHJcbiAgICBjb25zdCBvYmpCb3R0b20gPSAob2JqLnkgKyBvYmouaGVpZ2h0KSAqIFRJTEVfU0laRTtcclxuXHJcbiAgICAvLyDnjqnlrrbkuK3lv4PliLDop6blj5HljLrln5/ovrnnvJjnmoTmnIDov5Hot53nprtcclxuICAgIGNvbnN0IG5lYXJYID0gTWF0aC5tYXgob2JqTGVmdCwgTWF0aC5taW4ocGxheWVyQ1gsIG9ialJpZ2h0KSk7XHJcbiAgICBjb25zdCBuZWFyWSA9IE1hdGgubWF4KG9ialRvcCwgTWF0aC5taW4ocGxheWVyQ1ksIG9iakJvdHRvbSkpO1xyXG4gICAgY29uc3QgZHggPSBwbGF5ZXJDWCAtIG5lYXJYO1xyXG4gICAgY29uc3QgZHkgPSBwbGF5ZXJDWSAtIG5lYXJZO1xyXG4gICAgY29uc3QgZGlzdCA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcblxyXG4gICAgLy8g546p5a625Zyo6Kem5Y+R5Yy65Z+f5YaFIChkaXN0ID09PSAwKSDmiJbot53nprvlnKjpmIjlgLzlhoVcclxuICAgIGlmIChkaXN0IDwgSU5URVJBQ1RJT05fRElTVEFOQ0UgJiYgZGlzdCA8IGNsb3Nlc3REaXN0KSB7XHJcbiAgICAgIGNsb3Nlc3REaXN0ID0gZGlzdDtcclxuICAgICAgY2xvc2VzdCA9IG9iajtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBjbG9zZXN0O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJUSUxFX1NJWkUiLCJQTEFZRVJfU0laRSIsIklOVEVSQUNUSU9OX0RJU1RBTkNFIiwiSU5URVJBQ1RBQkxFUyIsIldBTEtBQkxFX01BUCIsIk1BUF9DT0xTIiwiTUFQX1JPV1MiLCJpc1RpbGVXYWxrYWJsZSIsInB4IiwicHkiLCJjb2wiLCJNYXRoIiwiZmxvb3IiLCJyb3ciLCJjaGVja0NvbGxpc2lvbiIsInBhZGRpbmciLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJjaGVja1BvaW50cyIsIngiLCJ5IiwicHQiLCJmaW5kTmVhcmJ5SW50ZXJhY3RhYmxlIiwicGxheWVyQ1giLCJwbGF5ZXJDWSIsImNsb3Nlc3QiLCJjbG9zZXN0RGlzdCIsIkluZmluaXR5Iiwib2JqIiwib2JqTGVmdCIsIm9ialJpZ2h0Iiwid2lkdGgiLCJvYmpUb3AiLCJvYmpCb3R0b20iLCJoZWlnaHQiLCJuZWFyWCIsIm1heCIsIm1pbiIsIm5lYXJZIiwiZHgiLCJkeSIsImRpc3QiLCJzcXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/game/collision.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/game/npc.ts":
/*!*************************!*\
  !*** ./src/game/npc.ts ***!
  \*************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CatState: function() { return /* binding */ CatState; },\n/* harmony export */   HEART_BUBBLE_DURATION: function() { return /* binding */ HEART_BUBBLE_DURATION; },\n/* harmony export */   createCat: function() { return /* binding */ createCat; },\n/* harmony export */   createStaticMan: function() { return /* binding */ createStaticMan; },\n/* harmony export */   getCatFootY: function() { return /* binding */ getCatFootY; },\n/* harmony export */   getManFootY: function() { return /* binding */ getManFootY; },\n/* harmony export */   isPlayerNearMan: function() { return /* binding */ isPlayerNearMan; },\n/* harmony export */   renderCat: function() { return /* binding */ renderCat; },\n/* harmony export */   renderHeartBubble: function() { return /* binding */ renderHeartBubble; },\n/* harmony export */   renderManNPC: function() { return /* binding */ renderManNPC; },\n/* harmony export */   updateCat: function() { return /* binding */ updateCat; }\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./src/game/constants.ts\");\n/* harmony import */ var _basePath__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../basePath */ \"(app-pages-browser)/./src/basePath.ts\");\n/**\r\n * üê± NPC Á≥ªÁªü ‚Äî ÈùôÊÄÅÁî∑Â≠© + Ëá™‰∏ªÊº´Ê∏∏Áå´Âí™\r\n *\r\n * Áî∑Â≠© (man): ÈùôÊ≠¢Á´ôÂú® TMX \"man\" ÂõæÂ±ÇÊ†áËÆ∞‰ΩçÁΩÆ\r\n * Áå´Âí™ (bwcat / ocat): Ëá™‰∏ª AI Êº´Ê∏∏ÔºåË°å‰∏∫Ê®°ÊãüÁúüÂÆûÁå´Âí™Ôºö\r\n *   - ÈöèÊú∫Ëµ∞Âá†Ê≠• ‚Üí ÂÅú‰∏ãÊù•ÂèëÂëÜ ‚Üí ÂÜçËµ∞\r\n *   - ÊúâÊó∂ÂÄôÈïøÊó∂Èó¥Ë∂¥ÁùÄ‰∏çÂä® (Áù°Ëßâ)\r\n *   - ‰ΩøÁî®‰∏éÁé©ÂÆ∂Áõ∏ÂêåÁöÑ WALKABLE_MAP Á¢∞ÊíûÊ£ÄÊµã\r\n */ \n\nvar CatState;\n(function(CatState) {\n    CatState[\"IDLE\"] = \"idle\";\n    CatState[\"WALKING\"] = \"walking\";\n    CatState[\"SLEEPING\"] = \"sleeping\";\n})(CatState || (CatState = {}));\n// ==================== Â∏∏Èáè ====================\n/** Áå´Á≤æÁÅµÂõæ: 4 Âàó √ó 4 Ë°å, ÊØèÂ∏ß 125√ó125 */ const CAT_FRAME_W = 125;\nconst CAT_FRAME_H = 125;\nconst CAT_COLS = 4;\n/** Áå´Âú®Ê∏∏Êàè‰∏≠ÁöÑÊòæÁ§∫Â∞∫ÂØ∏ */ const CAT_DRAW_W = 26;\nconst CAT_DRAW_H = 26;\n/** Áå´Á¢∞Êíû‰ΩìÂ§ßÂ∞è */ const CAT_BODY = 20;\n/** Áå´Ë°åËµ∞ÈÄüÂ∫¶ */ const CAT_SPEED = 0.5;\n/**\r\n * Áå´Á≤æÁÅµÂõæË°åÊò†Â∞Ñ (ËßÇÂØüÁ≤æÁÅµÂõæ):\r\n *  row 0 = Ê≠£Èù¢ (down)\r\n *  row 1 = Âè≥‰æß (right) ‚Äî ‰æßÈù¢ÊúùÂè≥\r\n *  row 2 = ËÉåÈù¢ (up)\r\n *  row 3 = Â∑¶‰æß (left) ‚Äî ‰æßÈù¢ÊúùÂ∑¶ (ÂÆûÈôÖÊòØ‰ªéÂ∑¶Áúã)\r\n *\r\n * Ê≥®ÊÑè: Á≤æÁÅµÂõæÁöÑ row 3 ÁúãËµ∑Êù•Âíå row 1 ÊòØÂØπÁß∞ÁöÑ\r\n */ const CAT_DIR_TO_ROW = {\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.DOWN]: 0,\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.RIGHT]: 1,\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.UP]: 2,\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.LEFT]: 3\n};\n/** Ë°åËµ∞Âä®ÁîªÂ∏ßÂ∫èÂàó */ const CAT_WALK_ANIM = [\n    0,\n    1,\n    2,\n    3\n];\n/** Áî∑Â≠©Á≤æÁÅµÂú®Ê∏∏Êàè‰∏≠ÁöÑÊòæÁ§∫Â∞∫ÂØ∏ ‚Äî ‰∏é keqi ÂêåÈ´ò (DRAW_H ‚âà 52) */ const MAN_DRAW_H = Math.round(38 * (583 / 429)); // ‰∏é player ÁöÑ DRAW_H ‰∏ÄËá¥ ‚âà 52\nconst MAN_DRAW_W = Math.round(MAN_DRAW_H * (220 / 433)); // Á≠âÊØîÁº©ÊîæÂÆΩÂ∫¶ ‚âà 26\n// ==================== Áî∑Â≠© NPC ‰ΩçÁΩÆ (TMX man ÂõæÂ±Ç: row 16, col 11) ====================\n/** ËÑöÂ∫ïÂØπÈΩêÂà∞ tile (11, 16) ÁöÑ‰∏≠ÂøÉÂ∫ïÈÉ® */ const MAN_TILE_COL = 11;\nconst MAN_TILE_ROW = 16;\n// ==================== ÂõæÁâáÂä†ËΩΩ ====================\nfunction loadImage(src) {\n    return new Promise((resolve)=>{\n        const img = new Image();\n        img.onload = ()=>resolve(img);\n        img.onerror = ()=>{\n            console.warn(\"‚ö†Ô∏è NPC Êó†Ê≥ïÂä†ËΩΩ: \".concat(src));\n            resolve(null);\n        };\n        img.src = src;\n    });\n}\n// ==================== ÂàõÂª∫ NPC ====================\nasync function createStaticMan() {\n    const sprite = await loadImage((0,_basePath__WEBPACK_IMPORTED_MODULE_1__.assetPath)(\"/char/man/man.png\"));\n    // ËÑöÂ∫ïÂØπÈΩê tile ‰∏≠ÂøÉ\n    const footX = MAN_TILE_COL * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE + _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE / 2;\n    const footY = (MAN_TILE_ROW + 1) * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE; // tile Â∫ïËæπ\n    return {\n        id: \"man\",\n        x: footX - _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2,\n        y: footY - _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE,\n        sprite\n    };\n}\nasync function createCat(id, spritePath, startCol, startRow) {\n    const sprite = await loadImage((0,_basePath__WEBPACK_IMPORTED_MODULE_1__.assetPath)(spritePath));\n    return {\n        id,\n        x: startCol * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE,\n        y: startRow * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE,\n        direction: _constants__WEBPACK_IMPORTED_MODULE_0__.Direction.DOWN,\n        state: \"idle\",\n        animFrame: 0,\n        animTimer: 0,\n        stateTimer: randomIdleTime(),\n        walkDx: 0,\n        walkDy: 0,\n        sprite\n    };\n}\n// ==================== Áå´ AI ====================\nfunction randomIdleTime() {\n    // 2~6 Áßí @ 60fps\n    return 120 + Math.floor(Math.random() * 240);\n}\nfunction randomSleepTime() {\n    // 5~15 Áßí\n    return 300 + Math.floor(Math.random() * 600);\n}\nfunction randomWalkTime() {\n    // 1~4 Áßí\n    return 60 + Math.floor(Math.random() * 180);\n}\n/** Á¢∞ÊíûÊ£ÄÊµã: Áå´ÁöÑËÑöÈÉ®Âå∫ÂüüÊòØÂê¶Âú®ÂèØË°åËµ∞Âå∫Âüü */ function isCatWalkable(px, py) {\n    const padding = 2;\n    const left = px + padding;\n    const right = px + CAT_BODY - padding;\n    const top = py + CAT_BODY / 2;\n    const bottom = py + CAT_BODY + 2;\n    const points = [\n        {\n            x: left,\n            y: top\n        },\n        {\n            x: right,\n            y: top\n        },\n        {\n            x: left,\n            y: bottom\n        },\n        {\n            x: right,\n            y: bottom\n        }\n    ];\n    for (const pt of points){\n        const col = Math.floor(pt.x / _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE);\n        const row = Math.floor(pt.y / _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE);\n        if (col < 0 || col >= _constants__WEBPACK_IMPORTED_MODULE_0__.MAP_COLS || row < 0 || row >= _constants__WEBPACK_IMPORTED_MODULE_0__.MAP_ROWS) return false;\n        if (_constants__WEBPACK_IMPORTED_MODULE_0__.WALKABLE_MAP[row][col] !== 1) return false;\n    }\n    return true;\n}\n/** ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™Ë°åËµ∞ÊñπÂêë */ function pickRandomDirection() {\n    const choices = [\n        {\n            dx: 0,\n            dy: -CAT_SPEED,\n            dir: _constants__WEBPACK_IMPORTED_MODULE_0__.Direction.UP\n        },\n        {\n            dx: 0,\n            dy: CAT_SPEED,\n            dir: _constants__WEBPACK_IMPORTED_MODULE_0__.Direction.DOWN\n        },\n        {\n            dx: -CAT_SPEED,\n            dy: 0,\n            dir: _constants__WEBPACK_IMPORTED_MODULE_0__.Direction.LEFT\n        },\n        {\n            dx: CAT_SPEED,\n            dy: 0,\n            dir: _constants__WEBPACK_IMPORTED_MODULE_0__.Direction.RIGHT\n        }\n    ];\n    return choices[Math.floor(Math.random() * choices.length)];\n}\n/** ÊØèÂ∏ßÊõ¥Êñ∞Áå´ÁöÑ AI */ function updateCat(cat) {\n    cat.stateTimer--;\n    switch(cat.state){\n        case \"idle\":\n            if (cat.stateTimer <= 0) {\n                // 60% Ê¶ÇÁéáÂºÄÂßãËµ∞, 20% Ê¶ÇÁéáÁù°Ëßâ, 20% ÁªßÁª≠ÂèëÂëÜ\n                const r = Math.random();\n                if (r < 0.6) {\n                    const { dx, dy, dir } = pickRandomDirection();\n                    cat.state = \"walking\";\n                    cat.walkDx = dx;\n                    cat.walkDy = dy;\n                    cat.direction = dir;\n                    cat.stateTimer = randomWalkTime();\n                    cat.animFrame = 0;\n                    cat.animTimer = 0;\n                } else if (r < 0.001) {\n                    cat.state = \"sleeping\";\n                    cat.stateTimer = randomSleepTime();\n                    cat.direction = _constants__WEBPACK_IMPORTED_MODULE_0__.Direction.DOWN; // Áù°ËßâÈù¢Êúù‰∏ã\n                } else {\n                    cat.stateTimer = randomIdleTime();\n                }\n            }\n            break;\n        case \"walking\":\n            // Â∞ùËØïÁßªÂä®\n            {\n                const newX = cat.x + cat.walkDx;\n                const newY = cat.y + cat.walkDy;\n                if (isCatWalkable(newX, newY)) {\n                    cat.x = newX;\n                    cat.y = newY;\n                } else {\n                    // ÊíûÂ¢ô‰∫ÜÔºåÂÅú‰∏ãÊù•\n                    cat.state = \"idle\";\n                    cat.stateTimer = randomIdleTime();\n                    break;\n                }\n                // Âä®Áîª\n                cat.animTimer++;\n                if (cat.animTimer % 10 === 0) {\n                    cat.animFrame = (cat.animFrame + 1) % CAT_WALK_ANIM.length;\n                }\n                if (cat.stateTimer <= 0) {\n                    cat.state = \"idle\";\n                    cat.stateTimer = randomIdleTime();\n                    cat.animFrame = 0;\n                }\n            }\n            break;\n        case \"sleeping\":\n            if (cat.stateTimer <= 0) {\n                cat.state = \"idle\";\n                cat.stateTimer = randomIdleTime();\n            }\n            break;\n    }\n}\n// ==================== Ê∏≤Êüì ====================\n/** Ê∏≤ÊüìÁî∑Â≠© (ÈùôÊÄÅ) */ function renderManNPC(ctx, man) {\n    if (!man.sprite) return;\n    ctx.save();\n    ctx.imageSmoothingEnabled = false;\n    // ‰ª•Á¢∞ÊíûÁõí‰∏∫Âü∫ÂáÜÂ±Ö‰∏≠ÁªòÂà∂\n    const drawX = man.x + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2 - MAN_DRAW_W / 2;\n    const drawY = man.y + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2 - MAN_DRAW_H / 2;\n    ctx.drawImage(man.sprite, 0, 0, man.sprite.width, man.sprite.height, drawX, drawY, MAN_DRAW_W, MAN_DRAW_H);\n    ctx.restore();\n}\n/** Ê∏≤ÊüìÁå´ */ function renderCat(ctx, cat) {\n    if (!cat.sprite) return;\n    ctx.save();\n    ctx.imageSmoothingEnabled = false;\n    const row = CAT_DIR_TO_ROW[cat.direction];\n    const col = cat.state === \"walking\" ? CAT_WALK_ANIM[cat.animFrame % CAT_WALK_ANIM.length] : 0; // ÈùûË°åËµ∞Êó∂Áî®Á¨¨‰∏ÄÂ∏ß (Á´ôÁ´ã)\n    const srcX = col * CAT_FRAME_W;\n    const srcY = row * CAT_FRAME_H;\n    // ÁªòÂà∂‰ΩçÁΩÆ\n    const drawX = cat.x + CAT_BODY / 2 - CAT_DRAW_W / 2;\n    const drawY = cat.y + CAT_BODY / 2 - CAT_DRAW_H / 2;\n    ctx.drawImage(cat.sprite, srcX, srcY, CAT_FRAME_W, CAT_FRAME_H, drawX, drawY, CAT_DRAW_W, CAT_DRAW_H);\n    ctx.restore();\n}\n/** Ëé∑ÂèñÁî∑Â≠©ÁöÑ footY */ function getManFootY(man) {\n    return man.y + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE;\n}\n/** Ëé∑ÂèñÁå´ÁöÑ footY */ function getCatFootY(cat) {\n    return cat.y + CAT_BODY;\n}\n// ==================== Áà±ÂøÉ‰∫íÂä® ====================\nconst HEART_INTERACTION_DIST = 48; // ‰∫íÂä®Ë∑ùÁ¶ª (ÂÉèÁ¥†)\nconst HEART_BUBBLE_DURATION = 180; // Ê∞îÊ≥°ÊåÅÁª≠Â∏ßÊï∞ (3 Áßí @ 60fps)\n/** Ê£ÄÊµãÁé©ÂÆ∂ÊòØÂê¶Èù†ËøëÁî∑Â≠© NPC */ function isPlayerNearMan(px, py, man) {\n    const playerCX = px + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2;\n    const playerCY = py + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2;\n    const manCX = man.x + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2;\n    const manCY = man.y + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2;\n    const dx = playerCX - manCX;\n    const dy = playerCY - manCY;\n    return Math.sqrt(dx * dx + dy * dy) < HEART_INTERACTION_DIST;\n}\n\n/**\r\n * Ê∏≤ÊüìÁà±ÂøÉÂØπËØùÊ∞îÊ≥° ‚Äî ÂÉèÁ¥†È£éÊ†ºÂúÜËßíÊ∞îÊ≥° + Á∫¢Ëâ≤Áà±ÂøÉ\r\n * @param cx ËßíËâ≤Â§¥È°∂‰∏≠ÂøÉ X\r\n * @param headY ËßíËâ≤Â§¥È°∂ Y\r\n * @param time performance.now() Áî®‰∫éÊµÆÂä®Âä®Áîª\r\n * @param progress 0~1 Âä®ÁîªËøõÂ∫¶ (Áî®‰∫éÊ∑°ÂÖ•Ê∑°Âá∫)\r\n */ function renderHeartBubble(ctx, cx, headY, time, progress) {\n    ctx.save();\n    // ÊµÆÂä®ÂÅèÁßª\n    const floatY = Math.sin(time * 0.004) * 2;\n    const bubbleX = cx;\n    const bubbleY = headY - 20 + floatY;\n    // Ê∑°ÂÖ•Ê∑°Âá∫\n    const alpha = progress < 0.1 ? progress / 0.1 : progress > 0.85 ? (1 - progress) / 0.15 : 1;\n    ctx.globalAlpha = alpha;\n    // ---- Ê∞îÊ≥°ËÉåÊôØ ----\n    const bw = 22;\n    const bh = 20;\n    const bx = bubbleX - bw / 2;\n    const by = bubbleY - bh;\n    // ÁôΩËâ≤ÂúÜËßíÊ∞îÊ≥°\n    ctx.fillStyle = \"#FFFEF5\";\n    ctx.beginPath();\n    roundBubble(ctx, bx, by, bw, bh, 5);\n    ctx.fill();\n    // Ê∞îÊ≥°ËæπÊ°Ü\n    ctx.strokeStyle = \"#8B7355\";\n    ctx.lineWidth = 1.5;\n    ctx.beginPath();\n    roundBubble(ctx, bx, by, bw, bh, 5);\n    ctx.stroke();\n    // Ê∞îÊ≥°Â∞èÂ∞æÂ∑¥ (‰∏âËßíÂΩ¢ÊåáÂêë‰∏ãÊñπ)\n    ctx.fillStyle = \"#FFFEF5\";\n    ctx.beginPath();\n    ctx.moveTo(bubbleX - 3, by + bh - 0.5);\n    ctx.lineTo(bubbleX, by + bh + 5);\n    ctx.lineTo(bubbleX + 3, by + bh - 0.5);\n    ctx.closePath();\n    ctx.fill();\n    // Â∞æÂ∑¥ËæπÊ°Ü\n    ctx.strokeStyle = \"#8B7355\";\n    ctx.beginPath();\n    ctx.moveTo(bubbleX - 3, by + bh);\n    ctx.lineTo(bubbleX, by + bh + 5);\n    ctx.lineTo(bubbleX + 3, by + bh);\n    ctx.stroke();\n    // ---- ÂÉèÁ¥†È£éÁà±ÂøÉ ----\n    drawPixelHeart(ctx, bubbleX, by + bh / 2 - 1);\n    ctx.restore();\n}\n/** Áîª‰∏Ä‰∏™ÂúÜËßíÁü©ÂΩ¢Ë∑ØÂæÑ */ function roundBubble(ctx, x, y, w, h, r) {\n    ctx.moveTo(x + r, y);\n    ctx.lineTo(x + w - r, y);\n    ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n    ctx.lineTo(x + w, y + h - r);\n    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    ctx.lineTo(x + r, y + h);\n    ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n    ctx.lineTo(x, y + r);\n    ctx.quadraticCurveTo(x, y, x + r, y);\n    ctx.closePath();\n}\n/** Áîª‰∏Ä‰∏™ÂÉèÁ¥†È£éÁ∫¢Ëâ≤Áà±ÂøÉ (Â±Ö‰∏≠Âú® cx, cy) */ function drawPixelHeart(ctx, cx, cy) {\n    const s = 1.5; // ÂÉèÁ¥†Âçï‰ΩçÂ§ßÂ∞è\n    // ÁªèÂÖ∏ÂÉèÁ¥†Áà±ÂøÉ pattern (7√ó6)\n    const pattern = [\n        [\n            0,\n            1,\n            1,\n            0,\n            1,\n            1,\n            0\n        ],\n        [\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n        ],\n        [\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1\n        ],\n        [\n            0,\n            1,\n            1,\n            1,\n            1,\n            1,\n            0\n        ],\n        [\n            0,\n            0,\n            1,\n            1,\n            1,\n            0,\n            0\n        ],\n        [\n            0,\n            0,\n            0,\n            1,\n            0,\n            0,\n            0\n        ]\n    ];\n    const offsetX = cx - pattern[0].length * s / 2;\n    const offsetY = cy - pattern.length * s / 2;\n    // Ê∑±Á∫¢Ëâ≤ËæπÊ°Ü\n    ctx.fillStyle = \"#8B0000\";\n    for(let r = 0; r < pattern.length; r++){\n        for(let c = 0; c < pattern[r].length; c++){\n            if (pattern[r][c]) {\n                ctx.fillRect(Math.round(offsetX + c * s) - 0.5, Math.round(offsetY + r * s) - 0.5, s + 1, s + 1);\n            }\n        }\n    }\n    // Á∫¢Ëâ≤Â°´ÂÖÖ\n    ctx.fillStyle = \"#E8311A\";\n    for(let r = 0; r < pattern.length; r++){\n        for(let c = 0; c < pattern[r].length; c++){\n            if (pattern[r][c]) {\n                ctx.fillRect(Math.round(offsetX + c * s), Math.round(offsetY + r * s), s, s);\n            }\n        }\n    }\n    // È´òÂÖâ\n    ctx.fillStyle = \"rgba(255,255,255,0.5)\";\n    ctx.fillRect(Math.round(offsetX + 1 * s), Math.round(offsetY + 0 * s), s, s);\n    ctx.fillRect(Math.round(offsetX + 1 * s), Math.round(offsetY + 1 * s), s, s);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUlBLEdBQUdBO0FBQzlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9nYW1lL25wYy50cz8wM2Y0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDwn5CxIE5QQyDns7vnu58g4oCUIOmdmeaAgeeUt+WtqSArIOiHquS4u+a8q+a4uOeMq+WSqlxyXG4gKlxyXG4gKiDnlLflrakgKG1hbik6IOmdmeatouermeWcqCBUTVggXCJtYW5cIiDlm77lsYLmoIforrDkvY3nva5cclxuICog54yr5ZKqIChid2NhdCAvIG9jYXQpOiDoh6rkuLsgQUkg5ryr5ri477yM6KGM5Li65qih5ouf55yf5a6e54yr5ZKq77yaXHJcbiAqICAgLSDpmo/mnLrotbDlh6DmraUg4oaSIOWBnOS4i+adpeWPkeWRhiDihpIg5YaN6LWwXHJcbiAqICAgLSDmnInml7blgJnplb/ml7bpl7TotrTnnYDkuI3liqggKOedoeiniSlcclxuICogICAtIOS9v+eUqOS4jueOqeWutuebuOWQjOeahCBXQUxLQUJMRV9NQVAg56Kw5pKe5qOA5rWLXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVElMRV9TSVpFLCBQTEFZRVJfU0laRSwgV0FMS0FCTEVfTUFQLCBNQVBfQ09MUywgTUFQX1JPV1MsIERpcmVjdGlvbiB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgYXNzZXRQYXRoIH0gZnJvbSAnLi4vYmFzZVBhdGgnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g57G75Z6LID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKiog54yr55qE6KGM5Li654q25oCBICovXHJcbmV4cG9ydCBlbnVtIENhdFN0YXRlIHtcclxuICAgIElETEUgPSAnaWRsZScsICAgICAgIC8vIOermeedgOWPkeWRhlxyXG4gICAgV0FMS0lORyA9ICd3YWxraW5nJywgLy8g6LWw6Lev5LitXHJcbiAgICBTTEVFUElORyA9ICdzbGVlcGluZycsIC8vIOmVv+aXtumXtOi2tOedgFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhdE5QQyB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgeDogbnVtYmVyOyAgICAgICAgICAvLyDlg4/ntKDlnZDmoIdcclxuICAgIHk6IG51bWJlcjtcclxuICAgIGRpcmVjdGlvbjogRGlyZWN0aW9uO1xyXG4gICAgc3RhdGU6IENhdFN0YXRlO1xyXG4gICAgYW5pbUZyYW1lOiBudW1iZXI7XHJcbiAgICBhbmltVGltZXI6IG51bWJlcjtcclxuICAgIC8qKiDlvZPliY3nirbmgIHliankvZnmjIHnu60gdGljayDmlbAgKi9cclxuICAgIHN0YXRlVGltZXI6IG51bWJlcjtcclxuICAgIC8qKiDooYzotbDmlrnlkJEgKOavj+asoemaj+acuumAiSkgKi9cclxuICAgIHdhbGtEeDogbnVtYmVyO1xyXG4gICAgd2Fsa0R5OiBudW1iZXI7XHJcbiAgICBzcHJpdGU6IEhUTUxJbWFnZUVsZW1lbnQgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRpY05QQyB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgeDogbnVtYmVyOyAgIC8vIOWDj+e0oOWdkOaghyAo6ISa5bqV5L2N572uKVxyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgc3ByaXRlOiBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbDtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5bi46YePID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKiog54yr57K+54G15Zu+OiA0IOWIlyDDlyA0IOihjCwg5q+P5binIDEyNcOXMTI1ICovXHJcbmNvbnN0IENBVF9GUkFNRV9XID0gMTI1O1xyXG5jb25zdCBDQVRfRlJBTUVfSCA9IDEyNTtcclxuY29uc3QgQ0FUX0NPTFMgPSA0O1xyXG4vKiog54yr5Zyo5ri45oiP5Lit55qE5pi+56S65bC65a+4ICovXHJcbmNvbnN0IENBVF9EUkFXX1cgPSAyNjtcclxuY29uc3QgQ0FUX0RSQVdfSCA9IDI2O1xyXG4vKiog54yr56Kw5pKe5L2T5aSn5bCPICovXHJcbmNvbnN0IENBVF9CT0RZID0gMjA7XHJcbi8qKiDnjKvooYzotbDpgJ/luqYgKi9cclxuY29uc3QgQ0FUX1NQRUVEID0gMC41O1xyXG5cclxuLyoqXHJcbiAqIOeMq+eyvueBteWbvuihjOaYoOWwhCAo6KeC5a+f57K+54G15Zu+KTpcclxuICogIHJvdyAwID0g5q2j6Z2iIChkb3duKVxyXG4gKiAgcm93IDEgPSDlj7PkvqcgKHJpZ2h0KSDigJQg5L6n6Z2i5pyd5Y+zXHJcbiAqICByb3cgMiA9IOiDjOmdoiAodXApXHJcbiAqICByb3cgMyA9IOW3puS+pyAobGVmdCkg4oCUIOS+p+mdouacneW3piAo5a6e6ZmF5piv5LuO5bem55yLKVxyXG4gKlxyXG4gKiDms6jmhI86IOeyvueBteWbvueahCByb3cgMyDnnIvotbfmnaXlkowgcm93IDEg5piv5a+556ew55qEXHJcbiAqL1xyXG5jb25zdCBDQVRfRElSX1RPX1JPVzogUmVjb3JkPERpcmVjdGlvbiwgbnVtYmVyPiA9IHtcclxuICAgIFtEaXJlY3Rpb24uRE9XTl06IDAsXHJcbiAgICBbRGlyZWN0aW9uLlJJR0hUXTogMSxcclxuICAgIFtEaXJlY3Rpb24uVVBdOiAyLFxyXG4gICAgW0RpcmVjdGlvbi5MRUZUXTogMyxcclxufTtcclxuXHJcbi8qKiDooYzotbDliqjnlLvluKfluo/liJcgKi9cclxuY29uc3QgQ0FUX1dBTEtfQU5JTSA9IFswLCAxLCAyLCAzXTtcclxuXHJcbi8qKiDnlLflrannsr7ngbXlnKjmuLjmiI/kuK3nmoTmmL7npLrlsLrlr7gg4oCUIOS4jiBrZXFpIOWQjOmrmCAoRFJBV19IIOKJiCA1MikgKi9cclxuY29uc3QgTUFOX0RSQVdfSCA9IE1hdGgucm91bmQoMzggKiAoNTgzIC8gNDI5KSk7IC8vIOS4jiBwbGF5ZXIg55qEIERSQVdfSCDkuIDoh7Qg4omIIDUyXHJcbmNvbnN0IE1BTl9EUkFXX1cgPSBNYXRoLnJvdW5kKE1BTl9EUkFXX0ggKiAoMjIwIC8gNDMzKSk7IC8vIOetieavlOe8qeaUvuWuveW6piDiiYggMjZcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOeUt+WtqSBOUEMg5L2N572uIChUTVggbWFuIOWbvuWxgjogcm93IDE2LCBjb2wgMTEpID09PT09PT09PT09PT09PT09PT09XHJcbi8qKiDohJrlupXlr7npvZDliLAgdGlsZSAoMTEsIDE2KSDnmoTkuK3lv4PlupXpg6ggKi9cclxuY29uc3QgTUFOX1RJTEVfQ09MID0gMTE7XHJcbmNvbnN0IE1BTl9USUxFX1JPVyA9IDE2O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5Zu+54mH5Yqg6L29ID09PT09PT09PT09PT09PT09PT09XHJcbmZ1bmN0aW9uIGxvYWRJbWFnZShzcmM6IHN0cmluZyk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudCB8IG51bGw+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGltZyk7XHJcbiAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIE5QQyDml6Dms5XliqDovb06ICR7c3JjfWApO1xyXG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1nLnNyYyA9IHNyYztcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSDliJvlu7ogTlBDID09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU3RhdGljTWFuKCk6IFByb21pc2U8U3RhdGljTlBDPiB7XHJcbiAgICBjb25zdCBzcHJpdGUgPSBhd2FpdCBsb2FkSW1hZ2UoYXNzZXRQYXRoKCcvY2hhci9tYW4vbWFuLnBuZycpKTtcclxuICAgIC8vIOiEmuW6leWvuem9kCB0aWxlIOS4reW/g1xyXG4gICAgY29uc3QgZm9vdFggPSBNQU5fVElMRV9DT0wgKiBUSUxFX1NJWkUgKyBUSUxFX1NJWkUgLyAyO1xyXG4gICAgY29uc3QgZm9vdFkgPSAoTUFOX1RJTEVfUk9XICsgMSkgKiBUSUxFX1NJWkU7IC8vIHRpbGUg5bqV6L65XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiAnbWFuJyxcclxuICAgICAgICB4OiBmb290WCAtIFBMQVlFUl9TSVpFIC8gMiwgICAgIC8vIOeisOaSnuebkuW3puS4iuinklxyXG4gICAgICAgIHk6IGZvb3RZIC0gUExBWUVSX1NJWkUsICAgICAgICAgLy8g56Kw5pKe55uS6aG2XHJcbiAgICAgICAgc3ByaXRlLFxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNhdChpZDogc3RyaW5nLCBzcHJpdGVQYXRoOiBzdHJpbmcsIHN0YXJ0Q29sOiBudW1iZXIsIHN0YXJ0Um93OiBudW1iZXIpOiBQcm9taXNlPENhdE5QQz4ge1xyXG4gICAgY29uc3Qgc3ByaXRlID0gYXdhaXQgbG9hZEltYWdlKGFzc2V0UGF0aChzcHJpdGVQYXRoKSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHg6IHN0YXJ0Q29sICogVElMRV9TSVpFLFxyXG4gICAgICAgIHk6IHN0YXJ0Um93ICogVElMRV9TSVpFLFxyXG4gICAgICAgIGRpcmVjdGlvbjogRGlyZWN0aW9uLkRPV04sXHJcbiAgICAgICAgc3RhdGU6IENhdFN0YXRlLklETEUsXHJcbiAgICAgICAgYW5pbUZyYW1lOiAwLFxyXG4gICAgICAgIGFuaW1UaW1lcjogMCxcclxuICAgICAgICBzdGF0ZVRpbWVyOiByYW5kb21JZGxlVGltZSgpLFxyXG4gICAgICAgIHdhbGtEeDogMCxcclxuICAgICAgICB3YWxrRHk6IDAsXHJcbiAgICAgICAgc3ByaXRlLFxyXG4gICAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g54yrIEFJID09PT09PT09PT09PT09PT09PT09XHJcblxyXG5mdW5jdGlvbiByYW5kb21JZGxlVGltZSgpOiBudW1iZXIge1xyXG4gICAgLy8gMn42IOenkiBAIDYwZnBzXHJcbiAgICByZXR1cm4gMTIwICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjQwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmFuZG9tU2xlZXBUaW1lKCk6IG51bWJlciB7XHJcbiAgICAvLyA1fjE1IOenklxyXG4gICAgcmV0dXJuIDMwMCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJhbmRvbVdhbGtUaW1lKCk6IG51bWJlciB7XHJcbiAgICAvLyAxfjQg56eSXHJcbiAgICByZXR1cm4gNjAgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxODApO1xyXG59XHJcblxyXG4vKiog56Kw5pKe5qOA5rWLOiDnjKvnmoTohJrpg6jljLrln5/mmK/lkKblnKjlj6/ooYzotbDljLrln58gKi9cclxuZnVuY3Rpb24gaXNDYXRXYWxrYWJsZShweDogbnVtYmVyLCBweTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBwYWRkaW5nID0gMjtcclxuICAgIGNvbnN0IGxlZnQgPSBweCArIHBhZGRpbmc7XHJcbiAgICBjb25zdCByaWdodCA9IHB4ICsgQ0FUX0JPRFkgLSBwYWRkaW5nO1xyXG4gICAgY29uc3QgdG9wID0gcHkgKyBDQVRfQk9EWSAvIDI7XHJcbiAgICBjb25zdCBib3R0b20gPSBweSArIENBVF9CT0RZICsgMjtcclxuXHJcbiAgICBjb25zdCBwb2ludHMgPSBbXHJcbiAgICAgICAgeyB4OiBsZWZ0LCB5OiB0b3AgfSxcclxuICAgICAgICB7IHg6IHJpZ2h0LCB5OiB0b3AgfSxcclxuICAgICAgICB7IHg6IGxlZnQsIHk6IGJvdHRvbSB9LFxyXG4gICAgICAgIHsgeDogcmlnaHQsIHk6IGJvdHRvbSB9LFxyXG4gICAgXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHB0IG9mIHBvaW50cykge1xyXG4gICAgICAgIGNvbnN0IGNvbCA9IE1hdGguZmxvb3IocHQueCAvIFRJTEVfU0laRSk7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihwdC55IC8gVElMRV9TSVpFKTtcclxuICAgICAgICBpZiAoY29sIDwgMCB8fCBjb2wgPj0gTUFQX0NPTFMgfHwgcm93IDwgMCB8fCByb3cgPj0gTUFQX1JPV1MpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoV0FMS0FCTEVfTUFQW3Jvd11bY29sXSAhPT0gMSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKiDpmo/mnLrpgInmi6nkuIDkuKrooYzotbDmlrnlkJEgKi9cclxuZnVuY3Rpb24gcGlja1JhbmRvbURpcmVjdGlvbigpOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXI7IGRpcjogRGlyZWN0aW9uIH0ge1xyXG4gICAgY29uc3QgY2hvaWNlcyA9IFtcclxuICAgICAgICB7IGR4OiAwLCBkeTogLUNBVF9TUEVFRCwgZGlyOiBEaXJlY3Rpb24uVVAgfSxcclxuICAgICAgICB7IGR4OiAwLCBkeTogQ0FUX1NQRUVELCBkaXI6IERpcmVjdGlvbi5ET1dOIH0sXHJcbiAgICAgICAgeyBkeDogLUNBVF9TUEVFRCwgZHk6IDAsIGRpcjogRGlyZWN0aW9uLkxFRlQgfSxcclxuICAgICAgICB7IGR4OiBDQVRfU1BFRUQsIGR5OiAwLCBkaXI6IERpcmVjdGlvbi5SSUdIVCB9LFxyXG4gICAgXTtcclxuICAgIHJldHVybiBjaG9pY2VzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNob2ljZXMubGVuZ3RoKV07XHJcbn1cclxuXHJcbi8qKiDmr4/luKfmm7TmlrDnjKvnmoQgQUkgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNhdChjYXQ6IENhdE5QQyk6IHZvaWQge1xyXG4gICAgY2F0LnN0YXRlVGltZXItLTtcclxuXHJcbiAgICBzd2l0Y2ggKGNhdC5zdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgQ2F0U3RhdGUuSURMRTpcclxuICAgICAgICAgICAgaWYgKGNhdC5zdGF0ZVRpbWVyIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIDYwJSDmpoLnjoflvIDlp4votbAsIDIwJSDmpoLnjofnnaHop4ksIDIwJSDnu6fnu63lj5HlkYZcclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIgPCAwLjYpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGR4LCBkeSwgZGlyIH0gPSBwaWNrUmFuZG9tRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0LnN0YXRlID0gQ2F0U3RhdGUuV0FMS0lORztcclxuICAgICAgICAgICAgICAgICAgICBjYXQud2Fsa0R4ID0gZHg7XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0LndhbGtEeSA9IGR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5kaXJlY3Rpb24gPSBkaXI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0LnN0YXRlVGltZXIgPSByYW5kb21XYWxrVGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5hbmltRnJhbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5hbmltVGltZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyIDwgMC4wMDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXQuc3RhdGUgPSBDYXRTdGF0ZS5TTEVFUElORztcclxuICAgICAgICAgICAgICAgICAgICBjYXQuc3RhdGVUaW1lciA9IHJhbmRvbVNsZWVwVGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uRE9XTjsgLy8g552h6KeJ6Z2i5pyd5LiLXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5zdGF0ZVRpbWVyID0gcmFuZG9tSWRsZVRpbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBDYXRTdGF0ZS5XQUxLSU5HOlxyXG4gICAgICAgICAgICAvLyDlsJ3or5Xnp7vliqhcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3WCA9IGNhdC54ICsgY2F0LndhbGtEeDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1kgPSBjYXQueSArIGNhdC53YWxrRHk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNDYXRXYWxrYWJsZShuZXdYLCBuZXdZKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC54ID0gbmV3WDtcclxuICAgICAgICAgICAgICAgICAgICBjYXQueSA9IG5ld1k7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaSnuWimeS6hu+8jOWBnOS4i+adpVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5zdGF0ZSA9IENhdFN0YXRlLklETEU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0LnN0YXRlVGltZXIgPSByYW5kb21JZGxlVGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOWKqOeUu1xyXG4gICAgICAgICAgICAgICAgY2F0LmFuaW1UaW1lcisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhdC5hbmltVGltZXIgJSAxMCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5hbmltRnJhbWUgPSAoY2F0LmFuaW1GcmFtZSArIDEpICUgQ0FUX1dBTEtfQU5JTS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNhdC5zdGF0ZVRpbWVyIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXQuc3RhdGUgPSBDYXRTdGF0ZS5JRExFO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdC5zdGF0ZVRpbWVyID0gcmFuZG9tSWRsZVRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXQuYW5pbUZyYW1lID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBDYXRTdGF0ZS5TTEVFUElORzpcclxuICAgICAgICAgICAgaWYgKGNhdC5zdGF0ZVRpbWVyIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGNhdC5zdGF0ZSA9IENhdFN0YXRlLklETEU7XHJcbiAgICAgICAgICAgICAgICBjYXQuc3RhdGVUaW1lciA9IHJhbmRvbUlkbGVUaW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOa4suafkyA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLyoqIOa4suafk+eUt+WtqSAo6Z2Z5oCBKSAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTWFuTlBDKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBtYW46IFN0YXRpY05QQyk6IHZvaWQge1xyXG4gICAgaWYgKCFtYW4uc3ByaXRlKSByZXR1cm47XHJcbiAgICBjdHguc2F2ZSgpO1xyXG4gICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgLy8g5Lul56Kw5pKe55uS5Li65Z+65YeG5bGF5Lit57uY5Yi2XHJcbiAgICBjb25zdCBkcmF3WCA9IG1hbi54ICsgUExBWUVSX1NJWkUgLyAyIC0gTUFOX0RSQVdfVyAvIDI7XHJcbiAgICBjb25zdCBkcmF3WSA9IG1hbi55ICsgUExBWUVSX1NJWkUgLyAyIC0gTUFOX0RSQVdfSCAvIDI7XHJcbiAgICBjdHguZHJhd0ltYWdlKG1hbi5zcHJpdGUsIDAsIDAsIG1hbi5zcHJpdGUud2lkdGgsIG1hbi5zcHJpdGUuaGVpZ2h0LCBkcmF3WCwgZHJhd1ksIE1BTl9EUkFXX1csIE1BTl9EUkFXX0gpO1xyXG4gICAgY3R4LnJlc3RvcmUoKTtcclxufVxyXG5cclxuLyoqIOa4suafk+eMqyAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQ2F0KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjYXQ6IENhdE5QQyk6IHZvaWQge1xyXG4gICAgaWYgKCFjYXQuc3ByaXRlKSByZXR1cm47XHJcbiAgICBjdHguc2F2ZSgpO1xyXG4gICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IHJvdyA9IENBVF9ESVJfVE9fUk9XW2NhdC5kaXJlY3Rpb25dO1xyXG4gICAgY29uc3QgY29sID0gY2F0LnN0YXRlID09PSBDYXRTdGF0ZS5XQUxLSU5HXHJcbiAgICAgICAgPyBDQVRfV0FMS19BTklNW2NhdC5hbmltRnJhbWUgJSBDQVRfV0FMS19BTklNLmxlbmd0aF1cclxuICAgICAgICA6IDA7IC8vIOmdnuihjOi1sOaXtueUqOesrOS4gOW4pyAo56uZ56uLKVxyXG5cclxuICAgIGNvbnN0IHNyY1ggPSBjb2wgKiBDQVRfRlJBTUVfVztcclxuICAgIGNvbnN0IHNyY1kgPSByb3cgKiBDQVRfRlJBTUVfSDtcclxuXHJcbiAgICAvLyDnu5jliLbkvY3nva5cclxuICAgIGNvbnN0IGRyYXdYID0gY2F0LnggKyBDQVRfQk9EWSAvIDIgLSBDQVRfRFJBV19XIC8gMjtcclxuICAgIGNvbnN0IGRyYXdZID0gY2F0LnkgKyBDQVRfQk9EWSAvIDIgLSBDQVRfRFJBV19IIC8gMjtcclxuXHJcbiAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgIGNhdC5zcHJpdGUsXHJcbiAgICAgICAgc3JjWCwgc3JjWSwgQ0FUX0ZSQU1FX1csIENBVF9GUkFNRV9ILFxyXG4gICAgICAgIGRyYXdYLCBkcmF3WSwgQ0FUX0RSQVdfVywgQ0FUX0RSQVdfSFxyXG4gICAgKTtcclxuICAgIGN0eC5yZXN0b3JlKCk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IFktU29ydCDmlK/mjIEgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgWVNvcnRFbnRpdHkge1xyXG4gICAgdHlwZTogJ3BsYXllcicgfCAnbWFuJyB8ICdjYXQnO1xyXG4gICAgZm9vdFk6IG51bWJlcjtcclxuICAgIHJlbmRlcjogKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA9PiB2b2lkO1xyXG59XHJcblxyXG4vKiog6I635Y+W55S35a2p55qEIGZvb3RZICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRNYW5Gb290WShtYW46IFN0YXRpY05QQyk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gbWFuLnkgKyBQTEFZRVJfU0laRTtcclxufVxyXG5cclxuLyoqIOiOt+WPlueMq+eahCBmb290WSAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2F0Rm9vdFkoY2F0OiBDYXROUEMpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGNhdC55ICsgQ0FUX0JPRFk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOeIseW/g+S6kuWKqCA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgSEVBUlRfSU5URVJBQ1RJT05fRElTVCA9IDQ4OyAvLyDkupLliqjot53nprsgKOWDj+e0oClcclxuY29uc3QgSEVBUlRfQlVCQkxFX0RVUkFUSU9OID0gMTgwOyAvLyDmsJTms6HmjIHnu63luKfmlbAgKDMg56eSIEAgNjBmcHMpXHJcblxyXG4vKiog5qOA5rWL546p5a625piv5ZCm6Z2g6L+R55S35a2pIE5QQyAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNQbGF5ZXJOZWFyTWFuKHB4OiBudW1iZXIsIHB5OiBudW1iZXIsIG1hbjogU3RhdGljTlBDKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBwbGF5ZXJDWCA9IHB4ICsgUExBWUVSX1NJWkUgLyAyO1xyXG4gICAgY29uc3QgcGxheWVyQ1kgPSBweSArIFBMQVlFUl9TSVpFIC8gMjtcclxuICAgIGNvbnN0IG1hbkNYID0gbWFuLnggKyBQTEFZRVJfU0laRSAvIDI7XHJcbiAgICBjb25zdCBtYW5DWSA9IG1hbi55ICsgUExBWUVSX1NJWkUgLyAyO1xyXG4gICAgY29uc3QgZHggPSBwbGF5ZXJDWCAtIG1hbkNYO1xyXG4gICAgY29uc3QgZHkgPSBwbGF5ZXJDWSAtIG1hbkNZO1xyXG4gICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSkgPCBIRUFSVF9JTlRFUkFDVElPTl9ESVNUO1xyXG59XHJcblxyXG5leHBvcnQgeyBIRUFSVF9CVUJCTEVfRFVSQVRJT04gfTtcclxuXHJcbi8qKlxyXG4gKiDmuLLmn5PniLHlv4Plr7nor53msJTms6Eg4oCUIOWDj+e0oOmjjuagvOWchuinkuawlOazoSArIOe6ouiJsueIseW/g1xyXG4gKiBAcGFyYW0gY3gg6KeS6Imy5aS06aG25Lit5b+DIFhcclxuICogQHBhcmFtIGhlYWRZIOinkuiJsuWktOmhtiBZXHJcbiAqIEBwYXJhbSB0aW1lIHBlcmZvcm1hbmNlLm5vdygpIOeUqOS6jua1ruWKqOWKqOeUu1xyXG4gKiBAcGFyYW0gcHJvZ3Jlc3MgMH4xIOWKqOeUu+i/m+W6piAo55So5LqO5reh5YWl5reh5Ye6KVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckhlYXJ0QnViYmxlKFxyXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgICBjeDogbnVtYmVyLFxyXG4gICAgaGVhZFk6IG51bWJlcixcclxuICAgIHRpbWU6IG51bWJlcixcclxuICAgIHByb2dyZXNzOiBudW1iZXJcclxuKTogdm9pZCB7XHJcbiAgICBjdHguc2F2ZSgpO1xyXG5cclxuICAgIC8vIOa1ruWKqOWBj+enu1xyXG4gICAgY29uc3QgZmxvYXRZID0gTWF0aC5zaW4odGltZSAqIDAuMDA0KSAqIDI7XHJcbiAgICBjb25zdCBidWJibGVYID0gY3g7XHJcbiAgICBjb25zdCBidWJibGVZID0gaGVhZFkgLSAyMCArIGZsb2F0WTtcclxuXHJcbiAgICAvLyDmt6HlhaXmt6Hlh7pcclxuICAgIGNvbnN0IGFscGhhID0gcHJvZ3Jlc3MgPCAwLjFcclxuICAgICAgICA/IHByb2dyZXNzIC8gMC4xXHJcbiAgICAgICAgOiBwcm9ncmVzcyA+IDAuODVcclxuICAgICAgICAgICAgPyAoMSAtIHByb2dyZXNzKSAvIDAuMTVcclxuICAgICAgICAgICAgOiAxO1xyXG4gICAgY3R4Lmdsb2JhbEFscGhhID0gYWxwaGE7XHJcblxyXG4gICAgLy8gLS0tLSDmsJTms6Hog4zmma8gLS0tLVxyXG4gICAgY29uc3QgYncgPSAyMjtcclxuICAgIGNvbnN0IGJoID0gMjA7XHJcbiAgICBjb25zdCBieCA9IGJ1YmJsZVggLSBidyAvIDI7XHJcbiAgICBjb25zdCBieSA9IGJ1YmJsZVkgLSBiaDtcclxuXHJcbiAgICAvLyDnmb3oibLlnIbop5LmsJTms6FcclxuICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZGRkVGNSc7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICByb3VuZEJ1YmJsZShjdHgsIGJ4LCBieSwgYncsIGJoLCA1KTtcclxuICAgIGN0eC5maWxsKCk7XHJcblxyXG4gICAgLy8g5rCU5rOh6L655qGGXHJcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzhCNzM1NSc7XHJcbiAgICBjdHgubGluZVdpZHRoID0gMS41O1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgcm91bmRCdWJibGUoY3R4LCBieCwgYnksIGJ3LCBiaCwgNSk7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgLy8g5rCU5rOh5bCP5bC+5be0ICjkuInop5LlvaLmjIflkJHkuIvmlrkpXHJcbiAgICBjdHguZmlsbFN0eWxlID0gJyNGRkZFRjUnO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyhidWJibGVYIC0gMywgYnkgKyBiaCAtIDAuNSk7XHJcbiAgICBjdHgubGluZVRvKGJ1YmJsZVgsIGJ5ICsgYmggKyA1KTtcclxuICAgIGN0eC5saW5lVG8oYnViYmxlWCArIDMsIGJ5ICsgYmggLSAwLjUpO1xyXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgY3R4LmZpbGwoKTtcclxuICAgIC8vIOWwvuW3tOi+ueahhlxyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJyM4QjczNTUnO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyhidWJibGVYIC0gMywgYnkgKyBiaCk7XHJcbiAgICBjdHgubGluZVRvKGJ1YmJsZVgsIGJ5ICsgYmggKyA1KTtcclxuICAgIGN0eC5saW5lVG8oYnViYmxlWCArIDMsIGJ5ICsgYmgpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgIC8vIC0tLS0g5YOP57Sg6aOO54ix5b+DIC0tLS1cclxuICAgIGRyYXdQaXhlbEhlYXJ0KGN0eCwgYnViYmxlWCwgYnkgKyBiaCAvIDIgLSAxKTtcclxuXHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG59XHJcblxyXG4vKiog55S75LiA5Liq5ZyG6KeS55+p5b2i6Lev5b6EICovXHJcbmZ1bmN0aW9uIHJvdW5kQnViYmxlKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIsIHI6IG51bWJlcikge1xyXG4gICAgY3R4Lm1vdmVUbyh4ICsgciwgeSk7XHJcbiAgICBjdHgubGluZVRvKHggKyB3IC0gciwgeSk7XHJcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgdywgeSwgeCArIHcsIHkgKyByKTtcclxuICAgIGN0eC5saW5lVG8oeCArIHcsIHkgKyBoIC0gcik7XHJcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgdywgeSArIGgsIHggKyB3IC0gciwgeSArIGgpO1xyXG4gICAgY3R4LmxpbmVUbyh4ICsgciwgeSArIGgpO1xyXG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGgsIHgsIHkgKyBoIC0gcik7XHJcbiAgICBjdHgubGluZVRvKHgsIHkgKyByKTtcclxuICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByLCB5KTtcclxuICAgIGN0eC5jbG9zZVBhdGgoKTtcclxufVxyXG5cclxuLyoqIOeUu+S4gOS4quWDj+e0oOmjjue6ouiJsueIseW/gyAo5bGF5Lit5ZyoIGN4LCBjeSkgKi9cclxuZnVuY3Rpb24gZHJhd1BpeGVsSGVhcnQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGN4OiBudW1iZXIsIGN5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHMgPSAxLjU7IC8vIOWDj+e0oOWNleS9jeWkp+Wwj1xyXG4gICAgLy8g57uP5YW45YOP57Sg54ix5b+DIHBhdHRlcm4gKDfDlzYpXHJcbiAgICBjb25zdCBwYXR0ZXJuID0gW1xyXG4gICAgICAgIFswLCAxLCAxLCAwLCAxLCAxLCAwXSxcclxuICAgICAgICBbMSwgMSwgMSwgMSwgMSwgMSwgMV0sXHJcbiAgICAgICAgWzEsIDEsIDEsIDEsIDEsIDEsIDFdLFxyXG4gICAgICAgIFswLCAxLCAxLCAxLCAxLCAxLCAwXSxcclxuICAgICAgICBbMCwgMCwgMSwgMSwgMSwgMCwgMF0sXHJcbiAgICAgICAgWzAsIDAsIDAsIDEsIDAsIDAsIDBdLFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBvZmZzZXRYID0gY3ggLSAocGF0dGVyblswXS5sZW5ndGggKiBzKSAvIDI7XHJcbiAgICBjb25zdCBvZmZzZXRZID0gY3kgLSAocGF0dGVybi5sZW5ndGggKiBzKSAvIDI7XHJcblxyXG4gICAgLy8g5rex57qi6Imy6L655qGGXHJcbiAgICBjdHguZmlsbFN0eWxlID0gJyM4QjAwMDAnO1xyXG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBwYXR0ZXJuLmxlbmd0aDsgcisrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBwYXR0ZXJuW3JdLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXR0ZXJuW3JdW2NdKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZChvZmZzZXRYICsgYyAqIHMpIC0gMC41LFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQob2Zmc2V0WSArIHIgKiBzKSAtIDAuNSxcclxuICAgICAgICAgICAgICAgICAgICBzICsgMSxcclxuICAgICAgICAgICAgICAgICAgICBzICsgMVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOe6ouiJsuWhq+WFhVxyXG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjRTgzMTFBJztcclxuICAgIGZvciAobGV0IHIgPSAwOyByIDwgcGF0dGVybi5sZW5ndGg7IHIrKykge1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgcGF0dGVybltyXS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBpZiAocGF0dGVybltyXVtjXSkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQob2Zmc2V0WCArIGMgKiBzKSxcclxuICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKG9mZnNldFkgKyByICogcyksXHJcbiAgICAgICAgICAgICAgICAgICAgcyxcclxuICAgICAgICAgICAgICAgICAgICBzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g6auY5YWJXHJcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC41KSc7XHJcbiAgICBjdHguZmlsbFJlY3QoTWF0aC5yb3VuZChvZmZzZXRYICsgMSAqIHMpLCBNYXRoLnJvdW5kKG9mZnNldFkgKyAwICogcyksIHMsIHMpO1xyXG4gICAgY3R4LmZpbGxSZWN0KE1hdGgucm91bmQob2Zmc2V0WCArIDEgKiBzKSwgTWF0aC5yb3VuZChvZmZzZXRZICsgMSAqIHMpLCBzLCBzKTtcclxufVxyXG4iXSwibmFtZXMiOlsiVElMRV9TSVpFIiwiUExBWUVSX1NJWkUiLCJXQUxLQUJMRV9NQVAiLCJNQVBfQ09MUyIsIk1BUF9ST1dTIiwiRGlyZWN0aW9uIiwiYXNzZXRQYXRoIiwiQ2F0U3RhdGUiLCJDQVRfRlJBTUVfVyIsIkNBVF9GUkFNRV9IIiwiQ0FUX0NPTFMiLCJDQVRfRFJBV19XIiwiQ0FUX0RSQVdfSCIsIkNBVF9CT0RZIiwiQ0FUX1NQRUVEIiwiQ0FUX0RJUl9UT19ST1ciLCJET1dOIiwiUklHSFQiLCJVUCIsIkxFRlQiLCJDQVRfV0FMS19BTklNIiwiTUFOX0RSQVdfSCIsIk1hdGgiLCJyb3VuZCIsIk1BTl9EUkFXX1ciLCJNQU5fVElMRV9DT0wiLCJNQU5fVElMRV9ST1ciLCJsb2FkSW1hZ2UiLCJzcmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsImltZyIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiY3JlYXRlU3RhdGljTWFuIiwic3ByaXRlIiwiZm9vdFgiLCJmb290WSIsImlkIiwieCIsInkiLCJjcmVhdGVDYXQiLCJzcHJpdGVQYXRoIiwic3RhcnRDb2wiLCJzdGFydFJvdyIsImRpcmVjdGlvbiIsInN0YXRlIiwiYW5pbUZyYW1lIiwiYW5pbVRpbWVyIiwic3RhdGVUaW1lciIsInJhbmRvbUlkbGVUaW1lIiwid2Fsa0R4Iiwid2Fsa0R5IiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21TbGVlcFRpbWUiLCJyYW5kb21XYWxrVGltZSIsImlzQ2F0V2Fsa2FibGUiLCJweCIsInB5IiwicGFkZGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsInBvaW50cyIsInB0IiwiY29sIiwicm93IiwicGlja1JhbmRvbURpcmVjdGlvbiIsImNob2ljZXMiLCJkeCIsImR5IiwiZGlyIiwibGVuZ3RoIiwidXBkYXRlQ2F0IiwiY2F0IiwiciIsIm5ld1giLCJuZXdZIiwicmVuZGVyTWFuTlBDIiwiY3R4IiwibWFuIiwic2F2ZSIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsImRyYXdYIiwiZHJhd1kiLCJkcmF3SW1hZ2UiLCJ3aWR0aCIsImhlaWdodCIsInJlc3RvcmUiLCJyZW5kZXJDYXQiLCJzcmNYIiwic3JjWSIsImdldE1hbkZvb3RZIiwiZ2V0Q2F0Rm9vdFkiLCJIRUFSVF9JTlRFUkFDVElPTl9ESVNUIiwiSEVBUlRfQlVCQkxFX0RVUkFUSU9OIiwiaXNQbGF5ZXJOZWFyTWFuIiwicGxheWVyQ1giLCJwbGF5ZXJDWSIsIm1hbkNYIiwibWFuQ1kiLCJzcXJ0IiwicmVuZGVySGVhcnRCdWJibGUiLCJjeCIsImhlYWRZIiwidGltZSIsInByb2dyZXNzIiwiZmxvYXRZIiwic2luIiwiYnViYmxlWCIsImJ1YmJsZVkiLCJhbHBoYSIsImdsb2JhbEFscGhhIiwiYnciLCJiaCIsImJ4IiwiYnkiLCJmaWxsU3R5bGUiLCJiZWdpblBhdGgiLCJyb3VuZEJ1YmJsZSIsImZpbGwiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsInN0cm9rZSIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsImRyYXdQaXhlbEhlYXJ0IiwidyIsImgiLCJxdWFkcmF0aWNDdXJ2ZVRvIiwiY3kiLCJzIiwicGF0dGVybiIsIm9mZnNldFgiLCJvZmZzZXRZIiwiYyIsImZpbGxSZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/game/npc.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/game/renderer.ts":
/*!******************************!*\
  !*** ./src/game/renderer.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderAmbientLight: function() { return /* binding */ renderAmbientLight; },\n/* harmony export */   renderBackground: function() { return /* binding */ renderBackground; },\n/* harmony export */   renderForeground: function() { return /* binding */ renderForeground; },\n/* harmony export */   renderFrameOverlay: function() { return /* binding */ renderFrameOverlay; },\n/* harmony export */   renderInteractableHighlights: function() { return /* binding */ renderInteractableHighlights; },\n/* harmony export */   renderPlayer: function() { return /* binding */ renderPlayer; },\n/* harmony export */   renderPromptBubble: function() { return /* binding */ renderPromptBubble; },\n/* harmony export */   renderSceneYSorted: function() { return /* binding */ renderSceneYSorted; }\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./src/game/constants.ts\");\n/**\r\n * üé® Ê∏≤ÊüìÂºïÊìé\r\n *\r\n * ËÉåÊôØ‰ΩøÁî® sprites.ts ÁöÑÈ¢ÑÊ∏≤Êüì Canvas (‰∏ÄÂ∏ßÁªòÂà∂ 936 ‰∏™ tile)Ôºå\r\n * ‰πãÂêéÊØèÂ∏ß‰ªÖ drawImage ‰∏ÄÊ¨° + ËßíËâ≤ / Á≤íÂ≠ê / ÂÖâÁÖßÂè†Âä†„ÄÇ\r\n */ \n// ==================== ËÉåÊôØ ====================\nfunction renderBackground(ctx, bg) {\n    if (bg) {\n        ctx.drawImage(bg, 0, 0);\n    } else {\n        ctx.fillStyle = \"#050303\";\n        ctx.fillRect(0, 0, _constants__WEBPACK_IMPORTED_MODULE_0__.MAP_COLS * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE, _constants__WEBPACK_IMPORTED_MODULE_0__.MAP_ROWS * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE);\n    }\n}\n// ==================== ÂâçÊôØ (Ê∑±Â∫¶ÈÅÆÊå°) ====================\nfunction renderForeground(ctx, fg) {\n    if (fg) {\n        ctx.drawImage(fg, 0, 0);\n    }\n}\nfunction renderSceneYSorted(ctx, foregroundRows, entities) {\n    // Êåâ footY ÊéíÂ∫èÂÆû‰Ωì\n    const sorted = [\n        ...entities\n    ].sort((a, b)=>a.footY - b.footY);\n    let entityIdx = 0;\n    for(let row = 0; row < foregroundRows.length; row++){\n        const rowCanvas = foregroundRows[row];\n        const rowBottomY = (row + 1) * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n        // Âú®Ëøô‰∏™ÂâçÊôØË°å‰πãÂâç, ÁîªÂá∫ÊâÄÊúâ footY <= rowBottomY ÁöÑÂÆû‰Ωì\n        while(entityIdx < sorted.length && sorted[entityIdx].footY <= rowBottomY){\n            sorted[entityIdx].render(ctx);\n            entityIdx++;\n        }\n        // ÁîªËøô‰∏ÄË°åÂâçÊôØ\n        if (rowCanvas) {\n            ctx.drawImage(rowCanvas, 0, row * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE);\n        }\n    }\n    // ÁîªÂá∫Ââ©‰ΩôÂÆû‰Ωì (Âú®ÊâÄÊúâÂâçÊôØË°å‰πã‰∏ã)\n    while(entityIdx < sorted.length){\n        sorted[entityIdx].render(ctx);\n        entityIdx++;\n    }\n}\n// ==================== ÊàøÈó¥Ê°ÜÊû∂Ë¶ÜÁõñÂ±Ç (ÂßãÁªàÈÅÆÊå°Áé©ÂÆ∂) ====================\nfunction renderFrameOverlay(ctx, frameOverlay) {\n    if (frameOverlay) {\n        ctx.drawImage(frameOverlay, 0, 0);\n    }\n}\n// ==================== ÂèØ‰∫íÂä®Áâ©‰ΩìÈ´ò‰∫Æ ====================\nfunction renderInteractableHighlights(ctx, nearbyId, time) {\n    if (!nearbyId) return;\n    const obj = _constants__WEBPACK_IMPORTED_MODULE_0__.INTERACTABLES.find((o)=>o.id === nearbyId);\n    if (!obj) return;\n    const px = obj.x * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n    const py = obj.y * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n    const w = obj.width * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n    const h = obj.height * _constants__WEBPACK_IMPORTED_MODULE_0__.TILE_SIZE;\n    const glow = Math.sin(time * 0.005) * 0.3 + 0.5;\n    ctx.save();\n    ctx.strokeStyle = \"rgba(255, 215, 0, \".concat(glow, \")\");\n    ctx.lineWidth = 3;\n    ctx.shadowColor = \"#FFD700\";\n    ctx.shadowBlur = 12 * glow;\n    ctx.strokeRect(px + 1, py + 1, w - 2, h - 2);\n    ctx.restore();\n}\n// ==================== Áé©ÂÆ∂Á≤æÁÅµÂèÇÊï∞ ====================\n/**\r\n * Á≤æÁÅµÂõæÂ∏ÉÂ±Ä: 3 Âàó √ó 4 Ë°å, ÊØèÂ∏ß 407√ó661 ÂÉèÁ¥†\r\n * Ë°åÈ°∫Â∫è: down=0, left=1, right=2, up=3\r\n * ÂàóÈ°∫Â∫è: frame1(Á´ôÁ´ã), frame2(Â∑¶ËÑö), frame3(Âè≥ËÑö)\r\n * Ë°åËµ∞Âä®ÁîªÂ∫èÂàó: 1‚Üí2‚Üí1‚Üí3 (Á´ôÁ´ã‚ÜíÂ∑¶ËÑö‚ÜíÁ´ôÁ´ã‚ÜíÂè≥ËÑö)\r\n */ const SPRITE_FRAME_W = 429;\nconst SPRITE_FRAME_H = 583;\n/** ÊñπÂêë ‚Üí Á≤æÁÅµË°åÊò†Â∞Ñ: Down=0, Left=1, Right=2, Up=3 */ const DIR_TO_SPRITE_ROW = {\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.DOWN]: 0,\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.LEFT]: 1,\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.RIGHT]: 2,\n    [_constants__WEBPACK_IMPORTED_MODULE_0__.Direction.UP]: 3\n};\n/** Ë°åËµ∞Âä®ÁîªÂ∏ßÂ∫èÂàó: ÂàóÁ¥¢Âºï 0=Á´ôÁ´ã, 1=Â∑¶ËÑö, 2=Âè≥ËÑö ‚Üí Êí≠Êîæ 0,1,0,2 */ const WALK_ANIM_SEQUENCE = [\n    0,\n    1,\n    0,\n    2\n];\n/** Âú®Ê∏∏Êàè‰∏≠ÁöÑÊòæÁ§∫Â∞∫ÂØ∏ (ÈÄÇÈÖç PLAYER_SIZE=28 ÁöÑÁ¢∞ÊíûÁõí) */ const DRAW_W = 38;\nconst DRAW_H = Math.round(DRAW_W * (SPRITE_FRAME_H / SPRITE_FRAME_W)); // ‚âà62\n// ==================== Áé©ÂÆ∂Ê∏≤Êüì ====================\nfunction renderPlayer(ctx, x, y, direction, animFrame, isMoving, playerSprite) {\n    if (!playerSprite) {\n        ctx.fillStyle = \"#FF8FAB\";\n        ctx.beginPath();\n        ctx.arc(x + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2, y + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2, _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2, 0, Math.PI * 2);\n        ctx.fill();\n        return;\n    }\n    ctx.save();\n    // ÈÄâÊã©Á≤æÁÅµÂ∏ß: Á´ôÁ´ã=col 0, Ë°åËµ∞=ÊåâÂ∫èÂàó 0‚Üí1‚Üí0‚Üí2\n    const spriteRow = DIR_TO_SPRITE_ROW[direction];\n    const col = isMoving ? WALK_ANIM_SEQUENCE[animFrame % WALK_ANIM_SEQUENCE.length] : 0;\n    const srcX = col * SPRITE_FRAME_W;\n    const srcY = spriteRow * SPRITE_FRAME_H;\n    // ÁªòÂà∂‰ΩçÁΩÆ: ‰ª•Á¢∞ÊíûÁõí‰∏∫Âü∫ÂáÜÂ±Ö‰∏≠, Á≤æÁÅµÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê (ÂáèÂ∞èË∑≥Âä®)\n    const drawX = x + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2 - DRAW_W / 2;\n    const drawY = y + _constants__WEBPACK_IMPORTED_MODULE_0__.PLAYER_SIZE / 2 - DRAW_H / 2;\n    ctx.drawImage(playerSprite, srcX, srcY, SPRITE_FRAME_W, SPRITE_FRAME_H, drawX, drawY, DRAW_W, DRAW_H);\n    ctx.restore();\n}\n// ==================== ‰∫íÂä®ÊèêÁ§∫Ê∞îÊ≥° ====================\nfunction renderPromptBubble(ctx, x, y, label, time) {\n    const bubbleY = y - 24 + Math.sin(time * 0.004) * 3;\n    const text = \"Êåâ E ‚Äî \".concat(label);\n    ctx.save();\n    ctx.font = '11px \"Press Start 2P\", monospace';\n    ctx.textAlign = \"center\";\n    const metrics = ctx.measureText(text);\n    const padding = 10;\n    const w = metrics.width + padding * 2;\n    const h = 24;\n    ctx.fillStyle = \"rgba(0,0,0,0.9)\";\n    roundRect(ctx, x - w / 2, bubbleY - h / 2, w, h, 8);\n    ctx.fill();\n    ctx.strokeStyle = \"#FFD700\";\n    ctx.lineWidth = 2;\n    roundRect(ctx, x - w / 2, bubbleY - h / 2, w, h, 8);\n    ctx.stroke();\n    ctx.strokeStyle = \"rgba(255,215,0,0.3)\";\n    ctx.lineWidth = 1;\n    roundRect(ctx, x - w / 2 + 2, bubbleY - h / 2 + 2, w - 4, h - 4, 6);\n    ctx.stroke();\n    ctx.fillStyle = \"rgba(0,0,0,0.9)\";\n    ctx.beginPath();\n    ctx.moveTo(x - 6, bubbleY + h / 2);\n    ctx.lineTo(x, bubbleY + h / 2 + 7);\n    ctx.lineTo(x + 6, bubbleY + h / 2);\n    ctx.closePath();\n    ctx.fill();\n    ctx.strokeStyle = \"#FFD700\";\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(x - 6, bubbleY + h / 2);\n    ctx.lineTo(x, bubbleY + h / 2 + 7);\n    ctx.lineTo(x + 6, bubbleY + h / 2);\n    ctx.stroke();\n    ctx.fillStyle = \"#000000\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillText(text, x + 1, bubbleY + 1);\n    ctx.fillStyle = \"#FFFFFF\";\n    ctx.fillText(text, x, bubbleY);\n    ctx.fillStyle = \"#FFD700\";\n    ctx.fillText(\"E\", x - metrics.width / 2 + 16, bubbleY);\n    ctx.restore();\n}\n// ==================== ÂÖâÁÖß / Ê∞õÂõ¥ ====================\nfunction renderAmbientLight(ctx, _time) {\n    const w = ctx.canvas.width;\n    const h = ctx.canvas.height;\n    // ÊöñËâ≤Ë∞ÉÂè†Âä†\n    ctx.fillStyle = \"rgba(255, 240, 200, 0.03)\";\n    ctx.fillRect(0, 0, w, h);\n    // Vignette\n    const grad = ctx.createRadialGradient(w / 2, h / 2, w * 0.3, w / 2, h / 2, w * 0.7);\n    grad.addColorStop(0, \"rgba(0,0,0,0)\");\n    grad.addColorStop(1, \"rgba(0,0,0,0.12)\");\n    ctx.fillStyle = grad;\n    ctx.fillRect(0, 0, w, h);\n}\n// ==================== ËæÖÂä© ====================\nfunction roundRect(ctx, x, y, w, h, r) {\n    ctx.beginPath();\n    ctx.moveTo(x + r, y);\n    ctx.lineTo(x + w - r, y);\n    ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n    ctx.lineTo(x + w, y + h - r);\n    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    ctx.lineTo(x + r, y + h);\n    ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n    ctx.lineTo(x, y + r);\n    ctx.quadraticCurveTo(x, y, x + r, y);\n    ctx.closePath();\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9nYW1lL3JlbmRlcmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOzs7OztDQUtDLEdBUW9CO0FBRXJCLCtDQUErQztBQUN4QyxTQUFTTSxpQkFDZEMsR0FBNkIsRUFDN0JDLEVBQTRCO0lBRTVCLElBQUlBLElBQUk7UUFDTkQsSUFBSUUsU0FBUyxDQUFDRCxJQUFJLEdBQUc7SUFDdkIsT0FBTztRQUNMRCxJQUFJRyxTQUFTLEdBQUc7UUFDaEJILElBQUlJLFFBQVEsQ0FBQyxHQUFHLEdBQUdQLGdEQUFRQSxHQUFHSixpREFBU0EsRUFBRUssZ0RBQVFBLEdBQUdMLGlEQUFTQTtJQUMvRDtBQUNGO0FBRUEsc0RBQXNEO0FBQy9DLFNBQVNZLGlCQUNkTCxHQUE2QixFQUM3Qk0sRUFBNEI7SUFFNUIsSUFBSUEsSUFBSTtRQUNOTixJQUFJRSxTQUFTLENBQUNJLElBQUksR0FBRztJQUN2QjtBQUNGO0FBYU8sU0FBU0MsbUJBQ2RQLEdBQTZCLEVBQzdCUSxjQUE0QyxFQUM1Q0MsUUFBdUI7SUFFdkIsZUFBZTtJQUNmLE1BQU1DLFNBQVM7V0FBSUQ7S0FBUyxDQUFDRSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRUUsS0FBSyxHQUFHRCxFQUFFQyxLQUFLO0lBQzdELElBQUlDLFlBQVk7SUFFaEIsSUFBSyxJQUFJQyxNQUFNLEdBQUdBLE1BQU1SLGVBQWVTLE1BQU0sRUFBRUQsTUFBTztRQUNwRCxNQUFNRSxZQUFZVixjQUFjLENBQUNRLElBQUk7UUFDckMsTUFBTUcsYUFBYSxDQUFDSCxNQUFNLEtBQUt2QixpREFBU0E7UUFFeEMseUNBQXlDO1FBQ3pDLE1BQU9zQixZQUFZTCxPQUFPTyxNQUFNLElBQUlQLE1BQU0sQ0FBQ0ssVUFBVSxDQUFDRCxLQUFLLElBQUlLLFdBQVk7WUFDekVULE1BQU0sQ0FBQ0ssVUFBVSxDQUFDSyxNQUFNLENBQUNwQjtZQUN6QmU7UUFDRjtRQUVBLFNBQVM7UUFDVCxJ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L0QsSUFBSUc7SUFDdEJwQyxJQUFJaUcsZ0JBQWdCLENBQUNsRSxHQUFHRSxJQUFJRyxHQUFHTCxHQUFHRSxJQUFJRyxJQUFJNEQ7SUFDMUNoRyxJQUFJc0YsTUFBTSxDQUFDdkQsR0FBR0UsSUFBSStEO0lBQ2xCaEcsSUFBSWlHLGdCQUFnQixDQUFDbEUsR0FBR0UsR0FBR0YsSUFBSWlFLEdBQUcvRDtJQUNsQ2pDLElBQUl1RixTQUFTO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2dhbWUvcmVuZGVyZXIudHM/MzY5NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog8J+OqCDmuLLmn5PlvJXmk45cclxuICpcclxuICog6IOM5pmv5L2/55SoIHNwcml0ZXMudHMg55qE6aKE5riy5p+TIENhbnZhcyAo5LiA5bin57uY5Yi2IDkzNiDkuKogdGlsZSnvvIxcclxuICog5LmL5ZCO5q+P5bin5LuFIGRyYXdJbWFnZSDkuIDmrKEgKyDop5LoibIgLyDnspLlrZAgLyDlhYnnhaflj6DliqDjgIJcclxuICovXHJcbmltcG9ydCB7XHJcbiAgVElMRV9TSVpFLFxyXG4gIFBMQVlFUl9TSVpFLFxyXG4gIERpcmVjdGlvbixcclxuICBJTlRFUkFDVEFCTEVTLFxyXG4gIE1BUF9DT0xTLFxyXG4gIE1BUF9ST1dTLFxyXG59IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOiDjOaZryA9PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQmFja2dyb3VuZChcclxuICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcclxuICBiZzogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsXHJcbikge1xyXG4gIGlmIChiZykge1xyXG4gICAgY3R4LmRyYXdJbWFnZShiZywgMCwgMCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGN0eC5maWxsU3R5bGUgPSAnIzA1MDMwMyc7XHJcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgTUFQX0NPTFMgKiBUSUxFX1NJWkUsIE1BUF9ST1dTICogVElMRV9TSVpFKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOWJjeaZryAo5rex5bqm6YGu5oyhKSA9PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRm9yZWdyb3VuZChcclxuICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcclxuICBmZzogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsXHJcbikge1xyXG4gIGlmIChmZykge1xyXG4gICAgY3R4LmRyYXdJbWFnZShmZywgMCwgMCk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSBZLVNvcnQg5Zy65pmv5riy5p+TID09PT09PT09PT09PT09PT09PT09XHJcbi8qKlxyXG4gKiDpgJDooYwgWS1zb3J0IOa4suafkzog5bCG5YmN5pmvIHRpbGUg6KGM5LiO5omA5pyJ5a6e5L2TKOeOqeWutitOUEMp5oyJIFkg5Z2Q5qCH5Lqk6ZSZ57uY5Yi244CCXHJcbiAqXHJcbiAqIGVudGl0aWVzOiDpnIDopoEgWS1zb3J0IOeahOWunuS9k+WIl+ihqCwg5q+P5Liq5YyF5ZCrIGZvb3RZIOWSjCByZW5kZXIg5Zue6LCD44CCXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFlTb3J0RW50aXR5IHtcclxuICBmb290WTogbnVtYmVyO1xyXG4gIHJlbmRlcjogKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU2NlbmVZU29ydGVkKFxyXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxyXG4gIGZvcmVncm91bmRSb3dzOiAoSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsKVtdLFxyXG4gIGVudGl0aWVzOiBZU29ydEVudGl0eVtdXHJcbikge1xyXG4gIC8vIOaMiSBmb290WSDmjpLluo/lrp7kvZNcclxuICBjb25zdCBzb3J0ZWQgPSBbLi4uZW50aXRpZXNdLnNvcnQoKGEsIGIpID0+IGEuZm9vdFkgLSBiLmZvb3RZKTtcclxuICBsZXQgZW50aXR5SWR4ID0gMDtcclxuXHJcbiAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgZm9yZWdyb3VuZFJvd3MubGVuZ3RoOyByb3crKykge1xyXG4gICAgY29uc3Qgcm93Q2FudmFzID0gZm9yZWdyb3VuZFJvd3Nbcm93XTtcclxuICAgIGNvbnN0IHJvd0JvdHRvbVkgPSAocm93ICsgMSkgKiBUSUxFX1NJWkU7XHJcblxyXG4gICAgLy8g5Zyo6L+Z5Liq5YmN5pmv6KGM5LmL5YmNLCDnlLvlh7rmiYDmnIkgZm9vdFkgPD0gcm93Qm90dG9tWSDnmoTlrp7kvZNcclxuICAgIHdoaWxlIChlbnRpdHlJZHggPCBzb3J0ZWQubGVuZ3RoICYmIHNvcnRlZFtlbnRpdHlJZHhdLmZvb3RZIDw9IHJvd0JvdHRvbVkpIHtcclxuICAgICAgc29ydGVkW2VudGl0eUlkeF0ucmVuZGVyKGN0eCk7XHJcbiAgICAgIGVudGl0eUlkeCsrO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOeUu+i/meS4gOihjOWJjeaZr1xyXG4gICAgaWYgKHJvd0NhbnZhcykge1xyXG4gICAgICBjdHguZHJhd0ltYWdlKHJvd0NhbnZhcywgMCwgcm93ICogVElMRV9TSVpFKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOeUu+WHuuWJqeS9meWunuS9kyAo5Zyo5omA5pyJ5YmN5pmv6KGM5LmL5LiLKVxyXG4gIHdoaWxlIChlbnRpdHlJZHggPCBzb3J0ZWQubGVuZ3RoKSB7XHJcbiAgICBzb3J0ZWRbZW50aXR5SWR4XS5yZW5kZXIoY3R4KTtcclxuICAgIGVudGl0eUlkeCsrO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5oi/6Ze05qGG5p626KaG55uW5bGCICjlp4vnu4jpga7mjKHnjqnlrrYpID09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJGcmFtZU92ZXJsYXkoXHJcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgZnJhbWVPdmVybGF5OiBIVE1MQ2FudmFzRWxlbWVudCB8IG51bGxcclxuKSB7XHJcbiAgaWYgKGZyYW1lT3ZlcmxheSkge1xyXG4gICAgY3R4LmRyYXdJbWFnZShmcmFtZU92ZXJsYXksIDAsIDApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5Y+v5LqS5Yqo54mp5L2T6auY5LquID09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJJbnRlcmFjdGFibGVIaWdobGlnaHRzKFxyXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxyXG4gIG5lYXJieUlkOiBzdHJpbmcgfCBudWxsLFxyXG4gIHRpbWU6IG51bWJlclxyXG4pIHtcclxuICBpZiAoIW5lYXJieUlkKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IG9iaiA9IElOVEVSQUNUQUJMRVMuZmluZCgobykgPT4gby5pZCA9PT0gbmVhcmJ5SWQpO1xyXG4gIGlmICghb2JqKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IHB4ID0gb2JqLnggKiBUSUxFX1NJWkU7XHJcbiAgY29uc3QgcHkgPSBvYmoueSAqIFRJTEVfU0laRTtcclxuICBjb25zdCB3ID0gb2JqLndpZHRoICogVElMRV9TSVpFO1xyXG4gIGNvbnN0IGggPSBvYmouaGVpZ2h0ICogVElMRV9TSVpFO1xyXG5cclxuICBjb25zdCBnbG93ID0gTWF0aC5zaW4odGltZSAqIDAuMDA1KSAqIDAuMyArIDAuNTtcclxuXHJcbiAgY3R4LnNhdmUoKTtcclxuICBjdHguc3Ryb2tlU3R5bGUgPSBgcmdiYSgyNTUsIDIxNSwgMCwgJHtnbG93fSlgO1xyXG4gIGN0eC5saW5lV2lkdGggPSAzO1xyXG4gIGN0eC5zaGFkb3dDb2xvciA9ICcjRkZENzAwJztcclxuICBjdHguc2hhZG93Qmx1ciA9IDEyICogZ2xvdztcclxuICBjdHguc3Ryb2tlUmVjdChweCArIDEsIHB5ICsgMSwgdyAtIDIsIGggLSAyKTtcclxuICBjdHgucmVzdG9yZSgpO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSDnjqnlrrbnsr7ngbXlj4LmlbAgPT09PT09PT09PT09PT09PT09PT1cclxuLyoqXHJcbiAqIOeyvueBteWbvuW4g+WxgDogMyDliJcgw5cgNCDooYwsIOavj+W4pyA0MDfDlzY2MSDlg4/ntKBcclxuICog6KGM6aG65bqPOiBkb3duPTAsIGxlZnQ9MSwgcmlnaHQ9MiwgdXA9M1xyXG4gKiDliJfpobrluo86IGZyYW1lMSjnq5nnq4spLCBmcmFtZTIo5bem6ISaKSwgZnJhbWUzKOWPs+iEmilcclxuICog6KGM6LWw5Yqo55S75bqP5YiXOiAx4oaSMuKGkjHihpIzICjnq5nnq4vihpLlt6bohJrihpLnq5nnq4vihpLlj7PohJopXHJcbiAqL1xyXG5jb25zdCBTUFJJVEVfRlJBTUVfVyA9IDQyOTtcclxuY29uc3QgU1BSSVRFX0ZSQU1FX0ggPSA1ODM7XHJcbi8qKiDmlrnlkJEg4oaSIOeyvueBteihjOaYoOWwhDogRG93bj0wLCBMZWZ0PTEsIFJpZ2h0PTIsIFVwPTMgKi9cclxuY29uc3QgRElSX1RPX1NQUklURV9ST1c6IFJlY29yZDxEaXJlY3Rpb24sIG51bWJlcj4gPSB7XHJcbiAgW0RpcmVjdGlvbi5ET1dOXTogMCxcclxuICBbRGlyZWN0aW9uLkxFRlRdOiAxLFxyXG4gIFtEaXJlY3Rpb24uUklHSFRdOiAyLFxyXG4gIFtEaXJlY3Rpb24uVVBdOiAzLFxyXG59O1xyXG4vKiog6KGM6LWw5Yqo55S75bin5bqP5YiXOiDliJfntKLlvJUgMD3nq5nnq4ssIDE95bem6ISaLCAyPeWPs+iEmiDihpIg5pKt5pS+IDAsMSwwLDIgKi9cclxuY29uc3QgV0FMS19BTklNX1NFUVVFTkNFID0gWzAsIDEsIDAsIDJdO1xyXG4vKiog5Zyo5ri45oiP5Lit55qE5pi+56S65bC65a+4ICjpgILphY0gUExBWUVSX1NJWkU9Mjgg55qE56Kw5pKe55uSKSAqL1xyXG5jb25zdCBEUkFXX1cgPSAzODtcclxuY29uc3QgRFJBV19IID0gTWF0aC5yb3VuZChEUkFXX1cgKiAoU1BSSVRFX0ZSQU1FX0ggLyBTUFJJVEVfRlJBTUVfVykpOyAvLyDiiYg2MlxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g546p5a625riy5p+TID09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJQbGF5ZXIoXHJcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgeDogbnVtYmVyLFxyXG4gIHk6IG51bWJlcixcclxuICBkaXJlY3Rpb246IERpcmVjdGlvbixcclxuICBhbmltRnJhbWU6IG51bWJlcixcclxuICBpc01vdmluZzogYm9vbGVhbixcclxuICBwbGF5ZXJTcHJpdGU/OiBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbFxyXG4pIHtcclxuICBpZiAoIXBsYXllclNwcml0ZSkge1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjRkY4RkFCJztcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5hcmMoeCArIFBMQVlFUl9TSVpFIC8gMiwgeSArIFBMQVlFUl9TSVpFIC8gMiwgUExBWUVSX1NJWkUgLyAyLCAwLCBNYXRoLlBJICogMik7XHJcbiAgICBjdHguZmlsbCgpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY3R4LnNhdmUoKTtcclxuXHJcbiAgLy8g6YCJ5oup57K+54G15binOiDnq5nnq4s9Y29sIDAsIOihjOi1sD3mjInluo/liJcgMOKGkjHihpIw4oaSMlxyXG4gIGNvbnN0IHNwcml0ZVJvdyA9IERJUl9UT19TUFJJVEVfUk9XW2RpcmVjdGlvbl07XHJcbiAgY29uc3QgY29sID0gaXNNb3ZpbmcgPyBXQUxLX0FOSU1fU0VRVUVOQ0VbYW5pbUZyYW1lICUgV0FMS19BTklNX1NFUVVFTkNFLmxlbmd0aF0gOiAwO1xyXG4gIGNvbnN0IHNyY1ggPSBjb2wgKiBTUFJJVEVfRlJBTUVfVztcclxuICBjb25zdCBzcmNZID0gc3ByaXRlUm93ICogU1BSSVRFX0ZSQU1FX0g7XHJcblxyXG4gIC8vIOe7mOWItuS9jee9rjog5Lul56Kw5pKe55uS5Li65Z+65YeG5bGF5LitLCDnsr7ngbXlnoLnm7TlsYXkuK3lr7npvZAgKOWHj+Wwj+i3s+WKqClcclxuICBjb25zdCBkcmF3WCA9IHggKyBQTEFZRVJfU0laRSAvIDIgLSBEUkFXX1cgLyAyO1xyXG4gIGNvbnN0IGRyYXdZID0geSArIFBMQVlFUl9TSVpFIC8gMiAtIERSQVdfSCAvIDI7XHJcblxyXG4gIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICBwbGF5ZXJTcHJpdGUsXHJcbiAgICBzcmNYLCBzcmNZLCBTUFJJVEVfRlJBTUVfVywgU1BSSVRFX0ZSQU1FX0gsXHJcbiAgICBkcmF3WCwgZHJhd1ksIERSQVdfVywgRFJBV19IXHJcbiAgKTtcclxuXHJcbiAgY3R4LnJlc3RvcmUoKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5LqS5Yqo5o+Q56S65rCU5rOhID09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJQcm9tcHRCdWJibGUoXHJcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgeDogbnVtYmVyLFxyXG4gIHk6IG51bWJlcixcclxuICBsYWJlbDogc3RyaW5nLFxyXG4gIHRpbWU6IG51bWJlclxyXG4pIHtcclxuICBjb25zdCBidWJibGVZID0geSAtIDI0ICsgTWF0aC5zaW4odGltZSAqIDAuMDA0KSAqIDM7XHJcbiAgY29uc3QgdGV4dCA9IGDmjIkgRSDigJQgJHtsYWJlbH1gO1xyXG5cclxuICBjdHguc2F2ZSgpO1xyXG4gIGN0eC5mb250ID0gJzExcHggXCJQcmVzcyBTdGFydCAyUFwiLCBtb25vc3BhY2UnO1xyXG4gIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICBjb25zdCBtZXRyaWNzID0gY3R4Lm1lYXN1cmVUZXh0KHRleHQpO1xyXG4gIGNvbnN0IHBhZGRpbmcgPSAxMDtcclxuICBjb25zdCB3ID0gbWV0cmljcy53aWR0aCArIHBhZGRpbmcgKiAyO1xyXG4gIGNvbnN0IGggPSAyNDtcclxuXHJcbiAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuOSknO1xyXG4gIHJvdW5kUmVjdChjdHgsIHggLSB3IC8gMiwgYnViYmxlWSAtIGggLyAyLCB3LCBoLCA4KTtcclxuICBjdHguZmlsbCgpO1xyXG5cclxuICBjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGRDcwMCc7XHJcbiAgY3R4LmxpbmVXaWR0aCA9IDI7XHJcbiAgcm91bmRSZWN0KGN0eCwgeCAtIHcgLyAyLCBidWJibGVZIC0gaCAvIDIsIHcsIGgsIDgpO1xyXG4gIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMjU1LDIxNSwwLDAuMyknO1xyXG4gIGN0eC5saW5lV2lkdGggPSAxO1xyXG4gIHJvdW5kUmVjdChjdHgsIHggLSB3IC8gMiArIDIsIGJ1YmJsZVkgLSBoIC8gMiArIDIsIHcgLSA0LCBoIC0gNCwgNik7XHJcbiAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMC45KSc7XHJcbiAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gIGN0eC5tb3ZlVG8oeCAtIDYsIGJ1YmJsZVkgKyBoIC8gMik7XHJcbiAgY3R4LmxpbmVUbyh4LCBidWJibGVZICsgaCAvIDIgKyA3KTtcclxuICBjdHgubGluZVRvKHggKyA2LCBidWJibGVZICsgaCAvIDIpO1xyXG4gIGN0eC5jbG9zZVBhdGgoKTtcclxuICBjdHguZmlsbCgpO1xyXG4gIGN0eC5zdHJva2VTdHlsZSA9ICcjRkZENzAwJztcclxuICBjdHgubGluZVdpZHRoID0gMjtcclxuICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgY3R4Lm1vdmVUbyh4IC0gNiwgYnViYmxlWSArIGggLyAyKTtcclxuICBjdHgubGluZVRvKHgsIGJ1YmJsZVkgKyBoIC8gMiArIDcpO1xyXG4gIGN0eC5saW5lVG8oeCArIDYsIGJ1YmJsZVkgKyBoIC8gMik7XHJcbiAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICBjdHguZmlsbFN0eWxlID0gJyMwMDAwMDAnO1xyXG4gIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuICBjdHguZmlsbFRleHQodGV4dCwgeCArIDEsIGJ1YmJsZVkgKyAxKTtcclxuICBjdHguZmlsbFN0eWxlID0gJyNGRkZGRkYnO1xyXG4gIGN0eC5maWxsVGV4dCh0ZXh0LCB4LCBidWJibGVZKTtcclxuICBjdHguZmlsbFN0eWxlID0gJyNGRkQ3MDAnO1xyXG4gIGN0eC5maWxsVGV4dCgnRScsIHggLSBtZXRyaWNzLndpZHRoIC8gMiArIDE2LCBidWJibGVZKTtcclxuXHJcbiAgY3R4LnJlc3RvcmUoKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5YWJ54WnIC8g5rCb5Zu0ID09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJBbWJpZW50TGlnaHQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIF90aW1lOiBudW1iZXIpIHtcclxuICBjb25zdCB3ID0gY3R4LmNhbnZhcy53aWR0aDtcclxuICBjb25zdCBoID0gY3R4LmNhbnZhcy5oZWlnaHQ7XHJcblxyXG4gIC8vIOaaluiJsuiwg+WPoOWKoFxyXG4gIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI0MCwgMjAwLCAwLjAzKSc7XHJcbiAgY3R4LmZpbGxSZWN0KDAsIDAsIHcsIGgpO1xyXG5cclxuICAvLyBWaWduZXR0ZVxyXG4gIGNvbnN0IGdyYWQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQodyAvIDIsIGggLyAyLCB3ICogMC4zLCB3IC8gMiwgaCAvIDIsIHcgKiAwLjcpO1xyXG4gIGdyYWQuYWRkQ29sb3JTdG9wKDAsICdyZ2JhKDAsMCwwLDApJyk7XHJcbiAgZ3JhZC5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMCwwLDAsMC4xMiknKTtcclxuICBjdHguZmlsbFN0eWxlID0gZ3JhZDtcclxuICBjdHguZmlsbFJlY3QoMCwgMCwgdywgaCk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOi+heWKqSA9PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiByb3VuZFJlY3QoXHJcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyLCByOiBudW1iZXJcclxuKSB7XHJcbiAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gIGN0eC5tb3ZlVG8oeCArIHIsIHkpO1xyXG4gIGN0eC5saW5lVG8oeCArIHcgLSByLCB5KTtcclxuICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgdywgeSwgeCArIHcsIHkgKyByKTtcclxuICBjdHgubGluZVRvKHggKyB3LCB5ICsgaCAtIHIpO1xyXG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3LCB5ICsgaCwgeCArIHcgLSByLCB5ICsgaCk7XHJcbiAgY3R4LmxpbmVUbyh4ICsgciwgeSArIGgpO1xyXG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHkgKyBoLCB4LCB5ICsgaCAtIHIpO1xyXG4gIGN0eC5saW5lVG8oeCwgeSArIHIpO1xyXG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByLCB5KTtcclxuICBjdHguY2xvc2VQYXRoKCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlRJTEVfU0laRSIsIlBMQVlFUl9TSVpFIiwiRGlyZWN0aW9uIiwiSU5URVJBQ1RBQkxFUyIsIk1BUF9DT0xTIiwiTUFQX1JPV1MiLCJyZW5kZXJCYWNrZ3JvdW5kIiwiY3R4IiwiYmciLCJkcmF3SW1hZ2UiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsInJlbmRlckZvcmVncm91bmQiLCJmZyIsInJlbmRlclNjZW5lWVNvcnRlZCIsImZvcmVncm91bmRSb3dzIiwiZW50aXRpZXMiLCJzb3J0ZWQiLCJzb3J0IiwiYSIsImIiLCJmb290WSIsImVudGl0eUlkeCIsInJvdyIsImxlbmd0aCIsInJvd0NhbnZhcyIsInJvd0JvdHRvbVkiLCJyZW5kZXIiLCJyZW5kZXJGcmFtZU92ZXJsYXkiLCJmcmFtZU92ZXJsYXkiLCJyZW5kZXJJbnRlcmFjdGFibGVIaWdobGlnaHRzIiwibmVhcmJ5SWQiLCJ0aW1lIiwib2JqIiwiZmluZCIsIm8iLCJpZCIsInB4IiwieCIsInB5IiwieSIsInciLCJ3aWR0aCIsImgiLCJoZWlnaHQiLCJnbG93IiwiTWF0aCIsInNpbiIsInNhdmUiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsInNoYWRvd0NvbG9yIiwic2hhZG93Qmx1ciIsInN0cm9rZVJlY3QiLCJyZXN0b3JlIiwiU1BSSVRFX0ZSQU1FX1ciLCJTUFJJVEVfRlJBTUVfSCIsIkRJUl9UT19TUFJJVEVfUk9XIiwiRE9XTiIsIkxFRlQiLCJSSUdIVCIsIlVQIiwiV0FMS19BTklNX1NFUVVFTkNFIiwiRFJBV19XIiwiRFJBV19IIiwicm91bmQiLCJyZW5kZXJQbGF5ZXIiLCJkaXJlY3Rpb24iLCJhbmltRnJhbWUiLCJpc01vdmluZyIsInBsYXllclNwcml0ZSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiZmlsbCIsInNwcml0ZVJvdyIsImNvbCIsInNyY1giLCJzcmNZIiwiZHJhd1giLCJkcmF3WSIsInJlbmRlclByb21wdEJ1YmJsZSIsImxhYmVsIiwiYnViYmxlWSIsInRleHQiLCJmb250IiwidGV4dEFsaWduIiwibWV0cmljcyIsIm1lYXN1cmVUZXh0IiwicGFkZGluZyIsInJvdW5kUmVjdCIsInN0cm9rZSIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInRleHRCYXNlbGluZSIsImZpbGxUZXh0IiwicmVuZGVyQW1iaWVudExpZ2h0IiwiX3RpbWUiLCJjYW52YXMiLCJncmFkIiwiY3JlYXRlUmFkaWFsR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJyIiwicXVhZHJhdGljQ3VydmVUbyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/game/renderer.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/game/sprites.ts":
/*!*****************************!*\
  !*** ./src/game/sprites.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SRC_TILE: function() { return /* binding */ SRC_TILE; },\n/* harmony export */   loadAllResources: function() { return /* binding */ loadAllResources; }\n/* harmony export */ });\n/* harmony import */ var _basePath__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../basePath */ \"(app-pages-browser)/./src/basePath.ts\");\n/**\r\n * üñºÔ∏è Á≤æÁÅµÁ≥ªÁªü ‚Äî ‰ΩøÁî® TMX ÂêàÊàêÁöÑ background.png + foreground.png\r\n *\r\n * background.png (576√ó368) ‚Äî ÂÆåÊï¥Âú∫ÊôØ (ÊâÄÊúâÂ±Ç)\r\n * foreground.png (576√ó368) ‚Äî ‰ªÖÂÆ∂ÂÖ∑/ÈöúÁ¢çÁâ©Â±Ç (Áî®‰∫éÊ∑±Â∫¶ÈÅÆÊå°)\r\n *\r\n * Ê∏≤ÊüìÈ°∫Â∫è: background ‚Üí ÈÄêË°å Y-sort (ÂâçÊôØË°å vs Áé©ÂÆ∂) ‚Üí UI\r\n * ÂâçÊôØË¢´ÂàáÊàêÊØèË°å‰∏ÄÊù°, ‰∏éÁé©ÂÆ∂Êåâ Y ÂùêÊ†áÊéíÂ∫è, ÂÆûÁé∞Ê≠£Á°ÆÁöÑÈÄèËßÜÈÅÆÊå°„ÄÇ\r\n */ \nconst SRC_TILE = 16;\n// ==================== ÂõæÁâáÂä†ËΩΩÂô® ====================\nfunction loadImage(src) {\n    return new Promise((resolve)=>{\n        const img = new Image();\n        img.onload = ()=>resolve(img);\n        img.onerror = ()=>{\n            console.warn(\"‚ö†Ô∏è Êó†Ê≥ïÂä†ËΩΩ: \".concat(src));\n            resolve(null);\n        };\n        img.src = src;\n    });\n}\n// ==================== È¢ÑÊ∏≤Êüì ====================\nfunction preRenderLayer(image, cols, rows, tileSize, fillColor) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = cols * tileSize;\n    canvas.height = rows * tileSize;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.imageSmoothingEnabled = false;\n    if (fillColor) {\n        ctx.fillStyle = fillColor;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    if (image) {\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n    }\n    return canvas;\n}\n/**\r\n * Â∞ÜÂâçÊôØ canvas Êåâ tile Ë°åÂàáÊàêÁã¨Á´ã canvas Êù°„ÄÇ\r\n * Âè™ÊúâÂåÖÂê´ÈùûÈÄèÊòéÂÉèÁ¥†ÁöÑË°åÊâçÂàõÂª∫ canvas, ÂÖ∂‰Ωô‰∏∫ null„ÄÇ\r\n */ function sliceForegroundRows(fgCanvas, cols, rows, tileSize) {\n    const result = new Array(rows).fill(null);\n    const fullCtx = fgCanvas.getContext(\"2d\");\n    const totalW = cols * tileSize;\n    for(let row = 0; row < rows; row++){\n        const y = row * tileSize;\n        const imgData = fullCtx.getImageData(0, y, totalW, tileSize);\n        // Ê£ÄÊü•Ëøô‰∏ÄË°åÊòØÂê¶ÊúâÈùûÈÄèÊòéÂÉèÁ¥†\n        let hasContent = false;\n        for(let i = 3; i < imgData.data.length; i += 4){\n            if (imgData.data[i] > 0) {\n                hasContent = true;\n                break;\n            }\n        }\n        if (!hasContent) continue;\n        const rowCanvas = document.createElement(\"canvas\");\n        rowCanvas.width = totalW;\n        rowCanvas.height = tileSize;\n        const rowCtx = rowCanvas.getContext(\"2d\");\n        rowCtx.imageSmoothingEnabled = false;\n        rowCtx.putImageData(imgData, 0, 0);\n        result[row] = rowCanvas;\n    }\n    const count = result.filter(Boolean).length;\n    console.log(\"‚úÇÔ∏è ÂâçÊôØÂàáÁâá: \".concat(count, \"/\").concat(rows, \" Ë°åÊúâÂÜÖÂÆπ\"));\n    return result;\n}\n// ==================== ‰∏ªÂä†ËΩΩÂáΩÊï∞ ====================\nasync function loadAllResources(cols, rows, tileSize) {\n    const [bgImage, fgImage, frameImage, playerSprite] = await Promise.all([\n        loadImage((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.assetPath)(\"/sprites/background.png\")),\n        loadImage((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.assetPath)(\"/sprites/foreground.png\")),\n        loadImage((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.assetPath)(\"/sprites/frame.png\")),\n        loadImage((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.assetPath)(\"/sprites/player.png\"))\n    ]);\n    console.log(\"\\uD83D\\uDDBCÔ∏è ËµÑÊ∫êÂä†ËΩΩ:\", bgImage ? \"‚úÖ background.png\" : \"‚ùå background.png\", fgImage ? \"‚úÖ foreground.png\" : \"‚ùå foreground.png\", frameImage ? \"‚úÖ frame.png\" : \"‚ùå frame.png\", playerSprite ? \"‚úÖ player.png\" : \"‚ùå player.png\");\n    const background = preRenderLayer(bgImage, cols, rows, tileSize, \"#050303\");\n    const foreground = preRenderLayer(fgImage, cols, rows, tileSize);\n    const frameOverlay = preRenderLayer(frameImage, cols, rows, tileSize);\n    const foregroundRows = sliceForegroundRows(foreground, cols, rows, tileSize);\n    return {\n        background,\n        foreground,\n        foregroundRows,\n        frameOverlay,\n        playerSprite,\n        loaded: true\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWEsR0FBRyxNQUFNbkQsUUFBUW9ELEdBQUcsQ0FBQztRQUNyRXRELFVBQVVGLG9EQUFTQSxDQUFDO1FBQ3BCRSxVQUFVRixvREFBU0EsQ0FBQztRQUNwQkUsVUFBVUYsb0RBQVNBLENBQUM7UUFDcEJFLFVBQVVGLG9EQUFTQSxDQUFDO0tBQ3JCO0lBRURVLFFBQVF3QyxHQUFHLENBQ1QsdUJBQ0FFLFVBQVcscUJBQW9CLG9CQUMvQkMsVUFBVyxxQkFBb0Isb0JBQy9CQyxhQUFjLGdCQUFlLGVBQzdCQyxlQUFnQixpQkFBZ0I7SUFHbEMsTUFBTUUsYUFBYTdDLGVBQWV3QyxTQUFTdEMsTUFBTUMsTUFBTUMsVUFBVTtJQUNqRSxNQUFNMEMsYUFBYTlDLGVBQWV5QyxTQUFTdkMsTUFBTUMsTUFBTUM7SUFDdkQsTUFBTTJDLGVBQWUvQyxlQUFlMEMsWUFBWXhDLE1BQU1DLE1BQU1DO0lBQzVELE1BQU00QyxpQkFBaUIvQixvQkFBb0I2QixZQUFZNUMsTUFBTUMsTUFBTUM7SUFFbkUsT0FBTztRQUFFeUM7UUFBWUM7UUFBWUU7UUFBZ0JEO1FBQWNKO1FBQWNNLFFBQVE7SUFBSztBQUM1RiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvZ2FtZS9zcHJpdGVzLnRzP2U5ZmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIPCflrzvuI8g57K+54G157O757ufIOKAlCDkvb/nlKggVE1YIOWQiOaIkOeahCBiYWNrZ3JvdW5kLnBuZyArIGZvcmVncm91bmQucG5nXHJcbiAqXHJcbiAqIGJhY2tncm91bmQucG5nICg1NzbDlzM2OCkg4oCUIOWujOaVtOWcuuaZryAo5omA5pyJ5bGCKVxyXG4gKiBmb3JlZ3JvdW5kLnBuZyAoNTc2w5czNjgpIOKAlCDku4Xlrrblhbcv6Zqc56KN54mp5bGCICjnlKjkuo7mt7Hluqbpga7mjKEpXHJcbiAqXHJcbiAqIOa4suafk+mhuuW6jzogYmFja2dyb3VuZCDihpIg6YCQ6KGMIFktc29ydCAo5YmN5pmv6KGMIHZzIOeOqeWutikg4oaSIFVJXHJcbiAqIOWJjeaZr+iiq+WIh+aIkOavj+ihjOS4gOadoSwg5LiO546p5a625oyJIFkg5Z2Q5qCH5o6S5bqPLCDlrp7njrDmraPnoa7nmoTpgI/op4bpga7mjKHjgIJcclxuICovXHJcblxyXG5pbXBvcnQgeyBhc3NldFBhdGggfSBmcm9tICcuLi9iYXNlUGF0aCc7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSDnsbvlnosgPT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGludGVyZmFjZSBMb2FkZWRSZXNvdXJjZXMge1xyXG4gIGJhY2tncm91bmQ6IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbDtcclxuICBmb3JlZ3JvdW5kOiBIVE1MQ2FudmFzRWxlbWVudCB8IG51bGw7XHJcbiAgLyoqIOWJjeaZr+aMiSB0aWxlIOihjOWIh+eJhywgaW5kZXggPSB0aWxlIHJvdywg5LuF5YyF5ZCr5pyJ5YaF5a6555qE6KGMICovXHJcbiAgZm9yZWdyb3VuZFJvd3M6IChIVE1MQ2FudmFzRWxlbWVudCB8IG51bGwpW107XHJcbiAgLyoqIOaIv+mXtOahhuaetuimhuebluWxgiAo5aeL57uI6YGu5oyh546p5a62KSAqL1xyXG4gIGZyYW1lT3ZlcmxheTogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsO1xyXG4gIC8qKiDnjqnlrrbnsr7ngbXlm74gKDMgY29scyDDlyA0IHJvd3MpICovXHJcbiAgcGxheWVyU3ByaXRlOiBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbDtcclxuICBsb2FkZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTUkNfVElMRSA9IDE2O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0g5Zu+54mH5Yqg6L295ZmoID09PT09PT09PT09PT09PT09PT09XHJcbmZ1bmN0aW9uIGxvYWRJbWFnZShzcmM6IHN0cmluZyk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudCB8IG51bGw+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcclxuICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyDml6Dms5XliqDovb06ICR7c3JjfWApO1xyXG4gICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgfTtcclxuICAgIGltZy5zcmMgPSBzcmM7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IOmihOa4suafkyA9PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBwcmVSZW5kZXJMYXllcihcclxuICBpbWFnZTogSFRNTEltYWdlRWxlbWVudCB8IG51bGwsXHJcbiAgY29sczogbnVtYmVyLFxyXG4gIHJvd3M6IG51bWJlcixcclxuICB0aWxlU2l6ZTogbnVtYmVyLFxyXG4gIGZpbGxDb2xvcj86IHN0cmluZ1xyXG4pOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgY2FudmFzLndpZHRoID0gY29scyAqIHRpbGVTaXplO1xyXG4gIGNhbnZhcy5oZWlnaHQgPSByb3dzICogdGlsZVNpemU7XHJcbiAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG4gIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgaWYgKGZpbGxDb2xvcikge1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxDb2xvcjtcclxuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGltYWdlKSB7XHJcbiAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICBpbWFnZSxcclxuICAgICAgMCwgMCwgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCxcclxuICAgICAgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhbnZhcztcclxufVxyXG5cclxuLyoqXHJcbiAqIOWwhuWJjeaZryBjYW52YXMg5oyJIHRpbGUg6KGM5YiH5oiQ54us56uLIGNhbnZhcyDmnaHjgIJcclxuICog5Y+q5pyJ5YyF5ZCr6Z2e6YCP5piO5YOP57Sg55qE6KGM5omN5Yib5bu6IGNhbnZhcywg5YW25L2Z5Li6IG51bGzjgIJcclxuICovXHJcbmZ1bmN0aW9uIHNsaWNlRm9yZWdyb3VuZFJvd3MoXHJcbiAgZmdDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LFxyXG4gIGNvbHM6IG51bWJlcixcclxuICByb3dzOiBudW1iZXIsXHJcbiAgdGlsZVNpemU6IG51bWJlclxyXG4pOiAoSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsKVtdIHtcclxuICBjb25zdCByZXN1bHQ6IChIVE1MQ2FudmFzRWxlbWVudCB8IG51bGwpW10gPSBuZXcgQXJyYXkocm93cykuZmlsbChudWxsKTtcclxuICBjb25zdCBmdWxsQ3R4ID0gZmdDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XHJcbiAgY29uc3QgdG90YWxXID0gY29scyAqIHRpbGVTaXplO1xyXG5cclxuICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCByb3dzOyByb3crKykge1xyXG4gICAgY29uc3QgeSA9IHJvdyAqIHRpbGVTaXplO1xyXG4gICAgY29uc3QgaW1nRGF0YSA9IGZ1bGxDdHguZ2V0SW1hZ2VEYXRhKDAsIHksIHRvdGFsVywgdGlsZVNpemUpO1xyXG4gICAgLy8g5qOA5p+l6L+Z5LiA6KGM5piv5ZCm5pyJ6Z2e6YCP5piO5YOP57SgXHJcbiAgICBsZXQgaGFzQ29udGVudCA9IGZhbHNlO1xyXG4gICAgZm9yIChsZXQgaSA9IDM7IGkgPCBpbWdEYXRhLmRhdGEubGVuZ3RoOyBpICs9IDQpIHtcclxuICAgICAgaWYgKGltZ0RhdGEuZGF0YVtpXSA+IDApIHsgaGFzQ29udGVudCA9IHRydWU7IGJyZWFrOyB9XHJcbiAgICB9XHJcbiAgICBpZiAoIWhhc0NvbnRlbnQpIGNvbnRpbnVlO1xyXG5cclxuICAgIGNvbnN0IHJvd0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgcm93Q2FudmFzLndpZHRoID0gdG90YWxXO1xyXG4gICAgcm93Q2FudmFzLmhlaWdodCA9IHRpbGVTaXplO1xyXG4gICAgY29uc3Qgcm93Q3R4ID0gcm93Q2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG4gICAgcm93Q3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgcm93Q3R4LnB1dEltYWdlRGF0YShpbWdEYXRhLCAwLCAwKTtcclxuICAgIHJlc3VsdFtyb3ddID0gcm93Q2FudmFzO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY291bnQgPSByZXN1bHQuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDtcclxuICBjb25zb2xlLmxvZyhg4pyC77iPIOWJjeaZr+WIh+eJhzogJHtjb3VudH0vJHtyb3dzfSDooYzmnInlhoXlrrlgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PSDkuLvliqDovb3lh73mlbAgPT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRBbGxSZXNvdXJjZXMoXHJcbiAgY29sczogbnVtYmVyLFxyXG4gIHJvd3M6IG51bWJlcixcclxuICB0aWxlU2l6ZTogbnVtYmVyXHJcbik6IFByb21pc2U8TG9hZGVkUmVzb3VyY2VzPiB7XHJcbiAgY29uc3QgW2JnSW1hZ2UsIGZnSW1hZ2UsIGZyYW1lSW1hZ2UsIHBsYXllclNwcml0ZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBsb2FkSW1hZ2UoYXNzZXRQYXRoKCcvc3ByaXRlcy9iYWNrZ3JvdW5kLnBuZycpKSxcclxuICAgIGxvYWRJbWFnZShhc3NldFBhdGgoJy9zcHJpdGVzL2ZvcmVncm91bmQucG5nJykpLFxyXG4gICAgbG9hZEltYWdlKGFzc2V0UGF0aCgnL3Nwcml0ZXMvZnJhbWUucG5nJykpLFxyXG4gICAgbG9hZEltYWdlKGFzc2V0UGF0aCgnL3Nwcml0ZXMvcGxheWVyLnBuZycpKSxcclxuICBdKTtcclxuXHJcbiAgY29uc29sZS5sb2coXHJcbiAgICAn8J+WvO+4jyDotYTmupDliqDovb06JyxcclxuICAgIGJnSW1hZ2UgPyBg4pyFIGJhY2tncm91bmQucG5nYCA6ICfinYwgYmFja2dyb3VuZC5wbmcnLFxyXG4gICAgZmdJbWFnZSA/IGDinIUgZm9yZWdyb3VuZC5wbmdgIDogJ+KdjCBmb3JlZ3JvdW5kLnBuZycsXHJcbiAgICBmcmFtZUltYWdlID8gYOKchSBmcmFtZS5wbmdgIDogJ+KdjCBmcmFtZS5wbmcnLFxyXG4gICAgcGxheWVyU3ByaXRlID8gYOKchSBwbGF5ZXIucG5nYCA6ICfinYwgcGxheWVyLnBuZycsXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgYmFja2dyb3VuZCA9IHByZVJlbmRlckxheWVyKGJnSW1hZ2UsIGNvbHMsIHJvd3MsIHRpbGVTaXplLCAnIzA1MDMwMycpO1xyXG4gIGNvbnN0IGZvcmVncm91bmQgPSBwcmVSZW5kZXJMYXllcihmZ0ltYWdlLCBjb2xzLCByb3dzLCB0aWxlU2l6ZSk7XHJcbiAgY29uc3QgZnJhbWVPdmVybGF5ID0gcHJlUmVuZGVyTGF5ZXIoZnJhbWVJbWFnZSwgY29scywgcm93cywgdGlsZVNpemUpO1xyXG4gIGNvbnN0IGZvcmVncm91bmRSb3dzID0gc2xpY2VGb3JlZ3JvdW5kUm93cyhmb3JlZ3JvdW5kLCBjb2xzLCByb3dzLCB0aWxlU2l6ZSk7XHJcblxyXG4gIHJldHVybiB7IGJhY2tncm91bmQsIGZvcmVncm91bmQsIGZvcmVncm91bmRSb3dzLCBmcmFtZU92ZXJsYXksIHBsYXllclNwcml0ZSwgbG9hZGVkOiB0cnVlIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbImFzc2V0UGF0aCIsIlNSQ19USUxFIiwibG9hZEltYWdlIiwic3JjIiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJjb25zb2xlIiwid2FybiIsInByZVJlbmRlckxheWVyIiwiaW1hZ2UiLCJjb2xzIiwicm93cyIsInRpbGVTaXplIiwiZmlsbENvbG9yIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJkcmF3SW1hZ2UiLCJzbGljZUZvcmVncm91bmRSb3dzIiwiZmdDYW52YXMiLCJyZXN1bHQiLCJBcnJheSIsImZpbGwiLCJmdWxsQ3R4IiwidG90YWxXIiwicm93IiwieSIsImltZ0RhdGEiLCJnZXRJbWFnZURhdGEiLCJoYXNDb250ZW50IiwiaSIsImRhdGEiLCJsZW5ndGgiLCJyb3dDYW52YXMiLCJyb3dDdHgiLCJwdXRJbWFnZURhdGEiLCJjb3VudCIsImZpbHRlciIsIkJvb2xlYW4iLCJsb2ciLCJsb2FkQWxsUmVzb3VyY2VzIiwiYmdJbWFnZSIsImZnSW1hZ2UiLCJmcmFtZUltYWdlIiwicGxheWVyU3ByaXRlIiwiYWxsIiwiYmFja2dyb3VuZCIsImZvcmVncm91bmQiLCJmcmFtZU92ZXJsYXkiLCJmb3JlZ3JvdW5kUm93cyIsImxvYWRlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/game/sprites.ts\n"));

/***/ })

}]);