(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8167:function(e,t,n){Promise.resolve().then(n.bind(n,922))},5775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=n(7043);n(7437),n(2265);let s=a._(n(5602));function l(e,t){var n;let a={loading:e=>{let{error:t,isLoading:n,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,s.default)({...l,modules:null==(n=l.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=n(8993);function s(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return n}},5602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=n(7437),s=n(2265),l=n(1523),r=n(49);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},n=(0,s.lazy)(()=>t.loader().then(i)),c=t.loading;function d(e){let i=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(r.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(n,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(n,{...e})});return(0,a.jsx)(s.Suspense,{fallback:i,children:o})}return d.displayName="LoadableComponent",d}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let a=n(7437),s=n(544);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,s.getExpectedRequestStore)("next/dynamic css"),l=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},4369:function(e,t,n){"use strict";var a=n(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=a.useState,r=a.useEffect,i=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=l({inst:{value:n,getSnapshot:t}}),s=a[0].inst,d=a[1];return i(function(){s.value=n,s.getSnapshot=t,c(s)&&d({inst:s})},[e,n,t]),r(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},2860:function(e,t,n){"use strict";var a=n(2265),s=n(2558),l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=s.useSyncExternalStore,i=a.useRef,o=a.useEffect,c=a.useMemo,d=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,s){var u=i(null);if(null===u.current){var x={hasValue:!1,value:null};u.current=x}else x=u.current;var p=r(e,(u=c(function(){function e(e){if(!o){if(o=!0,r=e,e=a(e),void 0!==s&&x.hasValue){var t=x.value;if(s(t,e))return i=t}return i=e}if(t=i,l(r,e))return t;var n=a(e);return void 0!==s&&s(t,n)?(r=e,t):(r=e,i=n)}var r,i,o=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,a,s]))[0],u[1]);return o(function(){x.hasValue=!0,x.value=p},[p]),d(p),p}},2558:function(e,t,n){"use strict";e.exports=n(4369)},5195:function(e,t,n){"use strict";e.exports=n(2860)},922:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var a=n(7437),s=n(2265),l=n(5775),r=n.n(l),i=n(7633),o=n(9055);let c={book1:["这是我们一起读过的故事……","每一本书都藏着一段回忆。","从第一次一起逛书店开始，","到后来窝在沙发上各看各的书，","那些安静又温暖的时光，","是我最珍贵的宝藏。\uD83D\uDCDA"],book2:["这本相册记录了我们的旅行……","每张照片背后都有一个故事，","有你在的地方，就是最美的风景。\uD83C\uDF38"],book3:["一本菜谱，记着我们试过的食谱……","虽然有些翻车了 \uD83D\uDE05","但一起做饭的日子真的很快乐！\uD83C\uDF73"],book4:["你的日记本……偷偷翻了一页：",'"今天又是被她甜到的一天。"',"……///\uD83D\uDC95"]},d=(0,o.u)("/videos/our-video.mp4"),u=["你发现了一个精心包装的礼物盒！\uD83C\uDF81","轻轻打开……","叮！你的Steam收到了一张通往鹈鹕镇的车票（《星露谷物语》已送达）！","想到之后可能会异地，就希望能有一个无论现实距离多远，我们都能随时‘见面’的地方。 ","这是一个属于我们的新世界，想和你一起在这里种下第一颗防风草，想送你代表共度一生承诺的‘美人鱼吊坠’，想和你一起度过像素世界里的春夏秋冬。","让我们一起搭建起属于我们的小家吧~"],x={photo1:{src:(0,o.u)("/photos/photo1.png"),caption:"一直用作手机壁纸的合照 \uD83D\uDCF8"},photo2:{src:(0,o.u)("/photos/photo2.png"),caption:"看《ZOOTOPIA 2》的那天！ \uD83D\uDDBC️"},photo3:{src:(0,o.u)("/photos/photo3.png"),caption:"这是我们去‘布城’的那天"},photo4:[{src:(0,o.u)("/photos/wall1.png"),caption:"狼狈且开心的‘云顶之旅~’"},{src:(0,o.u)("/photos/wall2.png"),caption:"周年纪念日的花花"},{src:(0,o.u)("/photos/wall3.png"),caption:"可爱的小三花和可爱的她"},{src:(0,o.u)("/photos/wall4.png"),caption:"非常美丽的一件裙子！"},{src:(0,o.u)("/photos/wall5.png"),caption:"希腊女神裙配库洛米哈哈哈哈"},{src:(0,o.u)("/photos/wall6.png"),caption:"去到你的城市"}],map:{src:(0,o.u)("/photos/map.jpg"),caption:"我们的冒险地图 \uD83D\uDDFA️"}},p=(0,o.u)("/music/bgm.mp3"),f=[{lat:24.48,lon:118.09,label:"厦门",note:"想念那个在海边的夏天"},{lat:3.14,lon:101.69,label:"吉隆坡",note:"我们相遇的地方"}];function m(){var e;let t=(0,i.g)(e=>e.closeModal),n=(0,i.g)(e=>e.modalObjectId),[l,r]=(0,s.useState)(0),[o,d]=(0,s.useState)(0),[u,x]=(0,s.useState)(!0),p=n&&c[n]||c.book1||["书架上摆满了书……"],f=null!==(e=p[l])&&void 0!==e?e:"",m=l>=p.length-1;(0,s.useEffect)(()=>{if(!u)return;if(o>=f.length){x(!1);return}let e=setTimeout(()=>{d(e=>e+1)},40);return()=>clearTimeout(e)},[o,f,u]);let h=(0,s.useCallback)(()=>{u?(d(f.length),x(!1)):m?t():(r(e=>e+1),d(0),x(!0))},[u,f.length,m,t]);return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t(),("e"===e.key||"E"===e.key||" "===e.key||"Enter"===e.key)&&h()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,h]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center pb-8 pointer-events-none",children:(0,a.jsx)("div",{className:"pointer-events-auto max-w-[640px] w-[90vw] cursor-pointer",onClick:h,children:(0,a.jsx)("div",{className:"relative bg-[#3a2a18] border-[3px] border-[#c8a96e] rounded-xl p-1 shadow-2xl",style:{boxShadow:"0 0 20px rgba(200, 169, 110, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)"},children:(0,a.jsxs)("div",{className:"bg-gradient-to-b from-[#f5e6c8] to-[#efe0c0] rounded-lg p-5 min-h-[120px] flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 border-b border-[#d4b896] pb-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDA"}),(0,a.jsx)("span",{className:"font-pixel text-[#4a3520] text-xs font-bold",children:"书架"}),(0,a.jsx)("div",{className:"ml-auto flex gap-1",children:Array.from({length:p.length}).map((e,t)=>(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full transition-colors ".concat(t<=l?"bg-[#8b6914]":"bg-[#d4b896]")},t))})]}),(0,a.jsxs)("p",{className:"font-pixel text-[#4a3520] text-sm leading-relaxed min-h-[3em] flex-1",children:[f.slice(0,o),u&&(0,a.jsx)("span",{className:"inline-block w-2 h-4 bg-[#8b6914] ml-0.5 animate-pulse"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-[#d4b896]",children:[(0,a.jsxs)("span",{className:"font-pixel text-[10px] text-[#8b6914]",children:[l+1," / ",p.length]}),!u&&(0,a.jsx)("span",{className:"font-pixel text-[10px] text-[#8b6914] animate-bounce",children:m?"按 E 关闭":"按 E 继续 ▸"})]})]})})})})}function h(){let e=(0,i.g)(e=>e.closeModal),[t,n]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=setTimeout(()=>n(!0),100);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e,children:(0,a.jsxs)("div",{className:"relative max-w-[550px] w-[90vw] transition-all duration-700 ease-out origin-top\n          ".concat(t?"opacity-100 scale-100 rotate-0":"opacity-0 scale-y-0 -rotate-3"),onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"transition-all duration-500 ".concat(t?"opacity-0 scale-y-0 h-0":"opacity-100"),children:(0,a.jsxs)("div",{className:"bg-[#D4A574] border-4 border-[#8B6914] rounded-lg p-8 text-center shadow-xl",children:[(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDC8C"}),(0,a.jsx)("p",{className:"font-pixel text-sdv-dark text-xs mt-2",children:"点击打开信封..."})]})}),(0,a.jsxs)("div",{className:"transition-all duration-700 delay-200 ".concat(t?"opacity-100":"opacity-0 scale-y-0"),children:[(0,a.jsxs)("div",{className:"relative rounded-lg shadow-2xl overflow-hidden",style:{backgroundImage:"url('".concat((0,o.u)("/sprites/letter.png"),"')"),backgroundSize:"cover",backgroundPosition:"center"},children:[(0,a.jsx)("div",{className:"absolute left-12 top-0 bottom-0 w-[2px] bg-red-300/40"}),(0,a.jsxs)("div",{className:"border-4 border-[#D4A574] rounded-lg m-1",children:[(0,a.jsx)("div",{className:"flex justify-center pt-4 pb-2",children:(0,a.jsx)("div",{className:"flex gap-1",children:["\uD83D\uDC95","✨","\uD83D\uDC95"].map((e,t)=>(0,a.jsx)("span",{className:"text-lg animate-sparkle",style:{animationDelay:"".concat(.3*t,"s")},children:e},t))})}),(0,a.jsx)("div",{className:"px-8 pb-6 pl-16",children:(0,a.jsx)("div",{className:"font-letter text-[#4A3520] text-lg leading-[32px] whitespace-pre-line",children:"亲爱的可可：\n\n在认识你之前，我很少或从不写信。\n\n谢谢你一直陪在我身边，无论是开心还是难过的日子。\n\n每一个和你在一起的瞬间，都是我最想珍藏的礼物。\n\n未来的每一天，我都想和你一起度过。\n\n永远爱你的人 ❤️\n\n2026.2.14"})}),(0,a.jsx)("div",{className:"flex justify-center pb-4",children:(0,a.jsx)("div",{className:"flex gap-2",children:["\uD83C\uDF38","\uD83D\uDC9D","\uD83C\uDF38"].map((e,t)=>(0,a.jsx)("span",{className:"text-sm",children:e},t))})})]}),(0,a.jsx)("div",{className:"absolute top-1/3 left-0 right-0 h-[1px] bg-[#D4A574]/20"}),(0,a.jsx)("div",{className:"absolute top-2/3 left-0 right-0 h-[1px] bg-[#D4A574]/20"})]}),(0,a.jsx)("button",{onClick:e,className:"mt-4 w-full font-pixel text-xs bg-sdv-dark text-sdv-cream py-2 rounded   hover:bg-sdv-brown transition-colors border-2 border-sdv-brown   active:translate-y-[1px]",children:"✕ 合上信纸 (Esc)"})]})]})})}function b(){let e=(0,i.g)(e=>e.closeModal),[t,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(()=>n(!0),300);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{let t=t=>{("Escape"===t.key||"e"===t.key||"E"===t.key)&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]);let l=new Date,r=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][l.getMonth()],o=l.getDate(),c=["日","一","二","三","四","五","六"][l.getDay()];return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e,children:(0,a.jsxs)("div",{className:"relative max-w-[360px] w-[85vw]",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden border-2 border-gray-200",style:{boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[(0,a.jsxs)("div",{className:"flex justify-center gap-16 -mt-2 relative z-10",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-400 rounded-full border-2 border-gray-500 shadow-inner"}),(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-400 rounded-full border-2 border-gray-500 shadow-inner"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-rose-500 text-white text-center py-3 -mt-3",children:[(0,a.jsx)("p",{className:"font-pixel text-lg tracking-wider",children:r}),(0,a.jsxs)("p",{className:"font-pixel text-[10px] opacity-80",children:["星期",c]})]}),(0,a.jsx)("div",{className:"text-center py-6 transition-all duration-500 ".concat(t?"opacity-100 scale-100":"opacity-0 scale-y-0"),children:(0,a.jsx)("p",{className:"text-7xl font-bold text-gray-800",style:{fontFamily:"Georgia, serif"},children:o})}),(0,a.jsx)("div",{className:"text-center px-6 pb-4 transition-all duration-700 delay-200 ".concat(t?"opacity-100":"opacity-0"),children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-pink-50 to-red-50 rounded-lg p-4 border border-pink-200",children:[(0,a.jsxs)("p",{className:"font-pixel text-xs text-red-400 mb-2",children:["❤️ ","2026年2月14日"]}),(0,a.jsx)("p",{className:"font-pixel text-[11px] text-gray-600 leading-relaxed whitespace-pre-line",children:"今天是属于我们的日子 \uD83D\uDC95\n\n每一天都值得被铭记，\n而今天，格外特别。"})]})}),(0,a.jsx)("div",{className:"flex justify-center gap-1 pb-3",children:["\uD83D\uDC95","✨","\uD83D\uDC95"].map((e,t)=>(0,a.jsx)("span",{className:"text-sm",style:{animation:"pulse ".concat(1.5+.3*t,"s ease-in-out infinite"),animationDelay:"".concat(.2*t,"s")},children:e},t))})]}),(0,a.jsx)("p",{className:"text-center font-pixel text-[10px] text-white/60 mt-3",children:"按 E / Esc 关闭"})]})})}function g(){let e=(0,i.g)(e=>e.closeModal),t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),(0,s.useEffect)(()=>{t.current&&t.current.play().catch(()=>{})},[]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:e,children:(0,a.jsxs)("div",{className:"relative max-w-[720px] w-[92vw]",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"bg-gradient-to-b from-[#3a3a3a] to-[#2a2a2a] rounded-2xl p-4 shadow-2xl border border-gray-700",style:{boxShadow:"0 8px 40px rgba(0,0,0,0.5)"},children:[(0,a.jsx)("div",{className:"text-center mb-2",children:(0,a.jsx)("span",{className:"font-pixel text-[10px] text-gray-400",children:"\uD83D\uDCFA 我们的回忆"})}),(0,a.jsxs)("div",{className:"bg-black rounded-lg overflow-hidden border-2 border-gray-600 aspect-video relative",children:[(0,a.jsx)("video",{ref:t,src:d,controls:!0,playsInline:!0,className:"w-full h-full object-contain",children:(0,a.jsx)("source",{src:d,type:"video/mp4"})}),(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-br from-white/5 to-transparent"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center mt-3 gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_6px_rgba(34,197,94,0.5)]"}),(0,a.jsx)("div",{className:"w-8 h-0.5 bg-gray-600 rounded"})]})]}),(0,a.jsx)("div",{className:"mx-auto w-24 h-2 bg-[#2a2a2a] rounded-b-lg"}),(0,a.jsx)("div",{className:"mx-auto w-36 h-1.5 bg-[#333] rounded-b"}),(0,a.jsx)("button",{onClick:e,className:"mt-4 w-full font-pixel text-xs bg-gray-800 text-gray-200 py-2.5 rounded-lg   hover:bg-gray-700 transition-colors border border-gray-600   active:translate-y-[1px]",children:"✕ 关闭 (Esc)"})]})})}function v(){var e;let t=(0,i.g)(e=>e.closeModal),[n,l]=(0,s.useState)("wrapped"),[r,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(0),[x,p]=(0,s.useState)(!1),f=null!==(e=u[r])&&void 0!==e?e:"",m=r>=u.length-1;(0,s.useEffect)(()=>{if("wrapped"===n){let e=setTimeout(()=>l("opening"),600);return()=>clearTimeout(e)}if("opening"===n){let e=setTimeout(()=>{l("opened"),p(!0)},800);return()=>clearTimeout(e)}},[n]),(0,s.useEffect)(()=>{if(!x||"opened"!==n)return;if(c>=f.length){p(!1);return}let e=setTimeout(()=>{d(e=>e+1)},35);return()=>clearTimeout(e)},[c,f,x,n]);let h=(0,s.useCallback)(()=>{"opened"===n&&(x?(d(f.length),p(!1)):m?t():(o(e=>e+1),d(0),p(!0)))},[n,x,f.length,m,t]);return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t(),("e"===e.key||"E"===e.key||" "===e.key||"Enter"===e.key)&&h()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,h]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:()=>"opened"===n?h():void 0,children:(0,a.jsxs)("div",{className:"relative max-w-[480px] w-[88vw]",onClick:e=>e.stopPropagation(),children:["wrapped"===n&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-bounce",children:[(0,a.jsx)("div",{className:"text-8xl",children:"\uD83C\uDF81"}),(0,a.jsx)("p",{className:"font-pixel text-white text-xs animate-pulse",children:"发现了一个礼物……"})]}),"opening"===n&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"text-8xl animate-spin",style:{animationDuration:"0.5s"},children:"\uD83C\uDF81"}),(0,a.jsx)("div",{className:"flex gap-2",children:["✨","\uD83C\uDF80","✨","\uD83C\uDF80","✨"].map((e,t)=>(0,a.jsx)("span",{className:"text-2xl animate-ping",style:{animationDelay:"".concat(.1*t,"s"),animationDuration:"0.6s"},children:e},t))})]}),"opened"===n&&(0,a.jsxs)("div",{className:"cursor-pointer",onClick:h,children:[(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2 text-3xl mb-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDF80"}),(0,a.jsx)("span",{children:"✨"}),(0,a.jsx)("span",{children:"\uD83C\uDF80"})]})}),(0,a.jsxs)("div",{className:"bg-gradient-to-b from-[#fff5f5] to-[#ffe8ec] rounded-xl p-1 shadow-2xl border-2 border-pink-300",style:{boxShadow:"0 0 30px rgba(255,182,193,0.3)"},children:[(0,a.jsx)("div",{className:"bg-white/80 rounded-lg p-5 min-h-[100px]",children:(0,a.jsxs)("p",{className:"font-pixel text-[#8b4557] text-sm leading-relaxed min-h-[2.5em]",children:[f.slice(0,c),x&&(0,a.jsx)("span",{className:"inline-block w-2 h-3.5 bg-pink-400 ml-0.5 animate-pulse"})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center px-4 py-2",children:[(0,a.jsxs)("span",{className:"font-pixel text-[9px] text-pink-400",children:[r+1," / ",u.length]}),!x&&(0,a.jsx)("span",{className:"font-pixel text-[9px] text-pink-400 animate-bounce",children:m?"按 E 关闭":"按 E 继续 ▸"})]})]})]})]})})}function y(){var e,t;let n=(0,i.g)(e=>e.closeModal),l=null!==(e=(0,i.g)(e=>e.modalObjectId))&&void 0!==e?e:"photo1",[r,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),[m,h]=(0,s.useState)(0),[b,g]=(0,s.useState)(null),v=x[l],y=Array.isArray(v)?v:[null!=v?v:{src:(0,o.u)("/photos/photo1.jpg"),caption:"一张照片"}],j=y.length>1,w=null!==(t=y[m])&&void 0!==t?t:y[0],D=(0,s.useCallback)(()=>{j&&(u(!1),f(!1),g(null),h(e=>(e+1)%y.length))},[j,y.length]),N=(0,s.useCallback)(()=>{j&&(u(!1),f(!1),g(null),h(e=>(e-1+y.length)%y.length))},[j,y.length]);return(0,s.useEffect)(()=>{let e=setTimeout(()=>c(!0),80);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{let e=e=>{if("Escape"===e.key){n();return}if("e"===e.key||"E"===e.key){j?D():n();return}j&&(("ArrowRight"===e.key||"d"===e.key||"D"===e.key)&&D(),("ArrowLeft"===e.key||"a"===e.key||"A"===e.key)&&N())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,j,D,N]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:n,children:(0,a.jsxs)("div",{className:"relative transition-all duration-500 ease-out\n          ".concat(r?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-6"),style:{width:b?"min(".concat(b.w,"px, 92vw)"):void 0,maxWidth:"92vw",maxHeight:"94vh"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-[#8B6914] via-[#A0782C] to-[#6B4F12] p-3 rounded-sm",style:{boxShadow:"0 8px 32px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.15)"},children:(0,a.jsx)("div",{className:"bg-gradient-to-br from-[#D4A54A] to-[#B8912E] p-1 rounded-sm",children:(0,a.jsx)("div",{className:"bg-[#2a2018] p-1 rounded-sm",children:(0,a.jsxs)("div",{className:"relative bg-[#1a1410] overflow-hidden rounded-sm",children:[d?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 px-10 bg-gradient-to-br from-[#3a2a20] to-[#2a1a10]",children:[(0,a.jsx)("span",{className:"text-5xl mb-3",children:"\uD83D\uDDBC️"}),(0,a.jsx)("p",{className:"font-pixel text-[#8B6914] text-xs",children:"把照片放在 /public/photos/ 文件夹"}),(0,a.jsxs)("p",{className:"font-pixel text-[#6B4F12] text-[10px] mt-1",children:["文件名: ",w.src.split("/").pop()]})]}):(0,a.jsx)("img",{src:w.src,alt:w.caption,className:"block w-full h-auto transition-opacity duration-300 ".concat(p?"opacity-100":"opacity-0"),style:{maxHeight:"calc(94vh - 100px)"},onLoad:e=>{let t=e.currentTarget;if(t.naturalWidth&&t.naturalHeight){let e,n;let a=.92*window.innerWidth-20,s=.94*window.innerHeight-100,l=t.naturalWidth/t.naturalHeight;a/s>l?e=(n=Math.min(s,t.naturalHeight))*l:n=(e=Math.min(a,t.naturalWidth))/l,g({w:e+20,h:n+20})}f(!0)},onError:()=>u(!0)}),!p&&!d&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"font-pixel text-[#8B6914] text-xs animate-pulse",children:"加载中..."})}),(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.08) 0%, transparent 50%, rgba(255,255,255,0.03) 100%)"}})]})})})}),(0,a.jsx)("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-[#888] rounded-full border-2 border-[#666] shadow-md"})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("p",{className:"font-pixel text-white text-sm drop-shadow-lg",children:w.caption})}),j&&(0,a.jsx)("div",{className:"mt-2 flex items-center justify-center gap-1.5",children:y.map((e,t)=>(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-all ".concat(t===m?"bg-[#FFD700] scale-125":"bg-white/30")},t))}),(0,a.jsx)("div",{className:"mt-3 text-center",children:(0,a.jsx)("span",{className:"font-pixel text-white/50 text-[10px]",children:j?"".concat(m+1," / ").concat(y.length,"　按 E / → 下一张　按 A / ← 上一张　Esc 关闭"):"按 E / Esc 关闭"})})]})})}function j(){let e=(0,i.g)(e=>e.closeModal),[t,n]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=setTimeout(()=>n(!0),80);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{let t=t=>{("Escape"===t.key||"e"===t.key||"E"===t.key)&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,children:(0,a.jsx)("div",{className:"relative max-w-[400px] w-[85vw] transition-all duration-500 ease-out\n          ".concat(t?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-6"),onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"bg-gradient-to-b from-[#5C3317] to-[#3E2210] border-4 border-[#8B6914] rounded-lg p-6",style:{boxShadow:"0 0 20px rgba(139,105,20,0.4), inset 0 1px 0 rgba(255,255,255,0.1)"},children:[(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDC84"})}),(0,a.jsx)("p",{className:"font-pixel text-white text-sm text-center leading-relaxed",children:"可可化妆的地方 \uD83D\uDC84"}),(0,a.jsx)("div",{className:"mt-5 text-center",children:(0,a.jsx)("span",{className:"font-pixel text-white/40 text-[10px]",children:"按 E / Esc 关闭"})})]})})})}let w=["000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000001111111110000000000000001111111111111111111100000000","000000000000000000011111111111000000000000111111111111111111111110000000","000000000000001100111111111111100000000011111111111111111111111111100000","000000000000011111111111111111100000001111111111111111111111111111100000","000000000001111111111111111111100000011111111111111111111111111111000000","000000000011111111111111111111000000011111111111111111111111111110000000","000000000111111111111111111110000000001111111111111111111111111100000000","000000001111111111111111111100000000000011111111111111111111111100000000","000000001111111111111111111000000000000001111111011111111111111000000000","000000001111111111111111110000000000000001111100001111111111111000000000","000000000111111111111111100000000000000001111000001111111111110000000000","000000000011111111111111000000000000000011110000011111111111100000000000","000000000001111111111110000000000000000111100000111111111111000000000000","000000000000111111111110000000000000001111000001111111111110000000000000","000000000000011111111100000000000000001110000011111111111100000000000000","000000000000001111111100000000000000001100000011111111111000000000000000","000000000000000111110000000000000000001100000111111111110000000000000000","000000000000000011110000000000000000000100001111111111100000000000000000","000000000000000011100000000000000000000000011111111110000000000000000000","000000000000000111000000000000000000000000011111111100000000000000000000","000000000000001110000000000000000000000000001111111000000000000000000000","000000000000011100000000000000000000000000000111110000000000000000001100","000000000000111000000000000000000000000000000011100000000000000000011110","000000000001110000000000000000000000000000000001000000000000000000111110","000000000001100000000000000000000000000000000000000000000000000001111100","000000000001000000000000000000000000000000000000000000000000000011111000","000000000000000000000000000000000000000000000000000000000000000111110000","000000000000000000000000000000000000000000000000000000000000001111100000","000000000000000000000000000000000000000000000000000000000000011111000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000000000000000"],D="#ffcc00";function N(){let e=(0,i.g)(e=>e.closeModal),t=(0,s.useRef)(null),[n,l]=(0,s.useState)(!1),r=(0,s.useRef)(4.6),o=(0,s.useRef)({active:!1,lastX:0}),c=(0,s.useRef)(!0),[d,u]=(0,s.useState)(null),x=(0,s.useRef)(0),p=(0,s.useRef)(0);(0,s.useEffect)(()=>{let e=setTimeout(()=>l(!0),80);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{let t=t=>{("Escape"===t.key||"e"===t.key||"E"===t.key)&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]);let m=(0,s.useCallback)(()=>{let e=t.current;if(!e)return;let n=e.getContext("2d");if(!n)return;x.current++,c.current&&(r.current+=.008);let a=r.current;n.clearRect(0,0,520,520);for(let e=-60;e<=60;e++){let t=Math.sqrt(3600-e*e);for(let s=-Math.floor(t);s<=Math.floor(t);s++){let t,l,r;let i=s/60,o=e/60,c=1-i*i-o*o;if(c<0)continue;let d=Math.sqrt(c),u=function(e,t){var n;let a=Math.floor((90-e)/180*36),s=Math.floor((t+180)/360*72);return s<0&&(s+=72),s>=72&&(s-=72),!(a<0)&&!(a>=36)&&(null===(n=w[a])||void 0===n?void 0:n[s])==="1"}(180/Math.PI*Math.asin(-o),180/Math.PI*Math.atan2(i*Math.cos(-a)+d*Math.sin(-a),-i*Math.sin(-a)+d*Math.cos(-a))),x=Math.max(0,.6*d+.4);u?(t=Math.floor(61+30*x),l=Math.floor(122+32*x),r=Math.floor(42+18*x)):(t=Math.floor(30+12*x),l=Math.floor(58+20*x),r=Math.floor(106+32*x)),n.fillStyle="rgb(".concat(t,",").concat(l,",").concat(r,")"),n.fillRect((65+s)*4,(65+e)*4,4,4)}}n.strokeStyle="#1a2e4a",n.lineWidth=2,n.beginPath(),n.arc(262,262,240,0,2*Math.PI),n.stroke();let s=[];f.forEach((e,t)=>{let l=function(e,t,n){let a=e*Math.PI/180,s=t*Math.PI/180+n;return{x:Math.cos(a)*Math.sin(s),y:-Math.sin(a),z:Math.cos(a)*Math.cos(s)}}(e.lat,e.lon,a);if(l.z<.05)return;let r=(65+60*l.x)*4,i=(65+60*l.y)*4;s.push({sx:r,sy:i,idx:t});let o=.5*Math.sin(.1*x.current+t)+.5;n.save(),n.globalAlpha=.3+.4*o,n.fillStyle=D,n.beginPath(),n.arc(r,i,16,0,2*Math.PI),n.fill(),n.restore(),n.fillStyle="#ff4455",n.fillRect(r-4,i-4,8,8),n.strokeStyle="#ffffff",n.lineWidth=1,n.strokeRect(r-4,i-4,8,8);let c=d===t?1:l.z>.5?.9:.5;n.save(),n.globalAlpha=c,n.font='bold 14px "Press Start 2P", monospace',n.textAlign="center";let u=e.label,p=i-24,f=n.measureText(u).width+12;n.fillStyle="rgba(0,0,0,0.75)",n.fillRect(r-f/2,p-10,f,20),n.strokeStyle=D,n.lineWidth=2,n.strokeRect(r-f/2,p-10,f,20),n.fillStyle="#ffffff",n.fillText(u,r,p+5),n.restore()}),p.current=requestAnimationFrame(m)},[d]);(0,s.useEffect)(()=>(p.current=requestAnimationFrame(m),()=>cancelAnimationFrame(p.current)),[m]);let h=(0,s.useCallback)(e=>{o.current={active:!0,lastX:e.clientX},c.current=!1,e.target.setPointerCapture(e.pointerId)},[]),b=(0,s.useCallback)(e=>{if(!o.current.active)return;let t=e.clientX-o.current.lastX;r.current+=.01*t,o.current.lastX=e.clientX},[]),g=(0,s.useCallback)(()=>{o.current.active=!1,setTimeout(()=>{c.current=!0},3e3)},[]);return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,children:(0,a.jsxs)("div",{className:"relative transition-all duration-500 ease-out flex flex-col items-center\n          ".concat(n?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-6"),onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"mb-4 text-center",children:(0,a.jsx)("h2",{className:"font-pixel text-[#FFD700] text-lg drop-shadow-lg",children:"\uD83C\uDF0D 我们的足迹"})}),(0,a.jsxs)("div",{className:"relative bg-[#0a0a1a] border-4 border-[#3a3a5a] rounded-lg p-3",style:{boxShadow:"0 0 40px rgba(42, 78, 138, 0.4), inset 0 0 20px rgba(0,0,0,0.5)",imageRendering:"pixelated"},children:[(0,a.jsx)("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 w-24 h-4 bg-gradient-to-b from-[#8B6914] to-[#6B4F12] border-2 border-[#5a4010] rounded-b-md"}),(0,a.jsx)("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-8 h-4 bg-gradient-to-b from-[#A0782C] to-[#8B6914] border-x-2 border-[#5a4010]"}),(0,a.jsx)("canvas",{ref:t,width:520,height:520,className:"cursor-grab active:cursor-grabbing",style:{width:520,height:520,imageRendering:"pixelated"},onPointerDown:h,onPointerMove:b,onPointerUp:g}),[...Array(12)].map((e,t)=>(0,a.jsx)("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-pulse",style:{left:"".concat(10+80*Math.random(),"%"),top:"".concat(10+80*Math.random(),"%"),animationDelay:"".concat(.3*t,"s"),opacity:.3+.5*Math.random()}},t))]}),(0,a.jsx)("div",{className:"mt-8 flex flex-wrap justify-center gap-4",children:f.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-black/50 px-3 py-1.5 rounded border border-[#3a3a5a]",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-[#ff4455] border border-white"}),(0,a.jsx)("span",{className:"font-pixel text-white text-xs",children:e.label}),e.note&&(0,a.jsxs)("span",{className:"font-pixel text-[#FFD700] text-[10px]",children:["— ",e.note]})]},t))}),(0,a.jsx)("div",{className:"mt-3 text-center",children:(0,a.jsx)("span",{className:"font-pixel text-white/50 text-[10px]",children:"拖拽旋转地球　|　按 E / Esc 关闭"})})]})})}function k(){let e=(0,i.g)(e=>e.activeModal);if(!e)return null;switch(e){case"book":return(0,a.jsx)(m,{});case"letter":return(0,a.jsx)(h,{});case"calendar":return(0,a.jsx)(b,{});case"video":return(0,a.jsx)(g,{});case"gift":return(0,a.jsx)(v,{});case"photo":return(0,a.jsx)(y,{});case"map":return(0,a.jsx)(N,{});case"table":return(0,a.jsx)(j,{});default:return null}}function E(){let e=(0,s.useRef)(null),t=(0,i.g)(e=>e.isMusicPlaying),n=(0,i.g)(e=>e.toggleMusic),l=(0,i.g)(e=>e.nearbyObject);return(0,s.useEffect)(()=>{e.current&&(t?e.current.play().catch(()=>{}):e.current.pause())},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("audio",{ref:e,src:p,loop:!0,preload:"auto"}),(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("h1",{className:"font-pixel text-sdv-gold text-lg drop-shadow-lg",children:"\uD83D\uDC95 我们的小屋 \uD83D\uDC95"}),(0,a.jsx)("p",{className:"font-pixel text-sdv-cream text-xs mt-1 opacity-70",children:"— 情人节快乐 —"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 max-w-[960px] w-full px-2",children:[(0,a.jsxs)("div",{className:"font-pixel text-[10px] text-sdv-cream/70 space-y-0.5",children:[(0,a.jsx)("p",{children:"\uD83C\uDFAE WASD / 方向键 — 移动"}),(0,a.jsx)("p",{children:"\uD83D\uDD11 E — 互动"})]}),(0,a.jsx)("div",{className:"font-pixel text-xs text-sdv-gold min-w-[200px] text-center",children:l&&(0,a.jsx)("span",{className:"animate-bounce-soft inline-block",children:"✨ 按 E 查看 ✨"})}),(0,a.jsx)("button",{onClick:n,className:"font-pixel text-xs bg-sdv-dark text-sdv-cream px-3 py-1.5 rounded   border-2 border-sdv-brown hover:bg-sdv-brown transition-colors   active:translate-y-[1px]",children:t?"\uD83C\uDFB5 音乐 ON":"\uD83D\uDD07 音乐 OFF"})]})]})}let C=r()(()=>n.e(61).then(n.bind(n,2061)),{loadableGenerated:{webpack:()=>[2061]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"flex items-center justify-center w-[960px] h-[704px] bg-sdv-dark border-4 border-sdv-brown rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"font-pixel text-sdv-gold text-sm animate-sparkle",children:"加载中..."}),(0,a.jsx)("p",{className:"font-pixel text-sdv-cream text-xs mt-2 opacity-70",children:"正在布置小屋 \uD83C\uDFE0"})]})})});function M(){let[e,t]=(0,s.useState)(!0),[n,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{l(Array.from({length:50},()=>({x:100*Math.random(),y:100*Math.random(),delay:5*Math.random(),duration:2+4*Math.random()})))},[]),(0,a.jsxs)("main",{className:"relative min-h-screen flex flex-col items-center justify-center bg-[#1a1a2e] p-4",children:[n.map((e,t)=>(0,a.jsx)("div",{className:"star",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),"--delay":"".concat(e.delay,"s"),"--duration":"".concat(e.duration,"s")}},t)),e&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#1a1a2e] cursor-pointer",onClick:()=>t(!1),children:(0,a.jsxs)("div",{className:"text-center animate-fade-in",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("span",{className:"text-6xl",children:"\uD83C\uDFE0"})}),(0,a.jsx)("h1",{className:"font-pixel text-sdv-gold text-xl mb-4 drop-shadow-lg",children:"\uD83D\uDC95 我们的小屋 \uD83D\uDC95"}),(0,a.jsx)("p",{className:"font-pixel text-sdv-cream text-xs mb-2 opacity-80",children:"— 情人节快乐 —"}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("p",{className:"font-pixel text-sdv-gold text-xs animate-bounce-soft",children:"✨ 点击任意位置开始 ✨"})}),(0,a.jsxs)("div",{className:"mt-12 font-pixel text-[10px] text-sdv-cream/40 space-y-1",children:[(0,a.jsx)("p",{children:"\uD83C\uDFAE WASD / 方向键 移动角色"}),(0,a.jsx)("p",{children:"\uD83D\uDD11 靠近物体按 E 互动"}),(0,a.jsx)("p",{children:"\uD83D\uDCF8 探索房间，发现惊喜"})]})]})}),(0,a.jsx)(E,{}),(0,a.jsx)(C,{}),(0,a.jsx)(k,{})]})}},9055:function(e,t,n){"use strict";function a(e){return"".concat("/Happy-Valentine-s-Day").concat(e)}n.d(t,{u:function(){return a}})},4739:function(e,t,n){"use strict";var a,s;n.d(t,{AV:function(){return i},Fu:function(){return m},I_:function(){return l},J6:function(){return x},Nm:function(){return a},RV:function(){return h},Vx:function(){return u},hk:function(){return p},j5:function(){return f},lf:function(){return c},ow:function(){return d},rj:function(){return r},vj:function(){return o}});let l=32,r=36,i=23,o=1152,c=736,d=28,u=1.5,x=96,p=448,f=48;(s=a||(a={}))[s.DOWN=0]="DOWN",s[s.LEFT=1]="LEFT",s[s.RIGHT=2]="RIGHT",s[s.UP=3]="UP";let m=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,1,0,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,0,0,0,1,0,0,0,0,0],[0,0,1,1,0,0,0,0,1,1,1,1,1,1,0,0,1,0,1,0,0,0,0,1,1,1,1,0,1,0,1,1,1,0,0,0],[0,0,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,0,1,0,0,0],[0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0]],h=[{id:"photo1",type:"photo",x:4,y:14,width:2,height:1,label:"墙上的相框",emoji:"\uD83D\uDDBC️"},{id:"photo2",type:"photo",x:23,y:13,width:3,height:2,label:"墙上的相框",emoji:"\uD83D\uDDBC️"},{id:"photo3",type:"photo",x:31,y:14,width:3,height:1,label:"墙上的相框",emoji:"\uD83D\uDDBC️"},{id:"photo4",type:"photo",x:19,y:4,width:2,height:1,label:"照片墙",emoji:"\uD83D\uDDBC️"},{id:"book1",type:"book",x:24,y:5,width:2,height:1,label:"书架",emoji:"\uD83D\uDCDA"},{id:"calendar",type:"calendar",x:23,y:19,width:5,height:3,label:"日历",emoji:"\uD83D\uDCC5"},{id:"video",type:"video",x:16,y:14,width:3,height:1,label:"电视",emoji:"\uD83D\uDCFA"},{id:"map",type:"map",x:16,y:15,width:3,height:2,label:"地图",emoji:"\uD83D\uDDFA️"},{id:"letter",type:"letter",x:7,y:14,width:2,height:3,label:"桌上的信封",emoji:"\uD83D\uDC8C"},{id:"gift",type:"gift",x:3,y:7,width:1,height:1,label:"礼物盒",emoji:"\uD83C\uDF81"},{id:"table",type:"table",x:32,y:19,width:1,height:2,label:"梳妆台",emoji:"\uD83D\uDC84"}]},7633:function(e,t,n){"use strict";let a;n.d(t,{g:function(){return f}});let s=e=>{let t;let n=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,l={setState:a,getState:s,getInitialState:()=>r,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},r=t=e(a,s,l);return l},l=e=>e?s(e):s;var r=n(2265),i=n(5195);let{useDebugValue:o}=r,{useSyncExternalStoreWithSelector:c}=i,d=!1,u=e=>e,x=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?l(e):e,n=(e,n)=>(function(e,t=u,n){n&&!d&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),d=!0);let a=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return o(a),a})(t,e,n);return Object.assign(n,t),n};var p=n(4739);let f=(a=e=>({playerX:p.J6,playerY:p.hk,direction:p.Nm.DOWN,isMoving:!1,animFrame:0,nearbyObject:null,activeModal:null,modalObjectId:null,isMusicPlaying:!1,movePlayer:(t,n)=>e({playerX:t,playerY:n}),setDirection:t=>e({direction:t}),setIsMoving:t=>e({isMoving:t}),nextAnimFrame:()=>e(e=>({animFrame:(e.animFrame+1)%4})),setNearbyObject:t=>e({nearbyObject:t}),openModal:(t,n)=>e({activeModal:t,modalObjectId:null!=n?n:null}),closeModal:()=>e({activeModal:null,modalObjectId:null}),toggleMusic:()=>e(e=>({isMusicPlaying:!e.isMusicPlaying}))}))?x(a):x}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8167)}),_N_E=e.O()}]);